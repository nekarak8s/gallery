self.onmessage=async function(t){self.onmessage=function(t){switch(t.data.type){case"resize":n=a.width,c=a.height,o=t.data.width;break;case"stop":i&&cancelAnimationFrame(i),self.close()}};const{canvas:a,imgUrl:e}=t.data,s=a.getContext("2d");let i,n=a.width,c=a.height,o=64;const r=await fetch(e),h=await r.blob();(t=>{let a=0,e=0;const r=()=>{s.clearRect(0,0,n,c),s.save(),s.translate(n/2,c/2),s.rotate(a*Math.PI/180),s.drawImage(t,-o/2,-o/2,o,o),s.restore(),e+=.012,a+=2.8*(Math.sin(e)+1),i=requestAnimationFrame(r)};r()})(await createImageBitmap(h))};