"use strict";(self.webpackChunkgallery=self.webpackChunkgallery||[]).push([[65],{1379:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Tt});var i=s(5466),n=s(1807),o=s(6001),r=s(7355),a=s(5301),h=s(6735),c=s(3823);const d=["styles"];function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const u=e=>{let{styles:t={}}=e,s=(0,h.Z)(e,d);return(0,c.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s),{},{children:(0,c.jsx)("path",{fill:"currentColor",d:"M6.03 4.97L7 4 2 2l2 5 .97-.97 1.82 1.82C2.16 13.13 3.94 20.7 4 21.03l.26.97 1.94-.5-.2-.79 6.82-6.83L16 17.06V19l3 3 1-2 2-1-3-3h-1.94l-3.18-3.18L20.71 6l.79.19.5-1.93-.97-.26c-.33-.06-7.9-1.84-13.18 2.79zM5.78 19.5c-.28-2.05-.5-6.78 2.43-10.23l3.91 3.91zM19.5 5.78l-6.32 6.34-3.91-3.91c3.45-2.93 8.18-2.71 10.23-2.43"})}))},g=["styles"];function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const w=e=>{let{styles:t={}}=e,s=(0,h.Z)(e,g);return(0,c.jsx)("svg",x(x({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),{},{children:(0,c.jsx)("path",{d:"M6.17 12.762c4.715 5.236 9.659 7.176 14.83 5.82-5.138-1.346-8.698-4.647-10.677-9.896L14.077 5H3v10.874l3.17-3.112z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))};var y=s(2561);const f=()=>{const e=(0,y.Z)();return(0,c.jsx)("div",{className:"control-notice",children:e?(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:[(0,c.jsx)("div",{className:"control-notice__controller",children:(0,c.jsx)("div",{})}),(0,c.jsx)("p",{children:"컨트롤러로 이동"})]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("div",{className:"control-notice__button",children:(0,c.jsx)(w,{})}),(0,c.jsx)("p",{children:"버튼으로 점프"})]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("div",{className:"control-notice__button",children:(0,c.jsx)(u,{})}),(0,c.jsx)("p",{children:"버튼으로 앨범 조준"})]})]}):(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:(0,c.jsxs)("p",{children:[(0,c.jsx)("kbd",{children:"↑"})," ",(0,c.jsx)("kbd",{children:"↓"})," 키로 앞뒤 이동"]})}),(0,c.jsx)("li",{children:(0,c.jsxs)("p",{children:[(0,c.jsx)("kbd",{children:"←"})," ",(0,c.jsx)("kbd",{children:"→"})," 키로 시선 회전"]})}),(0,c.jsx)("li",{children:(0,c.jsxs)("p",{children:[(0,c.jsx)("kbd",{children:"Ctrl"}),"  키로 앨범 조준"]})}),(0,c.jsx)("li",{children:(0,c.jsxs)("p",{children:[(0,c.jsx)("kbd",{children:"Alt"})," / ",(0,c.jsx)("kbd",{children:"Opt"}),"  키로 점프"]})})]})})},v=()=>{const e=(0,n.s0)();return(0,c.jsx)("nav",{className:"gallery-navbar",children:(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:(0,c.jsx)("button",{"data-cursor-scale":r.D,onClick:()=>{const t=document.referrer;!t||window.history.length<2||new URL(t).host!==window.location.host?e(o._.Home.path):e(-1)},"aria-label":"페이지 뒤로가기",children:"뒤로가기"})}),(0,c.jsxs)("li",{className:"gallery-navbar__notice",children:[(0,c.jsx)("button",{"data-cursor-scale":r.D,"aria-label":"\r 조작법 열기",children:"조작법"}),(0,c.jsx)(f,{})]})]})})},b=s.p+"images/MapleStory-Pantheonce107a003370f566b2df.mp3",A=s.p+"images/MapleStory-Raindrop-Flower3ed07e7494805aadabe3.mp3";var j=s(2914),Z=s(3940),z=s(9350),O=s(4599),P=s(3306),S=s(7916),k=s(8469),I=s(7948),L=s(135),M=s(4537);class E extends M.T{constructor(e){var t;let s;if(super(e),(0,a.Z)(this,"type","ceiling"),(0,a.Z)(this,"textures",{}),(0,a.Z)(this,"isPlane",!1),this.x+=this.width*Math.cos(this.rotationY)/2,this.x+=this.depth*Math.sin(this.rotationY)/2,this.z-=this.width*Math.sin(this.rotationY)/2,this.z+=this.depth*Math.cos(this.rotationY)/2,!0===e.isPlane?(this.isPlane=!0,this.rotationX+=Math.PI/2,s=new O._12(this.width,this.depth)):(this.isPlane=!1,this.y+=this.height/2,s=new O.DvJ(this.width,this.height,this.depth)),e.texture&&(this.textures.baseTex=e.texture.textureLoader.load(e.texture.baseImg),e.texture.normalImg&&(this.textures.normalTex=e.texture.textureLoader.load(e.texture.normalImg)),e.texture.roughImg&&(this.textures.roughTex=e.texture.textureLoader.load(e.texture.roughImg)),e.texture.ambientImg&&(this.textures.ambientTex=e.texture.textureLoader.load(e.texture.ambientImg)),e.texture.repeatX||e.texture.repeatY))for(const t in this.textures){const s=this.textures[t];s.wrapS=O.rpg,s.wrapT=O.rpg,s.repeat.x=e.texture.repeatX||1,s.repeat.y=e.texture.repeatY||1}const i=null!==(t=e.texture)&&void 0!==t&&t.roughImg?new O.Wid({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0,roughnessMap:this.textures.roughTex||void 0,roughness:e.texture.roughness||1}):new O.YBo({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0});this.mesh=new O.Kj0(s,i),this.mesh.position.set(this.x,this.y,this.z),this.mesh.rotation.set(this.rotationX,this.rotationY,this.rotationZ),this.mesh.castShadow=!e.transparent,this.mesh.receiveShadow=!e.transparent,this.mesh.name=this.name||this.type,e.container.add(this.mesh),e.world&&this.setBoxCannonBody(e.world,0,e.cannonMaterial),this.dispose=()=>{for(const e in this.textures){this.textures[e].dispose()}this.mesh.material instanceof Array?this.mesh.material.forEach((e=>{e.dispose()})):this.mesh.material.dispose(),this.mesh.geometry.dispose(),e.container.remove(this.mesh),e.world&&e.world.removeBody(this.cannonBody)}}}var B=s(4395),N=s(4091);class C{constructor(e){(0,a.Z)(this,"type","edges"),(0,a.Z)(this,"cannonBodies",[]);const t=[];e.edgesData.forEach((s=>{const i=new O.DvJ(s.width,s.height,s.depth),n=s.rotationX||0,o=s.rotationY||0,r=s.rotationZ||0;if(i.rotateX(n),i.rotateY(o),i.rotateZ(r),i.translate(s.x,s.y,s.z),t.push(i),e.world){const t=new B.uT({mass:0,position:new B.AO(s.x,s.y,s.z),shape:new B.xu(new B.AO(s.width/2,s.height/2,s.depth/2))}),i=new B._f,a=new B._f,h=new B._f;i.setFromAxisAngle(new B.AO(1,0,0),n),a.setFromAxisAngle(new B.AO(0,1,0),o),h.setFromAxisAngle(new B.AO(0,0,1),r),t.quaternion.copy(i.mult(a).mult(h)),this.cannonBodies.push(t),e.world.addBody(t)}}));const s=N.n4(t);t.forEach((e=>{e.dispose()}));const i=new O.YBo({color:16777215,opacity:0,transparent:!0});this.mesh=new O.Kj0(s,i),this.mesh.name="edge",e.container.add(this.mesh),this.dispose=()=>{e.world&&this.cannonBodies.forEach((t=>{e.world.removeBody(t)})),this.mesh.material instanceof Array?this.mesh.material.forEach((e=>{e.dispose()})):this.mesh.material.dispose(),this.mesh.geometry.dispose(),e.container.remove(this.mesh)}}}var T=s(5878),R=s(1046),V=s(4670);class Y{constructor(e){(0,a.Z)(this,"type","floors"),(0,a.Z)(this,"meshes",[]),(0,a.Z)(this,"textureSource",{}),(0,a.Z)(this,"textures",[]),(0,a.Z)(this,"spotLights",[]),e.normalImg&&(this.textureSource.normalTex=e.textureLoader.load(e.normalImg)),e.roughImg&&(this.textureSource.roughTex=e.textureLoader.load(e.roughImg)),e.ambientImg&&(this.textureSource.ambientTex=e.textureLoader.load(e.ambientImg));for(const t in this.textureSource)this.textureSource[t].wrapS=O.rpg,this.textureSource[t].wrapT=O.rpg,this.textureSource[t].repeat.x=e.repeatX||1,this.textureSource[t].repeat.y=e.repeatY||1;e.framesData.forEach(((t,s)=>{if(!e.postList[s].isActive)return;const i=new O.DvJ(t.width,t.height,t.depth),n=e.textureLoader.load(e.postList[s].imageURL);this.textures.push(n);const o=e.roughImg?new O.Wid({color:e.color,map:n,normalMap:this.textureSource.normalTex||void 0,aoMap:this.textureSource.ambientTex||void 0,roughnessMap:this.textureSource.roughTex||void 0}):new O.YBo({color:e.color,map:n,normalMap:this.textureSource.normalTex||void 0,aoMap:this.textureSource.ambientTex||void 0}),r=t.rotationX||0,a=t.rotationY||0,h=t.rotationZ||0,c=new V.t(i,o,s);if(c.position.set(t.x,t.y,t.z),c.rotation.set(r,a,h),c.castShadow=!0,c.receiveShadow=!0,c.name="frame",this.meshes.push(c),e.container.add(c),e.spotLight&&t.width){const s=new O.PMe(e.spotLight.color||16777190,e.spotLight.intensity||4*t.width,e.spotLight.distance||2*t.width,e.spotLight.angle||Math.PI/5.2,e.spotLight.penumbra,e.spotLight.decay||2);s.position.set(e.spotLight.lightOffsetX||0,e.spotLight.lightOffsetY||t.width,e.spotLight.lightOffsetZ||t.width),s.target=c,s.castShadow=!0,c.add(s),this.spotLights.push(s)}})),this.dispose=()=>{this.spotLights.forEach((e=>{e.dispose()})),this.meshes.forEach((t=>{t.geometry,t.material instanceof Array?t.material.forEach((e=>{e.dispose()})):t.material.dispose(),t.geometry.dispose(),e.container.remove(t)}));for(const e in this.textureSource){this.textureSource[e].dispose()}this.textures.forEach((e=>{e.dispose()}))},this.update=e=>{this.meshes.forEach((t=>{t.rotation.y+=e}))}}}var D=s(6342);class F extends M.T{constructor(e){var t;super(e),(0,a.Z)(this,"type","wall"),(0,a.Z)(this,"textures",{}),this.x+=this.width*Math.cos(this.rotationY)/2,this.y+=this.height/2,this.z-=this.width*Math.sin(this.rotationY)/2;const s=new O.DvJ(this.width,this.height,this.depth);if(e.texture&&(this.textures.baseTex=e.texture.textureLoader.load(e.texture.baseImg),e.texture.normalImg&&(this.textures.normalTex=e.texture.textureLoader.load(e.texture.normalImg)),e.texture.roughImg&&(this.textures.roughTex=e.texture.textureLoader.load(e.texture.roughImg)),e.texture.ambientImg&&(this.textures.ambientTex=e.texture.textureLoader.load(e.texture.ambientImg)),e.texture.repeatX||e.texture.repeatY))for(const t in this.textures){const s=this.textures[t];s.wrapS=O.rpg,s.wrapT=O.rpg,s.repeat.x=e.texture.repeatX||1,s.repeat.y=e.texture.repeatY||1}const i=null!==(t=e.texture)&&void 0!==t&&t.roughImg?new O.Wid({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0,roughnessMap:this.textures.roughTex||void 0,roughness:e.texture.roughness||1}):new O.YBo({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0});this.mesh=new O.Kj0(s,i),this.mesh.position.set(this.x,this.y,this.z),this.mesh.rotation.set(this.rotationX,this.rotationY,this.rotationZ),this.mesh.castShadow=!e.transparent,this.mesh.receiveShadow=!e.transparent,this.mesh.name=this.name||this.type,e.container.add(this.mesh),e.world&&this.setBoxCannonBody(e.world,0,e.cannonMaterial),this.dispose=()=>{for(const e in this.textures){this.textures[e].dispose()}this.mesh.material instanceof Array?this.mesh.material.forEach((e=>{e.dispose()})):this.mesh.material.dispose(),this.mesh.geometry.dispose(),e.container.remove(this.mesh),e.world&&e.world.removeBody(this.cannonBody)}}}var q=s(1018),W=s(7468);const K=e=>{const t=new O.dpR(e.loadingManager),s=(new P.E(e.loadingManager),[]),i=[],n=new Date,o=(0,L.cW)(n),r=new O.Ilk((0,L.gO)(n)),a=new D.U({scene:e.scene,size:2e3});i.push(a);const h=new W.H({container:e.scene,textureLoader:t,width:1e3,depth:1e3,distortionScale:3});i.push(h),X.forEach((s=>{const n=new T.O({container:e.scene,color:6842472,x:s.x,y:s.y,z:s.z,width:s.width,height:s.height,depth:s.depth,texture:{textureLoader:t,baseImg:I.Z,repeatX:s.width/3,repeatY:s.depth/3}});i.push(n),e.controls.floors.push(n.mesh)})),U.forEach((t=>{const s=new T.O({container:e.scene,color:16777215,x:t.x,y:t.y,z:t.z,width:t.width,height:t.height,depth:t.depth,transparent:!0,opacity:.4});i.push(s),e.controls.floors.push(s.mesh)})),e.controls.setPosition(35,15,62);const c=new E({container:e.scene,color:16777215,x:G.x,y:G.y,z:G.z,width:G.width,height:G.height,depth:G.depth,texture:{textureLoader:t,baseImg:k.Z,repeatX:G.width/10,repeatY:G.depth/10}});i.push(c),e.rayControls.rayItems.push(c.mesh),e.controls.obstacles.push(c.mesh);const d=new q.r({container:e.scene,wallsData:H,repeatX:1,repeatY:.8,texture:{textureLoader:t,baseImg:k.Z}});i.push(d),e.rayControls.rayItems.push(d.mesh),e.controls.obstacles.push(d.mesh);const p=new F({container:e.scene,color:16777215,x:Q.x,y:Q.y,z:Q.z,width:Q.width,height:Q.height,depth:Q.depth,rotationY:Q.rotationY,transparent:!0,opacity:.2});i.push(p),e.rayControls.rayItems.push(p.mesh),e.controls.obstacles.push(p.mesh);const l=new Y({container:e.scene,textureLoader:t,postList:e.postList,framesData:$,spotLight:{intensity:3*(1-o)+5}});i.push(l),e.rayControls.rayItems=[...e.rayControls.rayItems,...l.meshes];const u=new O.Pa4,{elevation:g,azimuth:m}=(0,L.F4)(n),x=O.M8C.degToRad(90-g),w=O.M8C.degToRad(3*g),y=O.M8C.degToRad(m-25);u.setFromSphericalCoords(1,x,y),a.setSunPosition(u),h.setSunDirection(u);const f=new O.Mig(16777215,.8*o);e.scene.add(f),s.push(f);const v=new O.Ox3(r,1.8*o);v.position.set(100*Math.sin(y),500*Math.sin(w),100*Math.cos(y)),v.shadow.camera.left=-60,v.shadow.camera.right=60,v.shadow.camera.top=60,v.shadow.camera.bottom=-100,v.castShadow=!0,e.scene.add(v),s.push(v);const b=setInterval((()=>{const e=new Date,{elevation:t,azimuth:s}=(0,L.F4)(e),n=O.M8C.degToRad(90-t),o=O.M8C.degToRad(3*t),r=O.M8C.degToRad(s-25);u.setFromSphericalCoords(1,n,r),a.setSunPosition(u),h.setSunDirection(u);const c=(0,L.cW)(e),d=new O.Ilk((0,L.gO)(e));f.intensity=.8*c,v.color=d,v.intensity=1.8*c,v.position.set(100*Math.sin(r),500*Math.sin(o),100*Math.cos(r)),i.forEach((e=>{e instanceof R.R&&e.spotLight&&(e.spotLight.intensity=3*(1-c)+5)}))}),6e4);const A=new C({container:e.scene,edgesData:ee});i.push(A),e.controls.obstacles.push(A.mesh);return{update:function(){h.update()},dispose:function(){b&&clearInterval(b),s.forEach((t=>{e.scene.remove(t),t.dispose()})),i.forEach((e=>{e.dispose&&e.dispose()}))}}},X=[{x:20.4,y:2,z:6.09,width:30,height:5,depth:50},{x:32.9,y:2,z:56.09,width:5,height:10,depth:10}],U=[{x:50.4,y:2,z:6.09,width:10,height:.5,depth:35.4}],J=.3,H=[{x:20.55,y:2,z:9.17,width:6,height:12,depth:J,rotationY:(0,S.Id)(-90)},{x:20.55,y:2,z:16.18,width:4,height:8,depth:J,rotationY:(0,S.Id)(-90)},{x:20.55,y:11,z:15.17,width:5.01,height:3,depth:J,rotationY:(0,S.Id)(-90)},{x:55.4,y:-1,z:4.69,width:5,height:11,depth:J},{x:31.47,y:2,z:11.14,width:10,height:5,depth:J,rotationY:(0,S.Id)(-25)},{x:41.27,y:2,z:15.71,width:10,height:5,depth:J,rotationY:(0,S.Id)(-25)},{x:31.47,y:7.5,z:11.14,width:10,height:4,depth:J,rotationY:(0,S.Id)(-25)},{x:41.27,y:7.5,z:15.71,width:10,height:4,depth:J,rotationY:(0,S.Id)(-25)},{x:50.25,y:2,z:19.8,width:8,height:9.5,depth:J,rotationY:(0,S.Id)(-90)},{x:32.91,y:2,z:33.19,width:5,height:3,depth:J},{x:32.4,y:2,z:43.88,width:6,height:5.5,depth:J},{x:18.06,y:-1,z:36.15,width:7,height:10,depth:J,rotationY:(0,S.Id)(-90)},{x:62.98,y:-1,z:27.4,width:15.9,height:9,depth:J,rotationY:(0,S.Id)(-90)},{x:54.83,y:-1,z:43.15,width:8,height:9,depth:J},{x:20.4,y:2,z:55.94,width:12.5,height:8,depth:J},{x:37.9,y:2,z:55.94,width:12.5,height:8,depth:J}],Q={x:31.52,y:2,z:11.15,width:20.66,height:9.5,depth:.2,rotationY:(0,S.Id)(-25)},G={x:32.4,y:7.5,z:33.03,width:6,height:.2,depth:11},_=.2,$=[{x:35.4,y:4.5,z:43.98,width:2,height:2,depth:_},{x:18.16,y:5,z:39.64,width:3,height:3,depth:_,rotationY:(0,S.Id)(90)},{x:20.65,y:4,z:18.18,width:1.8,height:1.8,depth:_,rotationY:(0,S.Id)(90)},{x:20.65,y:4.25,z:12.16,width:2.5,height:2.5,depth:_,rotationY:(0,S.Id)(90)},{x:50.15,y:5,z:23.78,width:4,height:4,depth:_,rotationY:(0,S.Id)(-90)},{x:35.4,y:3.6,z:33.29,width:1.5,height:1.5,depth:_},{x:35.4,y:4.5,z:43.78,width:3,height:3,depth:_,rotationY:(0,S.Id)(180)},{x:58.83,y:5,z:43.05,width:3,height:3,depth:_,rotationY:(0,S.Id)(180)},{x:62.88,y:5,z:36.52,width:3,height:3,depth:_,rotationY:(0,S.Id)(-90)},{x:57.9,y:4,z:4.79,width:2,height:2,depth:_}],ee=[{width:.1,height:10,depth:50,x:20.4,y:5,z:31.09},{width:40,height:10,depth:.1,x:40.4,y:5,z:6.09},{width:.1,height:10,depth:35.4,x:60.4,y:5,z:23.79},{width:10,height:10,depth:.1,x:55.4,y:5,z:41.49},{width:.1,height:10,depth:14.6,x:50.4,y:5,z:48.79},{width:.1,height:10,depth:10,x:37.9,y:5,z:61.09},{width:5,height:10,depth:.1,x:35.4,y:5,z:66.1},{width:.1,height:10,depth:10,x:32.9,y:5,z:61.09}],te={srcSet:s.p+"responsive-images/nx-20a6331c60eb2bce-320.png 320w,"+s.p+"responsive-images/nx-17a4a328537513ee-640.png 640w,"+s.p+"responsive-images/nx-1c1643f1278ee4ae-960.png 960w,"+s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png 1024w",images:[{path:s.p+"responsive-images/nx-20a6331c60eb2bce-320.png",width:320,height:320},{path:s.p+"responsive-images/nx-17a4a328537513ee-640.png",width:640,height:640},{path:s.p+"responsive-images/nx-1c1643f1278ee4ae-960.png",width:960,height:960},{path:s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png",toString:function(){return s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABuVBMVEVrj9FIXJNhd6y3u894gqR+h6hGWY7BxNZ5oNxFZri6vtJvk9XFx9rU2erNz99HarwyQXM1RXh6hahYbKFue6Q3SYFSY5hxjsHN0uO8xNrJy9rExdV2mdeuw+lDYrO4zuyzyuyEqeGkvunQ2exghMvE0etpjM9Pc8Ll5/ONpNdlcJZXY41wep5KXI5PYZJqdp1uga9LYZp7kbyEja08T4p0hLF/i7FGX5xRaaWdpcKruNWStubJ1OyeuOSSs+TC0u5wlta5y+qSqtdmic1nktarvuNKbr/i6PiftN+DntVKV4NmeqhWZJM7SntecKJEU4Vda5llc513ibJFW5eIkrKtssqprsWMlrVwhLKWo8Vsh7rGzuK0vNTJzuC/wtahuNqPq9/HzeHR1OOZvepxmdlzm9nf4Ovc3elSecjj4u1fi9NXgs52lMucsNfz9//L2fJcfcXx8vvZ3vBaecKnuuL2+P3c4/VUaZ1BTntcapZAVZCRn8RpgLOjrMicqMh2ibZZdLBifrVSbavN1OiJlrqAk76SosZhgbucrtB7l8d8nc1Se8qgwex+m9Tu7PJ6mNK8yOdhidB0g6sm82HCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABmElEQVR4nCXIVVfbABgA0C9Jm4TG6k09bVMD6l7q3uHDrcCA4i4bzgYTdBx+MYfDfbxgsVgsh9uvjoOd4916SQTKROag40Ntb8t7VGw2nkUoLO/uAMdxHRzndnu9oqtcdkFhJV8Ht7tWO2xWT07qTVfZBVRlpSoA9bi2tudkPPvH+w0RwLSQtQtgNm1siv+9pcZR3myiqIWq3W4GJkvabJUNslCperLLJEnaepbgNuNst632A2dO8BRtuVzP0pMAM/wqz7ZfVtc9GWe+6MgIVqsDaKJF0LSBZVl2cXGO/8YwDgZkMhkmaxFGI03o9XraMMfP8IBhBIa1DEajYTad/jeb3p6f18PY5dXY+NT5eOr3FPbnr06n23ooQeoajcVQNB4L3qUmk79ufk7r7uEtmRgJDaiV8dGJuCqRSKIX02HQnkWj+JBaOjoRUWuRkZAKnQxDVKPRDPYFJJGIcliL4EhIFQyDQqHoH+zq7FZKJYEhP44j33u/glyu6P/S1dktkSrVw30+HNEOBD/yx2dKJYFTv8/nV/W+A2/UUtT2oWGlAAAAAElFTkSuQmCC",width:1024,height:1024},se={srcSet:s.p+"responsive-images/ny-35625e49c2c7ca95-320.png 320w,"+s.p+"responsive-images/ny-bce018cf5cabdff3-640.png 640w,"+s.p+"responsive-images/ny-215a69bae74c3aef-960.png 960w,"+s.p+"responsive-images/ny-c9d4992e3b332582-1024.png 1024w",images:[{path:s.p+"responsive-images/ny-35625e49c2c7ca95-320.png",width:320,height:320},{path:s.p+"responsive-images/ny-bce018cf5cabdff3-640.png",width:640,height:640},{path:s.p+"responsive-images/ny-215a69bae74c3aef-960.png",width:960,height:960},{path:s.p+"responsive-images/ny-c9d4992e3b332582-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/ny-c9d4992e3b332582-1024.png",toString:function(){return s.p+"responsive-images/ny-c9d4992e3b332582-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABGlBMVEU6RW48SHJRW39GUXZveZlueZxca5VWX4L///9dZohNVnpyfJ16hKN9iKdMV35ncZM1QWtjbI5AS3JXYodeaIt2gJ9PYZBccqL5+/9lb5BDTnlJU3lBTHRqdJRtdpdlcpmFkbB2gKFXbJ1SZZacp8O2v9fs8f40QXBMW4p1gqWNmrqXobxfd6l7j7hifLCLnsSirsrL0ebW3O+5x+Pm7PxhcZuDjatoeKFwfJ+KlbKPmbVqdpxwgalnfKtpgrKossuuuNGFoM1rh7re4vOfsta3w992ksOsvd/M1/Dc5PpNWYNWYo5eaZBFUoB5iK18jK9jeKZVZJKTo8aaqcyisdLv8/7FzOGGl7zw9v/S3PKZsNmUrtnB0e68yuf6HmOhAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABX0lEQVR4nD3K5W7CABiF4a/GoEqFKqWlgmspw23AcJswv//bWMqSPX9O8ubAeTQa1Wrjh8fZ1+p78x6Px9UcOIqiVCq1h8fZ52odqlEMwXUdR7nFResjdztuQJZd11Eq42p90QpyqqrmNmsoyLLrKOdxtf6yDMLX13C+/gFZvlxi7c6wWm/4zWA+D5qtFcQi7c7wVPKmy2uzeV2uFjAYWJY16BZPvXJj6vu+P315hmy2SxBEt8jY/bLXmEwmjecnYOgsRRBUimbue/1y2fO8pzrQdIrCMziVirLd65dKpTeIksmZZgbHb3fbtquAZ0yN53le0zTOxFM0wxyPwPGSlPgj8RxOZYvFISTEu3+ixGUIgujAlmVJFkVRlCRJVJQ0zrLaoOs6ZpAkSRoYZqCitN/HYoAgiJDGMAxLC0LaYFFR3O0gnwdAEEEQEAAQdIPdFgqQzyeTSYhEi6T1w6HwC9hINFv5fHpIAAAAAElFTkSuQmCC",width:1024,height:1024},ie={srcSet:s.p+"responsive-images/nz-c22c06273cdcffa8-320.png 320w,"+s.p+"responsive-images/nz-2c122b555d9981da-640.png 640w,"+s.p+"responsive-images/nz-187d46c6aa6af033-960.png 960w,"+s.p+"responsive-images/nz-1395c33711ce10a2-1024.png 1024w",images:[{path:s.p+"responsive-images/nz-c22c06273cdcffa8-320.png",width:320,height:320},{path:s.p+"responsive-images/nz-2c122b555d9981da-640.png",width:640,height:640},{path:s.p+"responsive-images/nz-187d46c6aa6af033-960.png",width:960,height:960},{path:s.p+"responsive-images/nz-1395c33711ce10a2-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/nz-1395c33711ce10a2-1024.png",toString:function(){return s.p+"responsive-images/nz-1395c33711ce10a2-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABLFBMVEUuPWw8Waw8W69BYrYyRHzAw9c0QWwuPnEwPmw5V6owPWlBXq0vP3RKbcBGabyyt80+XrNPcsJGa75KcsW4vM6qv+I7Sn0/XbFte6h3i7ZTeci1uc+Qo8Zhh8+ElLqZtuFynNq2xuQ3VKg1Q3IwQnlDZbk0SII8T4lJW5BkdqVWa6O/w9JMYZvEyNm8v9HJzt/DxdWLp9u8yeM4Rnc/YLVBUIE8UItAU448UpHU1+ZYgc3f3+lVcq5mj9O6yunM1OXExtqirsugtd/U2uxIV4hCU4lYZpabpsNwi7xecKSjqsPc4/KUp8qFq+B+pd2txulOZ6THydptjs9zj8B8nNecq8uVq9qwxOSiu+B2hKxqg7ZvgrE1SohAV5nIydeUst94mtXI0OW4x+GHmL1dQ6jgAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaElEQVR4nCXKV3aCUBRA0UvRBwhPERBQQFDBXmPs3ajpibGmt/nPIUuyP886ILhNkk2lUiwRCoVCBMsSpAqigJsEm2L9SBAEqVIUmKLgRkjiNKgkqUYoF0dhZMYFTEVUNUJRVNN1sSBI0J09xaUoxqKIMcaCKMbNLSizrdnrSU/zfVSSpHivN6wrcHd/dz8cftXr5mxWd/a2bdsKPDzc3Iw+5/Ok3XAOI6eRTCYV6Pe73f54XG0oR0c5Hn6cxvcYqtV1ufZRDtRqAd9ksp5AuRwoViqyLIdPEgm5EqjAulYsFsNy+NowprfGbrqbhmW4NRKJlb661geWpf9a1uVmY8Dli/5aKOU1raTlr7SrwuNgYIGeL5Q6rVZumVu0su12p/P+qMFzIZf1aDp2HqPpDE173lu7BPlc1svwCKXTCCGe5zO0l4XlInbGIwAGfAjxGRouzmNnaYbjOI458fN/DAY5jgv6GIZBfyl3NQ6I24g7AAAAAElFTkSuQmCC",width:1024,height:1024},ne={srcSet:s.p+"responsive-images/px-bae1c81a4f92e0f5-320.png 320w,"+s.p+"responsive-images/px-859de15a93ebb92e-640.png 640w,"+s.p+"responsive-images/px-0a24c6c92ac21dda-960.png 960w,"+s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png 1024w",images:[{path:s.p+"responsive-images/px-bae1c81a4f92e0f5-320.png",width:320,height:320},{path:s.p+"responsive-images/px-859de15a93ebb92e-640.png",width:640,height:640},{path:s.p+"responsive-images/px-0a24c6c92ac21dda-960.png",width:960,height:960},{path:s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png",toString:function(){return s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABklBMVEX////a5vv2/P/R4Pj9///F5//t9//5/v/y+//H2PRebZvz+P+22P+u0PuFmsKavu7s8vyoxe7Izt+73v/P7v9SYZHW9P/C5P/a9/9nfK3I6P9xh7VqhLmkvujO4fqRsuKewvLj7f2swOWlwurB1fCFruXP1uZhhs6nzvtkd6S6ze6IrNx0lcp+nc95k8Pu/f+Yst1ecJ9+odRoeqhxgavn9f+nyfbK2vXP3PaLl7nV4fmUueqWosPZ6v+KmsC/3f93oN5dgcqft+KmtdLT2urm6fW/x9zo7frZ3+6wyO7O2/KIn8mv1f+Hptd2jry3y+5YaJbA4f/f9P/U7f9ogbJ7jLTe8/+YuOOPqNLb8P94hayhxvSPteqNo8ydsNSaqsy2xuHF1vKap8bB0u2xu9Zki9Fqk9RXecdumNmAp+Gxwdrg4u7Dy9x1l9b6+/6Ak7uBmcWXrNOyzPFMW4rL7P9ui8BVZJTk+/9ujcNfcqJujsSfrs6QmrpQccGrvtzT09660fPr6PC9zuu0zvKozPjF0udu90VaAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVR4nB3K1VYCARRA0TtdMEENLR0qAhICIt3YqNiFLWJ364+7xvO41wGj0WDQydrpgDrp2CwcHRaLx+9gNBp0OkI7HdhwCN7CyaHfXzwGCg0v3hFaVcAhbJ4WTi6O/P4LoCmUNhALKnVSmPQ2baelkqsOCZIiO2ZZq1JvCJNfQnMwgCqEFztm2Swrq0OSGDHT+nFB+HFlTUcQcl6ltov1VNM95PUCReE4naBXzPn8FPIrtVpuZg8AcBwHik6sTTmdEx5Pr/F9Dko4TqEoyonV80bF59NoAP8nmhPFerVR8Wn6mn5NIZrjSCfG9Cq+3Y+zs9pnH0iSExE74nF3I7u17dVyeeugDB07xtxIUndkPLR98Lqzs8/neLBP7M25u0Mj46MvYzyfy+5nsznAUsywTbEnq9VqsSyn029pyGAKzoRG761LJlMsFo+vrwOCMXO2yExobNayZAo+R6MsywKSYYZdkdX21eWsxRSMsvMPej04kVTPVbreavOXy/FYkJ3X62//AF+qSZB1yMYyAAAAAElFTkSuQmCC",width:1024,height:1024},oe={srcSet:s.p+"responsive-images/py-4f1502ffdb432f32-320.png 320w,"+s.p+"responsive-images/py-5cb42a7b2b045c5e-640.png 640w,"+s.p+"responsive-images/py-c0c9c3bdbc23284e-960.png 960w,"+s.p+"responsive-images/py-536e612a4e05107f-1024.png 1024w",images:[{path:s.p+"responsive-images/py-4f1502ffdb432f32-320.png",width:320,height:320},{path:s.p+"responsive-images/py-5cb42a7b2b045c5e-640.png",width:640,height:640},{path:s.p+"responsive-images/py-c0c9c3bdbc23284e-960.png",width:960,height:960},{path:s.p+"responsive-images/py-536e612a4e05107f-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/py-536e612a4e05107f-1024.png",toString:function(){return s.p+"responsive-images/py-536e612a4e05107f-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABHVBMVEX////p7vrV3O9uktL8///1+f76/P/+//85Vafe+v+q0Pz4+/8+WqpFYK/J1O3d4vOBqeK94P+Rtei83f90mNU9Wa1CYLI8V6o0UaVnisxie7zz9v3i5/Z/lMmlt95KZrDu///a9f9+o93m/v+dwvLR7/+SuexIaruKq+BAXq7h7fzc5PbU5fudrNWzvd/Q1+uFmMt4jcXEzuiIsOd6oNx4nNmgyPf2///M7P9NccC42f78/f5Qa7Tw8/xqgr7O2vG/1PPm6/rU4fWWrdpce765xeKXv/Hm9f+x1f59ndZbgcqEotmzw+axz/dRd8Rxj8vt8PpVcri9yufW8/+nzPpDZLjF5f+mxu/b7f+qvuSoxO6Yst6Oo9RyisR4ls0REqdiAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABY0lEQVR4nCXK51biUABF4ZPkpt4USAKkR3ongFKkVxW7TrFMef/HmBVn//zWRjNXkNJUVZUkx5Fy+R91fKGjLQ6eWnCc5mqRr18inysUJC3s9qJYVb1uL6ynqGla3GV7zHAhDZZsoj9dPsLL57w+a4Tzo9ZcGayx3D/eIhn2X3rL4SBaxfGfLaV0bXPgBXbwGsThceC9hM/+sy+0TAT67z3LdPuJkTwdooA1KP8Jhur322M/ETF03cgPArFTA+ZtndEPBnZ/9w3G3zKUdEAEtH094rF+Fds7nicgHQhgPta/tqCbHeY8QN9nCtA+ufbdprV56FBeFMFbNwruTy53aphvD7NWi4IQallZ3LqcXWrUKopVvQaIIFz/zILj7FHGrIxvslOZACIm1Sk4e1RqmJXvs2lVngAAKRcxuihlzmsVJVssymcpimcyUjOvxv+RfJ0yLjKZ89rVWLGq34rlVCdl+R9XUTDbHdeBoAAAAABJRU5ErkJggg==",width:1024,height:1024},re={srcSet:s.p+"responsive-images/pz-216cb017c0e94d9d-320.png 320w,"+s.p+"responsive-images/pz-9ed7df739785641c-640.png 640w,"+s.p+"responsive-images/pz-9d728e683939bdf8-960.png 960w,"+s.p+"responsive-images/pz-2cda9314f34a285e-1024.png 1024w",images:[{path:s.p+"responsive-images/pz-216cb017c0e94d9d-320.png",width:320,height:320},{path:s.p+"responsive-images/pz-9ed7df739785641c-640.png",width:640,height:640},{path:s.p+"responsive-images/pz-9d728e683939bdf8-960.png",width:960,height:960},{path:s.p+"responsive-images/pz-2cda9314f34a285e-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/pz-2cda9314f34a285e-1024.png",toString:function(){return s.p+"responsive-images/pz-2cda9314f34a285e-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABQVBMVEX////5///1/P/d+v/y+P/a+P/v///+///8///3///f6//M7f/i7v/S4vuNrdzZ6v/o8P7d7//y///l/f/o/v/f+f/o9v9yk8mx1v/i8f+mxvDs8v3W9P/c6f7F5/9qisLs+v+2zfBlgri/3f+buOSittu/2vzF1/XN2/Po7fnK3vjy/f/U8v+63v+hvOSfyPjP4v7A4f+Dn85yhbDF2vnL5v95ms6DlbuNoMWFmsGXwPOuvNmWpsbH4P631fupwuery/Xa4vLa5vqPue6xye+/1PLv9f+o0P1+oNO22//V5/+Trdfi+/9vibppgbGly/t7jrff9f9+lsOWqc6ouNjN1OWNptCDpNams9Hd8v/g4u2Ts+Hi6PXF1u29zejP6P/k6POevuyZvOqEsOmCpdfZ3Omksc61xeKHpdTC2POqvuHjs08HAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABbUlEQVR4nC3K11bCUBQE0JPKuSGdECCIBOlFpBfpCNiwoIKCHSv//wOusJy32TMwVq2Po8OD49OiO8d5eKIbUy8M6eAW/fu77hzjMaZTZgcGKmaODg+utsgxXobjspAKsij2r/ynxV13bodzjIJRRkVa7fidp017GS8BGkbvlqR0o9Fi1Z3LouEhSAisLavf7UZfWZzNkPAGz+s6JMeVYSHRedXM6czgdZ1yAcJbehgSFE1Z2nyWoAu2Wb09pYMTlqX++zZfq8HgKZ0OsgQRAFzgjPP5y3PqebPJaFqApSmkEBHu4vGfXizfG0uJhBJYmjZNbCiVFvG4LD++pPoRQaxWNdPUoNm4bbXOf+9jvbUliZ3omRlQoNl+aN0tarV7+fE9WagkCmIgBM3298Ptjc9X+5RjkUqmcKYIIag32o2bi3DYdyLHRklJEEUhBNf1+vXF3p6D+UhKmLATVYByuXx56WDpPB+RVBqRVf8A5i46Iamne3cAAAAASUVORK5CYII=",width:1024,height:1024},ae=s.p+"images/greenaryeac3b060f7439b9f16f1.glb";var he=s(5804),ce=s(5980),de=s(8231);function pe(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}const le=new O.Pa4(0,-1,0);var ue=new WeakMap,ge=new WeakMap,me=new WeakMap,xe=new WeakMap,we=new WeakMap,ye=new WeakMap,fe=new WeakMap;class ve{constructor(e){(0,a.Z)(this,"type","trees"),(0,a.Z)(this,"floors",[]),(0,a.Z)(this,"obstacles",[]),pe(this,ue,{writable:!0,value:new O.iMs}),pe(this,ge,{writable:!0,value:new O.Pa4}),pe(this,me,{writable:!0,value:1}),pe(this,xe,{writable:!0,value:3}),pe(this,we,{writable:!0,value:!0}),(0,a.Z)(this,"pausingPeriod",5),(0,a.Z)(this,"pausingTime",0),pe(this,ye,{writable:!0,value:!1}),(0,a.Z)(this,"walkingPeriod",7),(0,a.Z)(this,"walkingTime",0),pe(this,fe,{writable:!0,value:!1}),(0,a.Z)(this,"rotatingPeriod",.5),(0,a.Z)(this,"rotatingTime",0),e.species.object.position.set(e.x,e.y,e.z),e.container.add(e.species.object),this.species=e.species,this.mixer=e.species.mixer,this.species.idle.play(),this.dispose=()=>{e.container.remove(this.species.object)}}pause(){(0,ce.Z)(this,we,!0),this.pausingTime=0,this.pausingPeriod=(0,de.s)(3,7),(0,ce.Z)(this,ye,!1),(0,ce.Z)(this,fe,!1),this.species.walk.stop(),this.species.idle.play()}walk(){(0,ce.Z)(this,ye,!0),this.walkingTime=0,this.walkingPeriod=(0,de.s)(8,12),(0,ce.Z)(this,we,!1),(0,ce.Z)(this,fe,!1),this.species.idle.stop(),this.species.walk.play()}turn(){(0,ce.Z)(this,fe,!0),this.rotatingTime=0,this.rotatingPeriod=(0,de.s)(.2,.5),(0,ce.Z)(this,we,!1),(0,ce.Z)(this,ye,!1),this.species.walk.stop(),this.species.idle.play()}update(e){this.mixer.update(e),(0,he.Z)(this,ue).set(this.species.object.position,le);const t=(0,he.Z)(this,ue).intersectObjects(this.floors);if(t.length>0){const e=t[0].distance;this.species.object.position.y+=.05-e}if((0,he.Z)(this,we))return this.pausingTime+=e,void(this.pausingTime>this.pausingPeriod&&this.walk());if((0,he.Z)(this,fe)){this.rotatingTime+=e;const t=e*(0,he.Z)(this,xe);return this.species.object.rotateY(t),void(this.rotatingTime>this.rotatingPeriod&&this.walk())}if((0,he.Z)(this,ye)){if(this.walkingTime+=e,this.walkingTime>this.walkingPeriod)return void((0,de.s)(0,1)<.5?this.pause():this.turn());if(this.species.object.position.y<0)return void this.turn();this.species.object.getWorldDirection((0,he.Z)(this,ge)),(0,he.Z)(this,ue).set(this.species.object.position,(0,he.Z)(this,ge));const t=(0,he.Z)(this,ue).intersectObjects(this.obstacles);if(t.length>0&&t[0].distance<.2)return void this.turn();const s=(0,he.Z)(this,me)*e;this.species.object.translateZ(s)}}}const be=s.p+"images/fox8ba02fb1d20b25a031f1.glb";class Ae{constructor(e){if((0,a.Z)(this,"type","fox"),!e)throw new Error("Cannot be called directly. Uses static 'build' method");this.object=e.object,this.mixer=e.mixer,this.walk=e.walk,this.idle=e.idle}static async build(e){const t=await new Promise(((t,s)=>{e.load(be,(e=>t(e)),void 0,s)})),s=t.scene.children[0];s.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0}));const i=new O.Xcj(s);i.timeScale=1/3;const n=i.clipAction(t.animations[8]),o=i.clipAction(t.animations[17]);return new Ae({object:s,mixer:i,walk:o,idle:n})}}const je=s.p+"images/trees57d0b9224e26b78a935d.glb";class Ze{constructor(e){(0,a.Z)(this,"type","trees"),(0,a.Z)(this,"objects",[]),(0,a.Z)(this,"cannonBodies",[]),e.gltfLoader.load(je,(t=>{e.treesData.forEach((s=>{const i=new O.Tme;if(i.copy(t.scene.children[s.type]),i.name=this.type,i.children[0].castShadow=!0,i.children[0].receiveShadow=!0,i.scale.multiplyScalar(.01*(s.scale||1)),i.position.set(s.x,s.y,s.z),i.rotation.set((0,S.Id)(-90),0,s.rotation||0),this.objects.push(i),e.container.add(i),e.onLoad&&e.onLoad(i),e.world){const t=(new O.ZzF).setFromObject(i),{x:n,y:o,z:r}=t.getSize(new O.Pa4),a=new B.uT({mass:0,position:new B.AO(s.x,s.y+o/2,s.z),shape:new B.Ab(n/6,n/6,o)});this.cannonBodies.push(a),e.world.addBody(a)}}))})),this.dispose=()=>{e.world&&this.cannonBodies.forEach((t=>{e.world.removeBody(t)})),this.objects.forEach((t=>{e.container.remove(t)}))}}}const ze=e=>{const t=new O.dpR(e.loadingManager),s=new O.cBK(e.loadingManager),i=new P.E(e.loadingManager);e.scene.background=s.load([ne,te,oe,se,re,ie]);const n=[],o=new O.Mig("white",.8);e.scene.add(o),n.push(o);const r=new O.Ox3("white",1.8);r.position.set(0,110,110),r.shadow.camera.left=-60,r.shadow.camera.right=60,r.shadow.camera.top=60,r.shadow.camera.bottom=-100,r.castShadow=!0,e.scene.add(r),n.push(r);const a=[],h=Ae.build(i).then((t=>{const s=new ve({species:t,container:e.scene,x:70,y:5,z:59});return a.push(s),s}));i.load(ae,(t=>{const s=t.scene.children[0];s.receiveShadow=!0;const i=(new O.ZzF).setFromObject(s),{x:n,y:o,z:c}=i.getSize(new O.Pa4);s.position.x+=n/2,s.position.z+=c/2,e.scene.add(s),e.controls.floors.push(s),e.rayControls.rayItems.push(s),e.controls.setPosition(25.1,5,25.1),e.controls.setQuaternion(0,(0,S.Id)(-135),0),r.target=s,h.then((e=>{e.floors.push(s)})),a.push({dispose:()=>{e.scene.remove(s)}})}));const c=new O.DvJ(1e3,5,1e3),d=new O.YBo({color:36081,side:O.ehD,opacity:.8,transparent:!0}),p=new O.Kj0(c,d);p.position.set(55,-3.8,55),e.scene.add(p),e.rayControls.rayItems.push(p),a.push({dispose:()=>{c.dispose(),d.dispose(),e.scene.remove(p)}});const l=new C({container:e.scene,edgesData:Le});a.push(l),e.controls.obstacles.push(l.mesh);const u=new O.fHI(17,17,5),g=new O.YBo({color:775167,side:O.ehD,opacity:.7,transparent:!0}),m=new O.Kj0(u,g);m.position.set(45,-3,43),e.scene.add(m),e.rayControls.rayItems.push(m),a.push({dispose:()=>{u.dispose(),g.dispose(),e.scene.remove(m)}});const x=new Ze({container:e.scene,gltfLoader:i,treesData:Ie,onLoad:t=>{e.rayControls.rayItems.push(t),e.controls.obstacles.push(t),h.then((e=>{e.obstacles.push(t)}))}});a.push(x);const w=new Y({container:e.scene,textureLoader:t,postList:e.postList,framesData:ke});a.push(w),w.meshes.forEach((t=>{e.rayControls.rayItems.push(t)}));return{update:function(e){a.forEach((t=>{t.update&&t.update(e)}))},dispose:function(){n.forEach((t=>{e.scene.remove(t),t.dispose()})),a.forEach((e=>{e.dispose&&e.dispose()}))}}},Oe=2,Pe=2,Se=.05,ke=[{x:40,y:1,z:39,width:Oe,height:Pe,depth:Se},{x:63,y:4,z:53,width:Oe,height:Pe,depth:Se},{x:75,y:3,z:27,width:Oe,height:Pe,depth:Se},{x:100,y:1.7,z:40,width:Oe,height:Pe,depth:Se},{x:28,y:4,z:66,width:Oe,height:Pe,depth:Se},{x:64,y:14.6,z:78,width:Oe,height:Pe,depth:Se},{x:83,y:10,z:80,width:Oe,height:Pe,depth:Se},{x:37,y:2.4,z:93,width:Oe,height:Pe,depth:Se},{x:104,y:-2.6,z:104,width:Oe,height:Pe,depth:Se},{x:17,y:1.5,z:28,width:Oe,height:Pe,depth:Se}],Ie=[{type:0,x:61,y:0,z:19,scale:1.5},{type:0,x:68,y:0,z:17,scale:2},{type:0,x:76,y:0,z:17,scale:1.7},{type:0,x:59,y:.5,z:24,scale:1.8},{type:0,x:66,y:.5,z:23,scale:2},{type:0,x:72,y:.5,z:21,scale:2.1},{type:0,x:80,y:0,z:22,scale:1.9},{type:0,x:63,y:1,z:27,scale:1.75},{type:0,x:81,y:.5,z:26,scale:1.95},{type:0,x:64,y:1.3,z:33,scale:1.75},{type:0,x:70,y:1.3,z:31,scale:1.8},{type:0,x:75,y:1.3,z:32,scale:1.82},{type:0,x:80,y:1.3,z:31,scale:2},{type:6,x:81,y:10,z:73,scale:2},{type:17,x:82,y:6.7,z:65,scale:1.8},{type:14,x:76,y:6.7,z:82,scale:1.7},{type:7,x:59,y:8,z:72,scale:1.9},{type:26,x:51,y:8,z:80,scale:1.6},{type:23,x:65,y:6,z:89,scale:1.4},{type:28,x:91,y:0,z:28,scale:2},{type:28,x:96,y:0,z:37,scale:1.8},{type:28,x:98,y:0,z:45,scale:1.9},{type:28,x:96,y:0,z:53,scale:2},{type:28,x:97,y:0,z:61,scale:1.85},{type:28,x:38,y:0,z:88,scale:1.85},{type:18,x:30,y:1.5,z:28,scale:2.1},{type:2,x:40,y:.3,z:25,scale:1.7},{type:2,x:47,y:0,z:24,scale:1.8},{type:1,x:23,y:.5,z:43,scale:1.8},{type:1,x:24,y:.5,z:51,scale:1.9},{type:1,x:28,y:.5,z:48,scale:1.85},{type:24,x:63.2,y:0,z:43.3,scale:1.8},{type:19,x:70,y:0,z:45,scale:1.7},{type:24,x:31,y:1,z:60,scale:1.85}],Le=[{width:120,height:100,depth:1,x:55,y:0,z:1},{width:120,height:100,depth:1,x:55,y:0,z:109},{width:1,height:100,depth:120,x:1,y:0,z:55},{width:1,height:100,depth:120,x:109,y:0,z:55}];var Me=s(4530);const Ee=e=>{let{control:t,shoot:s,jump:n}=e;const o=(0,i.useRef)(null),r=(0,i.useRef)(null),a=(0,i.useRef)(null),h=(0,i.useRef)(null),d=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{const e=o.current,i=r.current,c=a.current,p=h.current,l={x:0,y:0,radius:0},u={top:0,bottom:0,left:0,right:0},g={top:0,bottom:0,left:0,right:0},m=function(){let t=e.getBoundingClientRect();l.x=t.x+e.offsetWidth/2,l.y=t.y+e.offsetHeight/2,l.radius=e.offsetWidth/2,t=c.getBoundingClientRect(),u.top=t.y,u.bottom=t.y+c.offsetHeight,u.left=t.x,u.right=t.x+c.offsetWidth,t=p.getBoundingClientRect(),g.top=t.y,g.bottom=t.y+p.offsetHeight,g.left=t.x,g.right=t.x+p.offsetWidth},x=function(){d.current=!0},w=function(e){const o=e.changedTouches[e.changedTouches.length-1];o.clientX>u.left&&o.clientX<u.right&&o.clientY>u.top&&o.clientY<u.bottom?s&&s():o.clientX>g.left&&o.clientX<g.right&&o.clientY>g.top&&o.clientY<g.bottom?n&&n():(d.current=!1,i.style.transform="\n        translate(".concat(0,"px, ",0,"px)\n        "),t&&t(0,0))};m(),window.addEventListener("resize",m);const y=(0,Me.Z)((function(e){if(!d.current)return;const s=e.changedTouches[e.changedTouches.length-1];if(s.clientX>u.left&&s.clientX<u.right&&s.clientY>u.top&&s.clientY<u.bottom)return;if(s.clientX>g.left&&s.clientX<g.right&&s.clientY>g.top&&s.clientY<g.bottom)return;let n=s.clientX-l.x,o=s.clientY-l.y;const r=(n**2+o**2)**.5;r>l.radius&&(n/=r/l.radius,o/=r/l.radius),i.style.transform="\n      translate(".concat(.9*n,"px, ").concat(.9*o,"px)\n      "),t&&t(n/l.radius,o/l.radius)}));return e.addEventListener("touchstart",x),i.addEventListener("touchstart",x),document.addEventListener("touchmove",y),document.addEventListener("touchend",w),()=>{window.removeEventListener("resize",m),e.removeEventListener("touchstart",x),i.removeEventListener("touchstart",x),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",w)}}),[]),(0,c.jsxs)("div",{className:"joystick",children:[(0,c.jsx)("div",{className:"joystick__controller",ref:o,children:(0,c.jsx)("div",{className:"joystick__controller--core",ref:r})}),(0,c.jsxs)("div",{className:"joystick__buttons",children:[(0,c.jsx)("div",{className:"joystick__shoot",onMouseUp:s,ref:a,children:(0,c.jsx)(u,{})}),(0,c.jsx)("div",{className:"joystick__jump",onMouseUp:n,ref:h,children:(0,c.jsx)(w,{})})]})]})};var Be=s(2233),Ne=s(351),Ce=s(7308);const Te=e=>{let{music:t}=e;return(0,c.jsxs)("section",{className:"music-player",children:[(0,c.jsx)("img",{className:"music-player__cover",src:t.coverURL}),(0,c.jsx)(Ce.Z,{videoId:t.videoId,id:"youtube",opts:{height:"1",width:"1",playerVars:{autoplay:1}}}),(0,c.jsx)("div",{className:"music-player__info",children:(0,c.jsx)("p",{children:(t.title+" - "+t.artist+"          ").repeat(5)})})]})},Re=e=>{let{post:t}=e;return(0,c.jsxs)("section",{className:"post",children:[(0,c.jsx)("img",{className:"post__image",src:t.imageURL}),(0,c.jsxs)("div",{className:"post__description",children:[t.music&&(0,c.jsx)(Te,{music:t.music}),(0,c.jsx)("h1",{children:t.title}),(0,c.jsx)("p",{children:t.content})]})]})};var Ve=s(9451),Ye=s(5945),De=s(4469),Fe=s(9093),qe=s(2731);function We(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Ke(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?We(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):We(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const Xe={regex:/[\s\S]{1,100}/,condition:"공백 포함 100자로 입력해주세요"},Ue={regex:/^[1-9]\d*$/,condition:"게시물 식별자(숫자)가 올바르지 않습니다"};var Je=s(8891),He=s(6738),Qe=s(4813),Ge=s(950);const _e=e=>{let{postId:t,user:s,onSuccess:n,onError:o}=e;const{mutateAsync:r}=function(e,t){const s=(0,Ye.NL)();return(0,De.D)((e=>Fe.Z.post("/post/comment",e)),Ke({onSuccess:t=>{s.invalidateQueries(["comment-list",{postId:e}]),qe.Z.addToast("success",t.message)},onError:e=>{qe.Z.addToast("error",e.message)}},t))}(t),[a,h]=(0,i.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Je.Z,{className:"comment-form",onSubmit:e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget,s=function(e){const t=e.get("content");if(!Xe.regex.test(t))return{result:!1,reason:Xe.condition};const s=e.get("postId");return Ue.regex.test(s)?{result:!0,data:{content:t,postId:parseInt(s)}}:{result:!1,reason:Ue.condition}}(new FormData(t));s.result?r(s.data).then((()=>{t.reset(),n&&n()})).catch((()=>{o&&o()})):qe.Z.addToast("error",s.reason)},children:[(0,c.jsx)("input",{type:"hidden",name:"postId",value:t}),s?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(He.Z,{label:"감상문",name:"content",initialValue:""}),(0,c.jsx)(Qe.Z,{type:"submit",text:"생성"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(He.Z,{readOnly:!0,label:"감상문을 작성하세요",name:"content",initialValue:""}),(0,c.jsx)(Qe.Z,{type:"button",text:"로그인",onClick:()=>h(!0)})]})]}),(0,c.jsx)(Ne.Z,{isOpen:a,onClose:()=>h(!1),children:(0,c.jsx)(Ge.Z,{})})]})},$e=["styles"];function et(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function tt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?et(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):et(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const st=e=>{let{styles:t={}}=e,s=(0,h.Z)(e,$e);return(0,c.jsx)("svg",tt(tt({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s),{},{children:(0,c.jsx)("path",{fill:"currentColor",d:"M6 7H5v13a2 2 0 002 2h10a2 2 0 002-2V7zm4 12H8v-9h2zm6 0h-2v-9h2zm.618-15L15 2H9L7.382 4H3v2h18V4z"})}))},it=e=>{let{postId:t,comment:s,user:n}=e;const[o,r]=(0,i.useState)(!1),{mutateAsync:a}=function(e,t,s){const i=(0,Ye.NL)();return(0,De.D)((()=>Fe.Z.delete("/post/comment/".concat(t))),Ke({onSuccess:t=>{i.invalidateQueries(["comment-list",{postId:e}]),qe.Z.addToast("success",t.message)},onError:e=>{qe.Z.addToast("error",e.message)}},s))}(t,s.commentId);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"comment-item",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:s.nickname}),"  ",s.content]}),(0,c.jsx)("p",{children:new Date(s.createdDate).toLocaleDateString()}),n&&s.nickname===n.nickname&&(0,c.jsx)("button",{type:"button",onClick:()=>{r(!0)},"aria-label":"댓글 삭제",children:(0,c.jsx)(st,{})})]}),(0,c.jsx)(Ne.Z,{isOpen:o,onClose:()=>r(!1),children:(0,c.jsxs)("div",{className:"comment-item__delete",children:[(0,c.jsx)("p",{children:"댓글을 삭제하시겠습니까?"}),(0,c.jsx)(Qe.Z,{text:"삭제",direction:"right",onClick:()=>{a().then((()=>{r(!1)}))}})]})})]})};var nt=s(966),ot=s(899);const rt=e=>{let{postId:t}=e;const{data:s,isLoading:n,isError:o}=function(e,t){return(0,Ve.a)(["comment-list",{postId:e}],(()=>Fe.Z.get("/post/comment/list/".concat(e))),Ke({onSuccess:()=>{},onError:e=>{qe.Z.addToast("error",e.message)},select:e=>e.data},t))}(t),{data:r,refetch:a}=(0,nt.bT)({enabled:!1}),h=(0,ot.r)((e=>e.isLogin()));return(0,i.useEffect)((()=>{h&&a()}),[h]),o?null:n?(0,c.jsx)(Be.Z,{}):(0,c.jsxs)("section",{className:"comment-list",children:[s.length?(0,c.jsx)("ol",{className:"comment-list__list",children:s.map((e=>(0,c.jsx)("li",{children:(0,c.jsx)(it,{postId:t,comment:e,user:r})},e.commentId)))}):(0,c.jsx)("div",{className:"comment-list__empty",children:"댓글이 없습니다"}),(0,c.jsx)(_e,{postId:t,user:r})]})},at=e=>{let{post:t}=e;return(0,c.jsxs)("article",{className:"post-detail",children:[(0,c.jsx)(Re,{post:t}),(0,c.jsx)(rt,{postId:t.postId})]})};var ht=s(7103);function ct(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}const dt=new O.Pa4(0,-1,0);var pt=new WeakMap,lt=new WeakMap,ut=new WeakMap,gt=new WeakMap,mt=new WeakMap,xt=new WeakMap,wt=new WeakMap,yt=new WeakMap,ft=new WeakMap,vt=new WeakMap,bt=new WeakMap,At=new WeakMap,jt=new WeakMap;class Zt{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.6,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:7;ct(this,pt,{writable:!0,value:new O.iMs}),ct(this,lt,{writable:!0,value:1}),ct(this,ut,{writable:!0,value:0}),ct(this,gt,{writable:!0,value:0}),ct(this,mt,{writable:!0,value:1}),ct(this,xt,{writable:!0,value:0}),ct(this,wt,{writable:!0,value:0}),ct(this,yt,{writable:!0,value:new O.Pa4}),ct(this,ft,{writable:!0,value:new O.$V}),ct(this,vt,{writable:!0,value:new O.Pa4}),ct(this,bt,{writable:!0,value:0}),ct(this,At,{writable:!0,value:!1}),ct(this,jt,{writable:!0,value:0}),(0,a.Z)(this,"enabled",!0),(0,a.Z)(this,"obstacles",[]),(0,a.Z)(this,"floors",[]),this.canvas=e,this.camera=t,this.height=s,this.gravity=i,this.jumpForce=n,this.maxFallSpeed=o;const r=this.onKeyDown.bind(this),h=this.onKeyUp.bind(this);window.addEventListener("keydown",r),window.addEventListener("keyup",h),this.setOrientation(),this.dispose=()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",h)}}onKeyDown(e){if(this.enabled)switch(e.code){case"ArrowUp":case"KeyW":e.preventDefault(),(0,ce.Z)(this,ut,1),(0,ce.Z)(this,gt,0);break;case"ArrowDown":case"KeyS":e.preventDefault(),(0,ce.Z)(this,ut,0),(0,ce.Z)(this,gt,1);break;case"ArrowRight":case"KeyD":e.preventDefault(),(0,ce.Z)(this,wt,0),(0,ce.Z)(this,xt,1);break;case"ArrowLeft":case"KeyA":e.preventDefault(),(0,ce.Z)(this,wt,1),(0,ce.Z)(this,xt,0);break;case"AltLeft":e.preventDefault(),0===(0,he.Z)(this,jt)&&(0,ce.Z)(this,At,!0)}}onKeyUp(e){switch(e.code){case"ArrowUp":case"KeyW":(0,ce.Z)(this,ut,0);break;case"ArrowDown":case"KeyS":(0,ce.Z)(this,gt,0);break;case"ArrowRight":case"KeyD":(0,ce.Z)(this,xt,0);break;case"ArrowLeft":case"KeyA":(0,ce.Z)(this,wt,0)}}set movementSpeed(e){e>0?(0,ce.Z)(this,lt,e):(0,ce.Z)(this,lt,1.6)}set movementSpeedRatio(e){e>1?((0,ce.Z)(this,ut,1),(0,ce.Z)(this,gt,0)):e>0?((0,ce.Z)(this,ut,e),(0,ce.Z)(this,gt,0)):e<-1?((0,ce.Z)(this,ut,0),(0,ce.Z)(this,gt,1)):((0,ce.Z)(this,ut,0),(0,ce.Z)(this,gt,-e))}set lookSpeed(e){e>0?(0,ce.Z)(this,mt,e):(0,ce.Z)(this,mt,1.5)}set lookSpeedRatio(e){e>1?((0,ce.Z)(this,xt,1),(0,ce.Z)(this,wt,0)):e>0?((0,ce.Z)(this,xt,e),(0,ce.Z)(this,wt,0)):e<-1?((0,ce.Z)(this,xt,0),(0,ce.Z)(this,wt,1)):((0,ce.Z)(this,xt,0),(0,ce.Z)(this,wt,-e))}jump(){0===(0,he.Z)(this,jt)&&(0,ce.Z)(this,At,!0)}setOrientation(){const e=this.camera.quaternion;(0,he.Z)(this,yt).set(0,0,-1).applyQuaternion(e),(0,he.Z)(this,ft).setFromVector3((0,he.Z)(this,yt)),(0,ce.Z)(this,bt,O.M8C.radToDeg((0,he.Z)(this,ft).theta)),(0,ce.Z)(this,At,!1),(0,ce.Z)(this,jt,0)}setPosition(e,t,s){this.camera.position.set(e,t,s),this.setOrientation()}setQuaternion(e,t,s){this.camera.rotation.set(e,t,s),this.setOrientation()}update(e){if(!this.enabled)return;const t=e*(0,he.Z)(this,mt)*((0,he.Z)(this,wt)-(0,he.Z)(this,xt))*.6;this.camera.rotateY(t);let s,i=e*(0,he.Z)(this,lt)*((0,he.Z)(this,ut)-(0,he.Z)(this,gt))*5;this.camera.getWorldDirection((0,he.Z)(this,yt)),i>0?((0,he.Z)(this,pt).set(this.camera.position,(0,he.Z)(this,yt)),s=(0,he.Z)(this,pt).intersectObjects(this.obstacles),s.length&&s[0].distance<1&&(i=0)):((0,he.Z)(this,pt).set(this.camera.position,(0,he.Z)(this,yt).negate()),s=(0,he.Z)(this,pt).intersectObjects(this.obstacles),s.length&&s[0].distance<1&&(i=0)),this.camera.translateZ(-i),(0,he.Z)(this,pt).set(this.camera.position,dt),s=(0,he.Z)(this,pt).intersectObjects(this.floors);let n=this.gravity*(0,he.Z)(this,jt)**2*10-((0,he.Z)(this,At)?this.jumpForce:0);if(n>this.maxFallSpeed&&(n=this.maxFallSpeed),0===s.length)return(0,ce.Z)(this,jt,(0,he.Z)(this,jt)+e),void(this.camera.position.y-=e*n);const o=s[0].distance;o<this.height&&(0,he.Z)(this,jt)?((0,ce.Z)(this,At,!1),(0,ce.Z)(this,jt,0),this.camera.position.y+=this.height-o):o<this.height+.3&&!(0,he.Z)(this,At)?((0,ce.Z)(this,jt,0),this.camera.position.y+=this.height-o):((0,ce.Z)(this,jt,(0,he.Z)(this,jt)+e),this.camera.position.y-=e*n)}}function zt(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}const Ot=new O.FM8(0,0);var Pt=new WeakMap;class St{constructor(e,t){zt(this,Pt,{writable:!0,value:new O.iMs}),(0,a.Z)(this,"enabled",!0),(0,a.Z)(this,"rayItems",[]),this.canvas=e,this.camera=t;const s=this.onKeyDown.bind(this);window.addEventListener("keydown",s);const i=document.createElement("div");i.id="target",this.canvas.parentNode.insertBefore(i,e.nextSibling),this.dispose=()=>{window.removeEventListener("keydown",s);const e=document.getElementById("target");e&&e.remove()}}shoot(){if(this.raycast){(0,he.Z)(this,Pt).setFromCamera(Ot,this.camera);const e=(0,he.Z)(this,Pt).intersectObjects(this.rayItems);for(const t of e){this.raycast(t);break}}}onKeyDown(e){if(this.enabled)switch(e.code){case"ControlLeft":e.preventDefault(),this.shoot();break;case"Escape":e.preventDefault(),this.onEsc&&this.onEsc()}}}var kt=s(7458),It=s(7307);const Lt={1:ze,2:K},Mt=e=>{let{gallery:t,postList:s}=e;const n=(0,i.useRef)(null),o=(0,i.useRef)(null),r=(0,i.useRef)(null),[a,h]=(0,i.useState)(0),[d,p]=(0,i.useState)(0),[l,u]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!t||!s)return;const e=n.current,i=new O.lLk;i.onStart=function(){h((e=>e+1))},i.onLoad=function(){p((e=>e+1))},i.onError=function(e){qe.Z.addToast("error","필요한 자원을 로드하지 못했습니다")};const a=new kt.T({canvas:e,antialias:!0}),c=new O.xsS,d=new ht.R({canvas:e});c.add(d);const l=new Zt(e,d,1.6);o.current=l;const g=new St(e,d);g.raycast=e=>{e.object instanceof V.t&&(e.distance>10?qe.Z.addToast("error","앨범이 너무 멀리 있습니다"):(u(e.object.index),It.Z.muteAudio(),l.enabled=!1))},g.onEsc=()=>{u(null),It.Z.unmuteAudio(),l.enabled=!0},r.current=g;const{update:m,dispose:x}=Lt[t.place.placeId]({canvas:e,loadingManager:i,renderer:a,scene:c,camera:d,controls:l,rayControls:g,postList:s}),w=function(){d.setDefaultAspect(),d.updateProjectionMatrix(),a.setDefaultSize(),a.render(c,d)};window.addEventListener("resize",w);const y=new O.SUY,f=function(){const e=y.getDelta();a.render(c,d),a.setAnimationLoop(f),l.update(e),m(e)};return f(),()=>{h(0),p(0),c.remove(d),a.setAnimationLoop(null),a.dispose(),l.dispose(),g.dispose(),x(),window.removeEventListener("resize",w)}}),[t,s]);const g=(0,y.Z)(),m=(0,i.useCallback)(((e,t)=>{o.current&&(o.current.lookSpeedRatio=e,o.current.movementSpeedRatio=-t)}),[]),x=(0,i.useCallback)((()=>{r.current&&r.current.shoot()}),[]),w=(0,i.useCallback)((()=>{o.current&&o.current.jump()}),[]);return(0,c.jsxs)("div",{className:"gallery-canvas",children:[(0,c.jsx)("canvas",{ref:n}),(0,c.jsx)(j.Z,{className:"gallery-canvas__loading",isShow:a!==d,duration:1e3,timingFunction:"ease-in-out",children:(0,c.jsx)(Be.Z,{})}),(0,c.jsx)(Ne.Z,{isOpen:null!==l,onClose:()=>{u(null),It.Z.unmuteAudio(),o.current&&(o.current.enabled=!0)},children:null!==l&&(0,c.jsx)(at,{post:s[l]})}),g&&(0,c.jsx)("div",{className:"gallery-canvas__joystick",children:(0,c.jsx)(Ee,{control:m,shoot:x,jump:w})})]})},Et=e=>{let{gallery:t,onClickEnter:s}=e;const n=(0,i.useRef)(null),o=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=n.current,t=o.current,s=(0,Me.Z)((function(s){const{x:i,y:n,width:o,height:r}=e.getBoundingClientRect(),a=s.clientX-i,h=s.clientY-n,c=a-o/2,d=h-r/2,p=Math.sqrt(c**2+d**2);e.style.transform="\n          rotate3d(\n            ".concat(-d/170,",  ").concat(c/170,", 0, ").concat(p/17,"deg\n          )\n        "),e.style.boxShadow="\n          ".concat(-c/10,"px  ").concat(-d/10,"px 20px rgba(0, 0, 0, 0.3)\n        "),t.style.backgroundImage="\n          radial-gradient(\n            circle at ".concat(a,"px ").concat(h,"px, #00000010, #ffffff00, #ffffff70\n          )\n        ")}));return e.addEventListener("mousemove",s),()=>{e.removeEventListener("mousemove",s)}}),[]),(0,c.jsxs)("div",{className:"gallery-cover",children:[(0,c.jsxs)("article",{className:"gallery-cover__content",ref:n,children:[(0,c.jsx)("h1",{children:t.name}),(0,c.jsx)("p",{children:t.content}),(0,c.jsx)(Qe.Z,{text:"입장하기",onClick:s,direction:"center"}),(0,c.jsx)("div",{className:"gallery-cover__content--light",ref:o})]}),(0,c.jsx)("div",{className:"gallery-cover__back"})]})};var Bt=s(6207),Nt=s(2480);const Ct=[{src:"",title:""},{src:A,title:"MapleStory - Raindrop Flower (ver. Piano)"},{src:b,title:"MapleStory - Phantheon (ver. Piano)"}],Tt=()=>{const{galleryId:e}=(0,n.UO)(),{data:t,isLoading:s,isError:o}=(0,Bt.rp)(parseInt(e)),{data:r,isLoading:a,isError:h}=(0,Nt.N)(parseInt(e)),d=(0,y.Z)();(0,i.useEffect)((()=>(d&&qe.Z.addToast("info","가로모드로 더욱 쾌적하게 플레이할 수 있습니다",6e3),()=>{})),[d]);const[p,l]=(0,i.useState)(!0);(0,i.useRef)(null);if((0,i.useEffect)((()=>void 0),[]),!o&&!h)return s||a?(0,c.jsx)(Z.Z,{}):(0,c.jsxs)("div",{className:"gallery",children:[(0,c.jsx)(j.Z,{className:"gallery__cover",isShow:p,duration:1300,children:(0,c.jsx)(Et,{gallery:t,onClickEnter:()=>{l(!1),It.Z.playAudio()}})}),(0,c.jsx)("div",{className:"gallery__music",children:(0,c.jsx)(z.Z,{id:"gallery-audio",src:Ct[t.place.placeId].src,title:Ct[t.place.placeId].title,color:"white"})}),(0,c.jsx)("div",{className:"gallery__navbar",children:(0,c.jsx)(v,{})}),(0,c.jsx)("div",{className:"gallery__canvas",children:(0,c.jsx)(Mt,{gallery:t,postList:r})})]})}}}]);