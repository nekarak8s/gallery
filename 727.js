"use strict";(self.webpackChunkgallery=self.webpackChunkgallery||[]).push([[727],{8322:(e,t,s)=>{s.r(t),s.d(t,{default:()=>gt});var o=s(7363),i=s(1807),n=s(7355),r=s(5301),a=s(6735),h=s(3823);const c=["styles"];function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const l=e=>{let{styles:t={}}=e,s=(0,a.Z)(e,c);return(0,h.jsx)("svg",p(p({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s),{},{children:(0,h.jsx)("path",{fill:"currentColor",d:"M6.03 4.97L7 4 2 2l2 5 .97-.97 1.82 1.82C2.16 13.13 3.94 20.7 4 21.03l.26.97 1.94-.5-.2-.79 6.82-6.83L16 17.06V19l3 3 1-2 2-1-3-3h-1.94l-3.18-3.18L20.71 6l.79.19.5-1.93-.97-.26c-.33-.06-7.9-1.84-13.18 2.79zM5.78 19.5c-.28-2.05-.5-6.78 2.43-10.23l3.91 3.91zM19.5 5.78l-6.32 6.34-3.91-3.91c3.45-2.93 8.18-2.71 10.23-2.43"})}))};var u=s(2561);const m=()=>{const e=(0,u.Z)();return(0,h.jsx)("div",{className:"control-notice",children:e?(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("div",{className:"control-notice__controller",children:(0,h.jsx)("div",{})}),(0,h.jsx)("p",{children:"컨트롤러로 이동"})]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("div",{className:"control-notice__shoot",children:(0,h.jsx)(l,{})}),(0,h.jsx)("p",{children:"슈팅버튼으로 앨범 조준"})]})]}):(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)("kbd",{children:"↑"})," ",(0,h.jsx)("kbd",{children:"↓"})," 키로 앞뒤 이동"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)("kbd",{children:"←"})," ",(0,h.jsx)("kbd",{children:"→"})," 키로 시선 회전"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)("kbd",{children:"스페이스"}),"  키로 앨범 조준"]})})]})})},g=()=>{const e=(0,i.s0)();return(0,h.jsx)("nav",{className:"gallery-navbar",children:(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:(0,h.jsx)("button",{"data-cursor-scale":n.D,onClick:()=>e(-1),"aria-label":"페이지 뒤로가기",children:"뒤로가기"})}),(0,h.jsxs)("li",{className:"gallery-navbar__notice",children:[(0,h.jsx)("button",{"data-cursor-scale":n.D,"aria-label":"\r 조작법 열기",children:"조작법"}),(0,h.jsx)(m,{})]})]})})};var x=s(2914),w=s(3940),y=s(4395),f=s(4599),v=s(7916),A=s(7892),b=s(3248),j=s(890),Z=s(3629),z=s(7948),S=s(2724),I=s(135),E=s(4537);class M extends E.T{constructor(e){var t;let s;if(super(e),(0,r.Z)(this,"type","ceiling"),(0,r.Z)(this,"textures",{}),(0,r.Z)(this,"isPlane",!1),this.x+=this.width*Math.cos(this.rotationY)/2,this.x+=this.depth*Math.sin(this.rotationY)/2,this.z-=this.width*Math.sin(this.rotationY)/2,this.z+=this.depth*Math.cos(this.rotationY)/2,!0===e.isPlane?(this.isPlane=!0,this.rotationX+=Math.PI/2,s=new f._12(this.width,this.depth)):(this.isPlane=!1,this.y+=this.height/2,s=new f.DvJ(this.width,this.height,this.depth)),e.texture&&(this.textures.baseTex=e.texture.textureLoader.load(e.texture.baseImg),e.texture.normalImg&&(this.textures.normalTex=e.texture.textureLoader.load(e.texture.normalImg)),e.texture.roughImg&&(this.textures.roughTex=e.texture.textureLoader.load(e.texture.roughImg)),e.texture.ambientImg&&(this.textures.ambientTex=e.texture.textureLoader.load(e.texture.ambientImg)),e.texture.repeatX||e.texture.repeatY))for(const t in this.textures){const s=this.textures[t];s.wrapS=f.rpg,s.wrapT=f.rpg,s.repeat.x=e.texture.repeatX||1,s.repeat.y=e.texture.repeatY||1}const o=null!==(t=e.texture)&&void 0!==t&&t.roughImg?new f.Wid({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0,roughnessMap:this.textures.roughTex||void 0,roughness:e.texture.roughness||1}):new f.YBo({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0});this.mesh=new f.Kj0(s,o),this.mesh.position.set(this.x,this.y,this.z),this.mesh.rotation.set(this.rotationX,this.rotationY,this.rotationZ),this.mesh.castShadow=!e.transparent,this.mesh.receiveShadow=!e.transparent,this.mesh.name=this.name||this.type,e.container.add(this.mesh),e.world&&this.setBoxCannonBody(e.world,0,e.cannonMaterial),this.dispose=()=>{for(const e in this.textures){this.textures[e].dispose()}this.mesh.material instanceof Array?this.mesh.material.forEach((e=>{e.dispose()})):this.mesh.material.dispose(),this.mesh.geometry.dispose(),e.container.remove(this.mesh),e.world&&e.world.removeBody(this.cannonBody)}}}var L=s(5878);class B{constructor(e){(0,r.Z)(this,"type","floors"),(0,r.Z)(this,"meshes",[]),(0,r.Z)(this,"textureSource",{}),(0,r.Z)(this,"textures",[]),e.texture&&(this.textureSource.baseTex=e.texture.textureLoader.load(e.texture.baseImg),e.texture.normalImg&&(this.textureSource.normalTex=e.texture.textureLoader.load(e.texture.normalImg)),e.texture.roughImg&&(this.textureSource.roughTex=e.texture.textureLoader.load(e.texture.roughImg)),e.texture.ambientImg&&(this.textureSource.ambientTex=e.texture.textureLoader.load(e.texture.ambientImg))),e.floorsData.forEach((t=>{var s;const o=new f.DvJ(t.width,t.height,t.depth),i={};for(const s in this.textureSource)this.textureSource[s].wrapS=f.rpg,this.textureSource[s].wrapT=f.rpg,this.textureSource[s].repeat.x=t.width*(e.repeatFactor||1),this.textureSource[s].repeat.y=t.depth*(e.repeatFactor||1),i[s]=this.textureSource[s].clone(),this.textures.push(i[s]);const n=null!==(s=e.texture)&&void 0!==s&&s.roughImg?new f.Wid({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:i.baseTex||void 0,normalMap:i.normalTex||void 0,aoMap:i.ambientTex||void 0,roughnessMap:i.roughTex||void 0}):new f.YBo({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:i.baseTex||void 0,normalMap:i.normalTex||void 0,aoMap:i.ambientTex||void 0}),r=t.rotationX||0,a=t.rotationY||0,h=t.rotationZ||0;let c=t.x,d=t.y-t.height/2,p=t.z;p-=t.depth*(1-Math.cos(r))/2,d+=t.depth*Math.sin(r)/2,c+=t.width*Math.cos(a)/2,p+=t.depth*Math.cos(a)/2,c-=t.width*(1-Math.cos(h))/2,d+=t.width*Math.sin(h)/2;const l=new f.Kj0(o,n);l.position.set(c,d,p),l.rotation.set(r,a,h),l.castShadow=!e.transparent,l.receiveShadow=!e.transparent,l.name="floor",this.meshes.push(l),e.container.add(l)})),this.dispose=()=>{this.meshes.forEach((t=>{t.geometry,t.material instanceof Array?t.material.forEach((e=>{e.dispose()})):t.material.dispose(),t.geometry.dispose(),e.container.remove(t)}));for(const e in this.textureSource){this.textureSource[e].dispose()}this.textures.forEach((e=>{e.dispose()}))}}}var Y=s(1046),T=s(4670);class O{constructor(e){(0,r.Z)(this,"type","floors"),(0,r.Z)(this,"meshes",[]),(0,r.Z)(this,"textureSource",{}),(0,r.Z)(this,"textures",[]),(0,r.Z)(this,"spotLights",[]),e.normalImg&&(this.textureSource.normalTex=e.textureLoader.load(e.normalImg)),e.roughImg&&(this.textureSource.roughTex=e.textureLoader.load(e.roughImg)),e.ambientImg&&(this.textureSource.ambientTex=e.textureLoader.load(e.ambientImg)),e.framesData.forEach(((t,s)=>{const o=new f.DvJ(t.width,t.height,t.depth),i={};i.baseTex=e.textureLoader.load(e.postList[s].imageURL);for(const s in this.textureSource)this.textureSource[s].wrapS=f.rpg,this.textureSource[s].wrapT=f.rpg,this.textureSource[s].repeat.x=t.width*(e.repeatFactor||1),this.textureSource[s].repeat.y=t.height*(e.repeatFactor||1),i[s]=this.textureSource[s].clone(),this.textures.push(i[s]);const n=e.roughImg?new f.Wid({color:e.color,map:i.baseTex||void 0,normalMap:i.normalTex||void 0,aoMap:i.ambientTex||void 0,roughnessMap:i.roughTex||void 0}):new f.YBo({color:e.color,map:i.baseTex||void 0,normalMap:i.normalTex||void 0,aoMap:i.ambientTex||void 0}),r=t.rotationX||0,a=t.rotationY||0,h=t.rotationZ||0,c=new T.t(o,n,e.postList[s].order);if(c.position.set(t.x,t.y,t.z),c.rotation.set(r,a,h),c.castShadow=!0,c.receiveShadow=!0,c.name="frame",this.meshes.push(c),e.container.add(c),e.spotLight&&t.width){const s=new f.PMe(e.spotLight.color||16777190,e.spotLight.intensity||4*t.width,e.spotLight.distance||2*t.width,e.spotLight.angle||Math.PI/5.2,e.spotLight.penumbra,e.spotLight.decay||2);s.position.set(e.spotLight.lightOffsetX||0,e.spotLight.lightOffsetY||t.width,e.spotLight.lightOffsetZ||t.width),s.target=c,s.castShadow=!0,c.add(s),this.spotLights.push(s)}})),this.dispose=()=>{this.spotLights.forEach((e=>{e.dispose()})),this.meshes.forEach((t=>{t.geometry,t.material instanceof Array?t.material.forEach((e=>{e.dispose()})):t.material.dispose(),t.geometry.dispose(),e.container.remove(t)}));for(const e in this.textureSource){this.textureSource[e].dispose()}this.textures.forEach((e=>{e.dispose()}))},this.update=e=>{this.meshes.forEach((t=>{t.rotation.y+=e}))}}}var C=s(6342);class R extends E.T{constructor(e){var t;super(e),(0,r.Z)(this,"type","wall"),(0,r.Z)(this,"textures",{}),this.x+=this.width*Math.cos(this.rotationY)/2,this.y+=this.height/2,this.z-=this.width*Math.sin(this.rotationY)/2;const s=new f.DvJ(this.width,this.height,this.depth);if(e.texture&&(this.textures.baseTex=e.texture.textureLoader.load(e.texture.baseImg),e.texture.normalImg&&(this.textures.normalTex=e.texture.textureLoader.load(e.texture.normalImg)),e.texture.roughImg&&(this.textures.roughTex=e.texture.textureLoader.load(e.texture.roughImg)),e.texture.ambientImg&&(this.textures.ambientTex=e.texture.textureLoader.load(e.texture.ambientImg)),e.texture.repeatX||e.texture.repeatY))for(const t in this.textures){const s=this.textures[t];s.wrapS=f.rpg,s.wrapT=f.rpg,s.repeat.x=e.texture.repeatX||1,s.repeat.y=e.texture.repeatY||1}const o=null!==(t=e.texture)&&void 0!==t&&t.roughImg?new f.Wid({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0,roughnessMap:this.textures.roughTex||void 0,roughness:e.texture.roughness||1}):new f.YBo({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0});this.mesh=new f.Kj0(s,o),this.mesh.position.set(this.x,this.y,this.z),this.mesh.rotation.set(this.rotationX,this.rotationY,this.rotationZ),this.mesh.castShadow=!e.transparent,this.mesh.receiveShadow=!e.transparent,this.mesh.name=this.name||this.type,e.container.add(this.mesh),e.world&&this.setBoxCannonBody(e.world,0,e.cannonMaterial),this.dispose=()=>{for(const e in this.textures){this.textures[e].dispose()}this.mesh.material instanceof Array?this.mesh.material.forEach((e=>{e.dispose()})):this.mesh.material.dispose(),this.mesh.geometry.dispose(),e.container.remove(this.mesh),e.world&&e.world.removeBody(this.cannonBody)}}}var K=s(1018),V=s(7468);const k=[{x:20.4,y:2,z:6.09,width:30,height:50,depth:50},{x:32.9,y:2,z:56.09,width:5,height:10,depth:10}],W=[{x:50.4,y:2,z:6.09,width:10,height:.5,depth:35.4}],q=.3,N=[{x:20.55,y:2,z:9.17,width:6,height:12,depth:q,rotationY:(0,v.Id)(-90)},{x:20.55,y:2,z:16.18,width:4,height:8,depth:q,rotationY:(0,v.Id)(-90)},{x:20.55,y:11,z:15.17,width:5.01,height:3,depth:q,rotationY:(0,v.Id)(-90)},{x:55.4,y:-1,z:4.69,width:5,height:11,depth:q},{x:36.85,y:2,z:13.67,width:6,height:4,depth:q,rotationY:(0,v.Id)(-25)},{x:43.085,y:2,z:16.555,width:8,height:4,depth:q,rotationY:(0,v.Id)(-25)},{x:36.85,y:6.5,z:13.67,width:6,height:3,depth:q,rotationY:(0,v.Id)(-25)},{x:43.085,y:6.5,z:16.555,width:8,height:3,depth:q,rotationY:(0,v.Id)(-25)},{x:50.25,y:2,z:19.8,width:8,height:7.5,depth:q,rotationY:(0,v.Id)(-90)},{x:27.9,y:2,z:33.17,width:15,height:3,depth:q},{x:32.4,y:2,z:43.88,width:6,height:5,depth:q},{x:18.06,y:-1,z:36.15,width:7,height:10,depth:q,rotationY:(0,v.Id)(-90)},{x:62.98,y:-1,z:27.4,width:15.9,height:9,depth:q,rotationY:(0,v.Id)(-90)},{x:54.83,y:-1,z:43.15,width:8,height:9,depth:q},{x:20.4,y:2,z:55.94,width:12.5,height:8,depth:q},{x:37.9,y:2,z:55.94,width:12.5,height:8,depth:q}],U={x:36.85,y:2,z:13.67,width:14.8312,height:7.5,depth:.2,rotationY:(0,v.Id)(-25)},X=32.4,F=7,D=33.03,P=6,J=.2,Q=11,G=.2,H=[{x:35.4,y:4.5,z:43.98,width:2,height:2,depth:G},{x:18.16,y:5,z:39.64,width:3,height:3,depth:G,rotationY:(0,v.Id)(90)},{x:20.65,y:4,z:18.18,width:1.8,height:1.8,depth:G,rotationY:(0,v.Id)(90)},{x:20.65,y:4.25,z:12.16,width:2.5,height:2.5,depth:G,rotationY:(0,v.Id)(90)},{x:50.15,y:5,z:23.78,width:4,height:4,depth:G,rotationY:(0,v.Id)(-90)},{x:31.02,y:3.6,z:33.07,width:1.5,height:1.5,depth:G,rotationY:(0,v.Id)(180)},{x:39.78,y:3.6,z:33.07,width:1.5,height:1.5,depth:G,rotationY:(0,v.Id)(180)},{x:35.4,y:4.5,z:43.78,width:3,height:3,depth:G,rotationY:(0,v.Id)(180)},{x:62.88,y:5,z:36.52,width:3,height:3,depth:G,rotationY:(0,v.Id)(-90)},{x:57.9,y:4,z:4.79,width:2,height:2,depth:G}],_=[{width:.1,height:10,depth:50,x:20.4,y:5,z:31.09},{width:40,height:10,depth:.1,x:40.4,y:5,z:6.09},{width:.1,height:10,depth:35.4,x:60.4,y:5,z:23.79},{width:10,height:10,depth:.1,x:55.4,y:5,z:41.49},{width:.1,height:10,depth:14.6,x:50.4,y:5,z:48.79},{width:.1,height:10,depth:10,x:37.9,y:5,z:61.09},{width:5,height:10,depth:.1,x:35.4,y:5,z:66.1},{width:.1,height:10,depth:10,x:32.9,y:5,z:61.09}],$=e=>{e.controls.setPosition(35,5,62);const t=new f.dpR(e.loadingManager),s=[],o=[],i=new Date,n=(0,I.cW)(i),r=new f.Ilk((0,I.gO)(i)),a=new C.U({scene:e.scene,size:2e3});o.push(a);const h=new V.H({container:e.scene,textureLoader:t,width:1e3,depth:1e3});o.push(h);const c=new B({world:e.world,color:6842472,container:e.scene,floorsData:k,repeatFactor:1/3,texture:{textureLoader:t,baseImg:z.Z,normalImg:S.Z}});o.push(c),c.meshes.forEach((t=>{e.controls.floors.push(t)})),W.forEach((t=>{const s=new L.O({container:e.scene,color:16777215,x:t.x,y:t.y,z:t.z,width:t.width,height:t.height,depth:t.depth,transparent:!0,opacity:.4});o.push(s),e.controls.floors.push(s.mesh)}));const d=new M({container:e.scene,color:16777215,x:X,y:F,z:D,width:P,height:J,depth:Q,texture:{textureLoader:t,baseImg:A.Z,normalImg:b.Z,repeatX:P/6,repeatY:Q/6}});o.push(d),e.rayControls.rayItems.push(d.mesh);const p=new K.r({world:e.world,container:e.scene,wallsData:N,repeatFactor:1/6,texture:{textureLoader:t,baseImg:A.Z,normalImg:b.Z}});o.push(p),p.meshes.forEach((t=>{e.rayControls.rayItems.push(t)}));const l=new R({world:e.world,container:e.scene,color:16777215,x:U.x,y:U.y,z:U.z,width:U.width,height:U.height,depth:U.depth,rotationY:U.rotationY,transparent:!0,opacity:.2});o.push(l),e.rayControls.rayItems.push(l.mesh);const u=new O({container:e.scene,textureLoader:t,postList:e.postList,normalImg:Z.Z,ambientImg:j.Z,framesData:H,repeatFactor:1,spotLight:{intensity:3*(1-n)+5}});o.push(u),u.meshes.forEach((t=>{e.rayControls.rayItems.push(t)}));const m=new f.Pa4,{elevation:g,azimuth:x}=(0,I.F4)(i),w=f.M8C.degToRad(90-g),v=f.M8C.degToRad(3*g),E=f.M8C.degToRad(x-25);m.setFromSphericalCoords(1,w,E),a.setSunPosition(m),h.setSunDirection(m);const T=new f.Mig(16777215,.4*n);e.scene.add(T),s.push(T);const q=new f.Ox3(r,1.3*n);q.position.set(100*Math.sin(E),500*Math.sin(v),100*Math.cos(E)),q.shadow.camera.left=-60,q.shadow.camera.right=60,q.shadow.camera.top=60,q.shadow.camera.bottom=-100,q.castShadow=!0,e.scene.add(q),s.push(q);const G=setInterval((()=>{const e=new Date,{elevation:t,azimuth:s}=(0,I.F4)(e),i=f.M8C.degToRad(90-t),n=f.M8C.degToRad(3*t),r=f.M8C.degToRad(s-25);m.setFromSphericalCoords(1,i,r),a.setSunPosition(m),h.setSunDirection(m);const c=(0,I.cW)(e),d=new f.Ilk((0,I.gO)(e));T.intensity=.4*c,q.color=d,q.intensity=1.3*c,q.position.set(100*Math.sin(r),500*Math.sin(n),100*Math.cos(r)),o.forEach((e=>{e instanceof Y.R&&e.spotLight&&(e.spotLight.intensity=3*(1-c)+5)}))}),6e4);_.forEach((t=>{const s=new y.xu(new y.AO(t.width/2,t.height/2,t.depth/2)),i=new y.uT({mass:0,position:new y.AO(t.x,t.y,t.z),shape:s});e.world.addBody(i),o.push({dispose:()=>{e.world.removeBody(i)}})}));return{update:function(){h.update()},dispose:function(){G&&clearInterval(G),s.forEach((t=>{e.scene.remove(t),t.dispose()})),o.forEach((e=>{e.dispose&&e.dispose()}))}}};var ee=s(195);const te={srcSet:s.p+"responsive-images/nx-43e918c16cf8d470-320.png 320w,"+s.p+"responsive-images/nx-9446f5bd9f92febc-640.png 640w,"+s.p+"responsive-images/nx-51a4b9e5a15f420f-960.png 960w,"+s.p+"responsive-images/nx-63f5b62a3f3cb080-1024.png 1024w",images:[{path:s.p+"responsive-images/nx-43e918c16cf8d470-320.png",width:320,height:320},{path:s.p+"responsive-images/nx-9446f5bd9f92febc-640.png",width:640,height:640},{path:s.p+"responsive-images/nx-51a4b9e5a15f420f-960.png",width:960,height:960},{path:s.p+"responsive-images/nx-63f5b62a3f3cb080-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/nx-63f5b62a3f3cb080-1024.png",toString:function(){return s.p+"responsive-images/nx-63f5b62a3f3cb080-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAA/1BMVEWAg5FQZpNNYo85UIM5R2s2S36FiJdZXnQ5RmUrNlc+SmpVYH2GiJRWbJaOkJ2Cj6ednadmdZdCS2UwO1xJV3iKkJ5TaJR3hqOUmac/VYdTWnBcYnZTXnpPV3BdZHqJi5hofKGIk6hKXINHXo1zgJ+wsr1MU2pGUGxGU3FCTm9aZ4MyP2N2eottc4dTZIaQlKJYcJp+jaiMjZhzg6NYa41Sapdcc51AWYyMk6d+iqRvfJiQl6qfpLReb5VOWXU3QV9iaHxvd40/T3V5gJSSlqJqgKRjd55JZJShoq9ncIhiaoByf5Zuhaanpq2pqrU9RV5PXHxocop/iZuVn7WKkqLLleHlAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVR4nE3J1ZqCUBRA4Y0e4UijIKB02AF2gN019f7vMp/OzazLf0Eul8t5c2GhheEikXyixI0P8MJs1htKgZAGaYYocT8hZN/puiT5mUzmhW4Cuq5n9XSWJM/0bQSnxlCaTCb+VDs/wzDwCYJzgkEMM+408TlJmgfujCuNjqo6UEELouPxdBqPCPUccFEUjZ0D9KauKAqqOHVmZ2HsOIf7PQalJ/Z48SGKj4XrCto0FoQF2CRJ2naf53leURR+v9f2GrxjWZJ8XdLuK7zSewkA22fZPuxum91ufrt9Q3uzabc7l3aneYEvr9vtDocSdBiZYWTZYoxrh9luZc/rDsFoIETXl5S1vlp1hLbyJ9MEutVq4Vq5sl5bJo0QashGE1rFYnFVMKmKRZkNjBFdN5qQz+eLq0K1TFUos0ZjjBpL5j+WqwWMMV033vjxh5RZK2BM15a/VKgv5JJ/sLMAAAAASUVORK5CYII=",width:1024,height:1024},se={srcSet:s.p+"responsive-images/ny-881fdf54cdf09324-320.png 320w,"+s.p+"responsive-images/ny-bb63b47858447ab1-640.png 640w,"+s.p+"responsive-images/ny-c01077fb2f78a75c-960.png 960w,"+s.p+"responsive-images/ny-cbef64bf97114415-1024.png 1024w",images:[{path:s.p+"responsive-images/ny-881fdf54cdf09324-320.png",width:320,height:320},{path:s.p+"responsive-images/ny-bb63b47858447ab1-640.png",width:640,height:640},{path:s.p+"responsive-images/ny-c01077fb2f78a75c-960.png",width:960,height:960},{path:s.p+"responsive-images/ny-cbef64bf97114415-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/ny-cbef64bf97114415-1024.png",toString:function(){return s.p+"responsive-images/ny-cbef64bf97114415-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAmVBMVEVSWGw+RVxHTWIsNVE8Q1ozO1VVW25DSV9YXnFOVGc5QFgwOFJMVGw2PVdKUGRcYnU+SWZgZ3tDT2xGT2hHVHFKWHVsc4ZMW3pyeY28vshQWHBkbIBve5WorLmaoLC0t8JCS2VaYnlUXXVkcIl+hZaMkaKCi6GVmqt4gJRPX4FXZ4Zico+jp7aMlatpb4BaZX6CiZt4hZ+vs79xNgzyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEElEQVR4nE3O246DIBCA4bEFFVSqgCfq+dyurbbv/3Cb0Wyy/80k30wIEMdpmqaPx/On+Lyqb57ndQlSax3H6Ylrnef5d4VQSq1PnOayxsMKwlBKqeP02R9Yf8vqBSGqjrutL/Z5Lcu1ek0QNo2S2nRbnw3jXFXzOH1AKaV833TtPVn2cRynfSnA+L7vG9O1UZItwzAMS5GBa9sAYLu36P5OsqMeXNe1Ed3bLXq/EwzxPD05umOAd4wxOBfo0QZIQgjBMMDztgUmxOUvwfDxroOL8y/BAIwxYBFCrCNCLEcw/DYEQcA5IYRwzonlXIRSCiilFJ0HlAacOI7TNHC9ep6HG4oz4MSyQrhiHnbMg38BEfIcfGbXQYMAAAAASUVORK5CYII=",width:1024,height:1024},oe={srcSet:s.p+"responsive-images/nz-620af6dbf8199423-320.png 320w,"+s.p+"responsive-images/nz-167c532bc40d0898-640.png 640w,"+s.p+"responsive-images/nz-7eeb397af90ad63e-960.png 960w,"+s.p+"responsive-images/nz-e86097d9259b4137-1024.png 1024w",images:[{path:s.p+"responsive-images/nz-620af6dbf8199423-320.png",width:320,height:320},{path:s.p+"responsive-images/nz-167c532bc40d0898-640.png",width:640,height:640},{path:s.p+"responsive-images/nz-7eeb397af90ad63e-960.png",width:960,height:960},{path:s.p+"responsive-images/nz-e86097d9259b4137-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/nz-e86097d9259b4137-1024.png",toString:function(){return s.p+"responsive-images/nz-e86097d9259b4137-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAsVBMVEUoMlCGiJYzSHwrNVI4T4MqN1o1S38nMlMvQ3YxRXk9VYkxPmM8UoUnM1ZNWHR8f4+Ji5g1SHgvOlxLY5Jocopwd4pwgJ2AiqA0QWRXYn2EhpF+gY+cn6mEjqNnd5p3hZ86RWZBUHReaYGVmKWBg5KOk6F6iaNUbZg1QF5GXo9UZIWMjpsvOFY9SWtGUG49S29BWoxRXXtabpZpfp9DVXpbc5xfd540RGtga4NTZY9yepCS36ERAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVR4nDWJB3KDMBBFFwEiEiBEF6b34oZrnNz/YBkR+83O/v1vwcKYfEmI67quTIKAWhoiH0kIIQhjmKmFkSwuQoQghLGmQe5TS8MIyYqlsSwKbeSvVJO3tm1K/SuU0dWfV/rTFhqldF1nvxjg+Xg+fP9aFHMZFXExjuNYwjBkWX5r22jM4yGP81t0KyHL2jbr+z4uo7iMhjjO+x72+z1XOFc+cM45cK7sdrsuTR1Jmnad0sHmnNQJg0BO+PvrdBAEqRMkYZjcmyZ5Na9lWQJYLsmlPjPGzoydLqyu63sDCauPwjSrUyWEKYQQ32cGyakyPV33Jk//xxRHYNLZhqqqhmHYtm3rnglHIR1sGBLb1qGavIP6lu+HDdPkHQ6qCgCqZNN/yH4eNUrYw/kAAAAASUVORK5CYII=",width:1024,height:1024},ie={srcSet:s.p+"responsive-images/px-9a433e2bae10046c-320.png 320w,"+s.p+"responsive-images/px-4aedb22733aa38dd-640.png 640w,"+s.p+"responsive-images/px-3cfb1b479d7e767e-960.png 960w,"+s.p+"responsive-images/px-582c623f49d7de70-1024.png 1024w",images:[{path:s.p+"responsive-images/px-9a433e2bae10046c-320.png",width:320,height:320},{path:s.p+"responsive-images/px-4aedb22733aa38dd-640.png",width:640,height:640},{path:s.p+"responsive-images/px-3cfb1b479d7e767e-960.png",width:960,height:960},{path:s.p+"responsive-images/px-582c623f49d7de70-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/px-582c623f49d7de70-1024.png",toString:function(){return s.p+"responsive-images/px-582c623f49d7de70-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABQVBMVEWJosSTnrRbb5KBjqqvtL2Ll66/xMxgbIdKYI9IUm6ZorWXsM+RnLKorbiPmq+Lj5xNW3pQX4B9lrqQqcq4v8q7wMhshKussbyjqbd7hJhyhaWRlaFeeKGanqk/SWVDTWlNWHV1j7RTZIZqfJxkdJFWX3dhdplvh62yucNka4B0iKhsdYtmfKG0vc6ftdFygqJDWIl7jauGi5pSaJWHlal4hqS2tr1JVXCAmr9RXHZZZH9UYH1VaY1icIxrgKGDnL6ossO3u8Ryi7BqcYd6kbSfsMedqLvGy9KqtciWq8dngKdZcZt1fpJ2jK6TmKajpa9UbJlcaIR5k7iLmLBYaIiGn7+GocKWprp8iKBuepWksMK8xtLFzdypuc6Gm7mElK6PoruGkKiWnrBxf5pqeJOAip9weZCLpca1wtZja4OnpaxydQ/2AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVR4nB3K5VbCABiA4W8sWRIbrAEB6W5RuqVUQsBWRL3/C/CM9+dzXmAYhnFD9T7Qm0WStwWKymazkE4zbjdUXYFOxKNbSFFZeHr6Sbuh6QpEPBN9uVwWKKoAo1QqxcCmet/xTPScepvJlDjYj8TW+LSx1sjkVUXL5fICnvtjANisXb2OZzZjvR8f7yV4TvfHJ9ism64e4pXZXCmp63A4DInUSOy/vbwM6Fyc51Ueh+GQkAhCjO4HW1nmi8Wi8WcAQRBSux2NYpiXWxjGXNMEASRJapct4eSFMdcEQcjnQRSjGIZxMosX59pRUZS8JkCr5eVohH5VG8FjfheaTm+UKWwR5CEXjzcubbad8p1IJEiSBPYBR+ON5KXt+mJFkmQ30e3+AsvjqHo2p9NZr1/FYrEYICyOqsEzOhwOv78WDoeBZnE0EwzZVhb6K3YroBEcLQVDN+TdVb3mr9h9PtOEAc2/P35+nTVcq9h9pmn+Az9/PqXb36LAAAAAAElFTkSuQmCC",width:1024,height:1024},ne={srcSet:s.p+"responsive-images/py-f22d663e9d68076d-320.png 320w,"+s.p+"responsive-images/py-7a3f2b125700b943-640.png 640w,"+s.p+"responsive-images/py-9419883ae8b47c29-960.png 960w,"+s.p+"responsive-images/py-6a1c0fd8c6b43d39-1024.png 1024w",images:[{path:s.p+"responsive-images/py-f22d663e9d68076d-320.png",width:320,height:320},{path:s.p+"responsive-images/py-7a3f2b125700b943-640.png",width:640,height:640},{path:s.p+"responsive-images/py-9419883ae8b47c29-960.png",width:960,height:960},{path:s.p+"responsive-images/py-6a1c0fd8c6b43d39-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/py-6a1c0fd8c6b43d39-1024.png",toString:function(){return s.p+"responsive-images/py-6a1c0fd8c6b43d39-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABGlBMVEUvQnVccpqFnsG9v8gxRHczR3hZbpc2SXtUaZOctNJcaYulqLa0t8G4usRedp6PqMhnfqQ8U4WBmr0sP3Nwepd8hJ2Mk6k7TXugpLKboK9heaFshqzg4uhLWoPDxc3S0terrbiTmKpVY4hvirF3kbaZr82iuNStv9fW3OZ7k7euu85QZY++w89AUn7NztShp7iYnKyytcBGWYOPlaeZprxre5yco7VgbpBogac4TYG8ydzJ0d/6+fny8vRLYYy5vstEW4u2u8rGy9bP09t1iquws72lrLyFi6F1gp+Urcynu9d0j7SotMiyt8SMmrGVnbGrsb+Dk62XobVXaY3n6O2BjKfv8PPN1eJ+l7fY2Nt6h6NndJXFyNCRp8Texu1xAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZklEQVR4nCXL1XbCUBRF0RO9UeJGQgyKBQ1a3KHUXf//OzrS7sc51gaKIiEbRZKggQYkulTgzzTUTAsUaBpVaGaIsgRxuqFbJFXQDe5SUQAhhCy9Y/CmBVwY9cxEWUGKyMKow3OiSaHYjpxwoKygZ46aRtjjjNiyYl4UhHsmgb3gxEfb4o5x2hx1hbArtGWwzW894nWu5zjP6cnpdMT1DnjBNPjjKCKC4SI5hbZD9GXwiWF0uE/toP08GDzsbf620QdC9Nvi8CS2nh7FQ3/f9VubPghE92s4eAh+7p4+W0u/tb1Rr4Fo0wmD3R0edzfbW8IPNmqtBq/YgqFz8q72Ua83gmWjgas4rBYMg+XHbkmV6tvNer2s4zgkTBa6xRouse+e53lTSQKGobG87F6r0hVbqc7e5tUyCzSN5fLjYgm/uGAr0/lsXj2zkJns/uN54s1eJmUWsFwuP3aLpezOnifVaaXM/gK9pjMT1+ivhQAAAABJRU5ErkJggg==",width:1024,height:1024},re={srcSet:s.p+"responsive-images/pz-10f488cd9e60ca04-320.png 320w,"+s.p+"responsive-images/pz-56fe2eb414b5f4e6-640.png 640w,"+s.p+"responsive-images/pz-d229405ea56feb25-960.png 960w,"+s.p+"responsive-images/pz-0050c5a4c59e08ac-1024.png 1024w",images:[{path:s.p+"responsive-images/pz-10f488cd9e60ca04-320.png",width:320,height:320},{path:s.p+"responsive-images/pz-56fe2eb414b5f4e6-640.png",width:640,height:640},{path:s.p+"responsive-images/pz-d229405ea56feb25-960.png",width:960,height:960},{path:s.p+"responsive-images/pz-0050c5a4c59e08ac-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/pz-0050c5a4c59e08ac-1024.png",toString:function(){return s.p+"responsive-images/pz-0050c5a4c59e08ac-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABKVBMVEWctNKapbhvgqJleZymrLpdaoWdp7qIl7DDytSOqMmdqL2Urs6SorvCyNCYstHBxcxMXX9QY4Zpc4u8wsp/jai2vsmgq79fc5WOnbWYpryVoLWxt8OkudSQm7CkqLN0iq2bqb+7xtWgttO5vsetsbtTX3xUaIujsMNzjrVoeJZhcI5Ya49zgJmAm79tiLCos8WGmbW+xMycrMKNob2FmrqHk6irvdWgpK6xuciwwNV7kLKessy2w9XG0NxccJKEnsJibYV0fZOts8J5gpi3u8Z4k7h7lrypsMCIo8acoKtrfp6Bl7eYnatuhKetvdC/y9x7jaxYYnxwfJSPlKJ8iaC0vcqLpMR0h6Rog6vN0dymtstkgKmructeeaVaZoGOmKqWrMq5w8+ClLCSOMuGAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbUlEQVR4nC3L51aCABiA4Q9lyVRQWTIE3OTeYpla7pWZo33/N9Gx+vuc9wVi0n0/FbMPN3chmrObnWbCBlC12PtrsZh9vJmGaLATts3RsER56/X0jxwAcLABHXX5Uve6T0M0zQHHbZKw1dGxU6o9XEu/DwD9cxu2K5OhFvX6S+jlyz8n7E3f92FlmmZ3UWfabK9HJpuJZqezBoIgEGZRY6xLr3dZd/wk2U9Cy1ARXKGU6tvb+pslSZJlSZi1Wobhuq7mVHieZVm2wvOwnC1nLcNAXc1xHLFSEUVRhP2+0fhsEISMW/Fh+3A4xGIx8Dzv+XkeODbkclmpVjMlrV2CfF568nLBeVTfdvF4rWZlMhZg+dxolJOk+TFgqpRcVzJxBAbC/cgTCgUpGFwRarnMUH94L2DpdEEKBqKELDMKhQA2EAQsEokUbq+o4nEKR2D3gX2kwuFI+oo6PhlOUBxSu1Qq/Iu5QFRHtfF4iP4Aup07icd++pkAAAAASUVORK5CYII=",width:1024,height:1024},ae=s.p+"images/greenaryeac3b060f7439b9f16f1.glb",he=s.p+"images/trees57d0b9224e26b78a935d.glb";class ce{constructor(e){(0,r.Z)(this,"type","trees"),(0,r.Z)(this,"objects",[]),(0,r.Z)(this,"cannonBodies",[]),e.gltfLoader.load(he,(t=>{e.treesData.forEach((s=>{const o=new f.Tme;if(o.copy(t.scene.children[s.type]),o.name=this.type,o.children[0].castShadow=!0,o.children[0].receiveShadow=!0,o.scale.multiplyScalar(.01*(s.scale||1)),o.position.set(s.x,s.y,s.z),o.rotation.set((0,v.Id)(-90),0,s.rotation||0),this.objects.push(o),e.container.add(o),e.world){const t=(new f.ZzF).setFromObject(o),{x:i,y:n,z:r}=t.getSize(new f.Pa4),a=new y.uT({mass:0,position:new y.AO(s.x,s.y+n/2,s.z),shape:new y.Ab(i/6,i/6,n)});this.cannonBodies.push(a),e.world.addBody(a)}}))})),this.dispose=()=>{e.world&&this.cannonBodies.forEach((t=>{e.world.removeBody(t)})),this.objects.forEach((t=>{e.container.remove(t)}))}}}const de=2,pe=2,le=.05,ue=[{x:40,y:1,z:39},{x:63,y:4,z:53},{x:75,y:3,z:27},{x:100,y:1.7,z:40},{x:28,y:4,z:66},{x:64,y:14.6,z:78},{x:83,y:10,z:80},{x:37,y:2.4,z:93},{x:104,y:-2.6,z:104},{x:17,y:1.5,z:28}],me=[{type:0,x:61,y:0,z:19,scale:1.5},{type:0,x:68,y:0,z:17,scale:2},{type:0,x:76,y:0,z:17,scale:1.7},{type:0,x:59,y:.5,z:24,scale:1.8},{type:0,x:66,y:.5,z:23,scale:2},{type:0,x:72,y:.5,z:21,scale:2.1},{type:0,x:80,y:0,z:22,scale:1.9},{type:0,x:63,y:1,z:27,scale:1.75},{type:0,x:81,y:.5,z:26,scale:1.95},{type:0,x:64,y:1.3,z:33,scale:1.75},{type:0,x:70,y:1.3,z:31,scale:1.8},{type:0,x:75,y:1.3,z:32,scale:1.82},{type:0,x:80,y:1.3,z:31,scale:2},{type:6,x:81,y:10,z:73,scale:2},{type:17,x:82,y:6.7,z:65,scale:1.8},{type:14,x:76,y:6.7,z:82,scale:1.7},{type:7,x:59,y:8,z:72,scale:1.9},{type:26,x:51,y:8,z:80,scale:1.6},{type:23,x:65,y:6,z:89,scale:1.4},{type:28,x:91,y:0,z:28,scale:2},{type:28,x:96,y:0,z:37,scale:1.8},{type:28,x:98,y:0,z:45,scale:1.9},{type:28,x:96,y:0,z:53,scale:2},{type:28,x:97,y:0,z:61,scale:1.85},{type:28,x:38,y:0,z:88,scale:1.85},{type:18,x:30,y:1.5,z:28,scale:2.1},{type:2,x:40,y:.3,z:25,scale:1.7},{type:2,x:47,y:0,z:24,scale:1.8},{type:1,x:23,y:.5,z:43,scale:1.8},{type:1,x:24,y:.5,z:51,scale:1.9},{type:1,x:28,y:.5,z:48,scale:1.85},{type:24,x:63.2,y:0,z:43.3,scale:1.8},{type:19,x:70,y:0,z:45,scale:1.7},{type:24,x:31,y:1,z:60,scale:1.85}],ge=e=>{const t=new f.dpR(e.loadingManager),s=new f.cBK(e.loadingManager),o=new ee.E(e.loadingManager);e.controls.setPosition(25.1,5,25.1),e.controls.setQuaternion(0,(0,v.Id)(-135),0),e.scene.background=s.load([ie,te,ne,se,re,oe]);const i=[],n=new f.Mig("white",.5);e.scene.add(n),i.push(n);const r=new f.Ox3("white",1.8);r.position.set(110,220,110),r.shadow.camera.left=-60,r.shadow.camera.right=60,r.shadow.camera.top=60,r.shadow.camera.bottom=-100,r.castShadow=!0,e.scene.add(r),i.push(r);const a=[];o.load(ae,(t=>{const s=t.scene.children[0];s.receiveShadow=!0;const o=(new f.ZzF).setFromObject(s),{x:i,y:n,z:r}=o.getSize(new f.Pa4);s.position.x+=i/2,s.position.z+=r/2,e.scene.add(s),e.controls.floors.push(s),e.rayControls.rayItems.push(s),a.push({dispose:()=>{e.scene.remove(s)}})}));const h=new f.DvJ(110,5,110),c=new f.YBo({color:36081,side:f.ehD,opacity:.8,transparent:!0}),d=new f.Kj0(h,c);d.position.set(55,-3.8,55),e.scene.add(d),e.rayControls.rayItems.push(d),a.push({dispose:()=>{h.dispose(),c.dispose(),e.scene.remove(d)}});const p=new y.xu(new y.AO(55,50,1)),l=new y.uT({mass:0,position:new y.AO(55,0,-1),shape:p});e.world.addBody(l);const u=new y.xu(new y.AO(55,50,1)),m=new y.uT({mass:0,position:new y.AO(55,0,109),shape:u});e.world.addBody(m);const g=new y.xu(new y.AO(1,50,55)),x=new y.uT({mass:0,position:new y.AO(-1,0,55),shape:g});e.world.addBody(x);const w=new y.xu(new y.AO(1,50,55)),A=new y.uT({mass:0,position:new y.AO(109,0,55),shape:w});e.world.addBody(A),a.push({dispose:()=>{e.world.removeBody(l),e.world.removeBody(m),e.world.removeBody(x),e.world.removeBody(A)}});const b=new f.fHI(17,17,5),j=new f.YBo({color:775167,side:f.ehD,opacity:.7,transparent:!0}),Z=new f.Kj0(b,j);Z.position.set(45,-3,43),e.scene.add(Z),e.rayControls.rayItems.push(Z),a.push({dispose:()=>{b.dispose(),j.dispose(),e.scene.remove(Z)}});const z=new ce({container:e.scene,world:e.world,gltfLoader:o,treesData:me});a.push(z),e.rayControls.rayItems=[...e.rayControls.rayItems,...z.objects],ue.forEach(((s,o)=>{if(e.postList[o].isActive){const i=new Y.R({order:o,x:s.x,y:s.y,z:s.z,width:de,height:pe,depth:le,container:e.scene,texture:{textureLoader:t,baseImg:e.postList[o].imageURL}});a.push(i),e.rayControls.rayItems.push(i.mesh)}}));return{update:function(e){a.forEach((t=>{t.update&&t.update(e)}))},dispose:function(){i.forEach((t=>{e.scene.remove(t),t.dispose()})),a.forEach((e=>{e.dispose&&e.dispose()}))}}};var xe=s(7959);const we=e=>{let{control:t,shoot:s}=e;const i=(0,o.useRef)(null),n=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{const e=i.current,s=n.current,o=r.current,h={x:0,y:0,radius:0},c={top:0,bottom:0,left:0,right:0},d=function(){let t=e.getBoundingClientRect();h.x=t.x+e.offsetWidth/2,h.y=t.y+e.offsetHeight/2,h.radius=e.offsetWidth/2,t=o.getBoundingClientRect(),c.top=t.y,c.bottom=t.y+o.offsetHeight,c.left=t.x,c.right=t.x+o.offsetWidth},p=function(){a.current=!0},l=function(e){const o=e.changedTouches[e.changedTouches.length-1];o.clientX>c.left&&o.clientX<c.right&&o.clientY>c.top&&o.clientY<c.bottom||(a.current=!1,s.style.transform="\n        translate(".concat(0,"px, ",0,"px)\n        "),t&&t(0,0))};d(),window.addEventListener("resize",d);const u=(0,xe.Z)((function(e){if(!a.current)return;const o=e.changedTouches[e.changedTouches.length-1];if(o.clientX>c.left&&o.clientX<c.right&&o.clientY>c.top&&o.clientY<c.bottom)return;let i=o.clientX-h.x,n=o.clientY-h.y;const r=(i**2+n**2)**.5;r>h.radius&&(i/=r/h.radius,n/=r/h.radius),s.style.transform="\n      translate(".concat(.9*i,"px, ").concat(.9*n,"px)\n      "),t&&t(i/h.radius,n/h.radius)}));return e.addEventListener("touchstart",p),s.addEventListener("touchstart",p),document.addEventListener("touchmove",u),document.addEventListener("touchend",l),()=>{window.removeEventListener("resize",d),e.removeEventListener("touchstart",p),s.removeEventListener("touchstart",p),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",l)}}),[]),(0,h.jsxs)("div",{className:"joystick",children:[(0,h.jsx)("div",{className:"joystick__controller",ref:i,children:(0,h.jsx)("div",{className:"joystick__controller--core",ref:n})}),(0,h.jsx)("div",{className:"joystick__shoot",onClick:s,ref:r,children:(0,h.jsx)(l,{})})]})};var ye=s(2233),fe=s(351),ve=s(7308);const Ae=e=>{let{music:t}=e;return(0,h.jsxs)("section",{className:"music-player",children:[(0,h.jsx)("img",{className:"music-player__cover",src:t.coverURL}),(0,h.jsx)(ve.Z,{videoId:t.videoId,id:"youtube",opts:{height:"1",width:"1",playerVars:{autoplay:1}}}),(0,h.jsx)("div",{className:"music-player__info",children:(0,h.jsx)("p",{children:(t.title+" - "+t.artist+"        ").repeat(10)})})]})},be=e=>{let{post:t}=e;return(0,h.jsxs)("section",{className:"post",children:[(0,h.jsx)("img",{className:"post__image",src:t.imageURL}),(0,h.jsxs)("div",{className:"post__description",children:[t.music&&(0,h.jsx)(Ae,{music:t.music}),(0,h.jsx)("h1",{children:t.title}),(0,h.jsx)("p",{children:t.content})]})]})};var je=s(9451),Ze=s(5945),ze=s(4469),Se=s(9093),Ie=s(2731);const Ee={regex:/[\s\S]{1,100}/,condition:"공백 포함 100자로 입력해주세요"},Me={regex:/^[1-9]\d*$/,condition:"게시물 식별자(숫자)가 올바르지 않습니다"};var Le=s(8891),Be=s(6738),Ye=s(4813);const Te=e=>{let{postId:t,onSuccess:s,onError:o}=e;const{mutateAsync:i}=function(e){const t=(0,Ze.NL)();return(0,ze.D)((e=>Se.Z.post("/post/comment",e)),{onSuccess:s=>{t.invalidateQueries(["comment-list",{postId:e}]),Ie.Z.addToast("success",s.message)},onError:e=>{Ie.Z.addToast("error",e.message)}})}(t);return(0,h.jsxs)(Le.Z,{className:"comment-form",onSubmit:e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget,n=function(e){const t=e.get("content");if(!Ee.regex.test(t))return{result:!1,reason:Ee.condition};const s=e.get("postId");return Me.regex.test(s)?{result:!0,data:{content:t,postId:parseInt(s)}}:{result:!1,reason:Me.condition}}(new FormData(t));n.result?i(n.data).then((()=>{t.reset(),s&&s()})).catch((()=>{o&&o()})):Ie.Z.addToast("error",n.reason)},children:[(0,h.jsx)("input",{type:"hidden",name:"postId",value:t}),(0,h.jsx)(Be.Z,{label:"감상문",name:"content",initialValue:""}),(0,h.jsx)(Ye.Z,{type:"submit",text:"생성"})]})},Oe=["styles"];function Ce(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function Re(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ce(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const Ke=e=>{let{styles:t={}}=e,s=(0,a.Z)(e,Oe);return(0,h.jsx)("svg",Re(Re({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s),{},{children:(0,h.jsx)("path",{fill:"currentColor",d:"M6 7H5v13a2 2 0 002 2h10a2 2 0 002-2V7zm4 12H8v-9h2zm6 0h-2v-9h2zm.618-15L15 2H9L7.382 4H3v2h18V4z"})}))},Ve=e=>{let{postId:t,comment:s,user:i}=e;const[n,r]=(0,o.useState)(!1),{mutateAsync:a}=function(e,t){const s=(0,Ze.NL)();return(0,ze.D)((()=>Se.Z.delete("/post/comment/".concat(t))),{onSuccess:t=>{s.invalidateQueries(["comment-list",{postId:e}]),Ie.Z.addToast("success",t.message)},onError:e=>{Ie.Z.addToast("error",e.message)}})}(t,s.commentId);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"comment-item",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("b",{children:s.nickname}),"  ",s.content]}),(0,h.jsx)("p",{children:new Date(s.createdDate).toLocaleDateString()}),s.nickname===i.nickname&&(0,h.jsx)("button",{type:"button",onClick:()=>{r(!0)},"aria-label":"댓글 삭제",children:(0,h.jsx)(Ke,{})})]}),(0,h.jsx)(fe.Z,{isOpen:n,onClose:()=>r(!1),children:(0,h.jsxs)("div",{className:"comment-item__delete",children:[(0,h.jsx)("p",{children:"댓글을 삭제하시겠습니까?"}),(0,h.jsx)(Ye.Z,{text:"삭제",direction:"right",onClick:()=>{a().then((()=>{r(!1)}))}})]})})]})};var ke=s(966);const We=e=>{let{postId:t}=e;const{data:s,isLoading:o,isError:i}=(0,ke.bT)(),{data:n,isLoading:r,isError:a}=function(e){return(0,je.a)(["comment-list",{postId:e}],(()=>Se.Z.get("/post/comment/list/".concat(e))),{onSuccess:()=>{},onError:e=>{Ie.Z.addToast("error",e.message)},select:e=>e.data})}(t);return i||a?null:o||r?(0,h.jsx)(ye.Z,{}):(0,h.jsxs)("section",{className:"comment-list",children:[(0,h.jsx)("ol",{className:"comment-list__list",children:n.map((e=>(0,h.jsx)("li",{children:(0,h.jsx)(Ve,{postId:t,comment:e,user:s})},e.commentId)))}),(0,h.jsx)(Te,{postId:t})]})},qe=e=>{let{post:t}=e;return(0,h.jsxs)("article",{className:"post-detail",children:[(0,h.jsx)(be,{post:t}),(0,h.jsx)(We,{postId:t.postId})]})};var Ne=s(7103),Ue=s(5804),Xe=s(5980);function Fe(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}new y.AO(1,0,0);const De=new y.AO(0,1,0),Pe=(new y.AO(0,0,1),new y.AO),Je=new f.Pa4(0,-1,0),Qe=new f.Pa4,Ge=new y._f,He=new f._fP;var _e=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakMap,st=new WeakMap,ot=new WeakMap;class it{constructor(e,t,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.6;Fe(this,_e,{writable:!0,value:void 0}),Fe(this,$e,{writable:!0,value:new f.iMs}),Fe(this,et,{writable:!0,value:0}),Fe(this,tt,{writable:!0,value:1.6}),Fe(this,st,{writable:!0,value:0}),Fe(this,ot,{writable:!0,value:.8}),(0,r.Z)(this,"enabled",!0),(0,r.Z)(this,"floors",[]),this.canvas=e,this.camera=t,this.world=s,this.height=o;const i=new y.xu(new y.AO(.2,o/2,.2));(0,Xe.Z)(this,_e,new y.uT({mass:40,position:new y.AO(this.camera.position.x,this.camera.position.y-o/2,this.camera.position.z),shape:i,fixedRotation:!0}));const n=new y._f,a=new y._f,h=new y._f;n.setFromAxisAngle(new y.AO(1,0,0),this.camera.rotation.x),a.setFromAxisAngle(new y.AO(0,1,0),this.camera.rotation.y),h.setFromAxisAngle(new y.AO(0,0,1),this.camera.rotation.z),(0,Ue.Z)(this,_e).quaternion.copy(n.mult(a).mult(h)),this.world.addBody((0,Ue.Z)(this,_e));const c=this.onKeyDown.bind(this),d=this.onKeyUp.bind(this);window.addEventListener("keydown",c),window.addEventListener("keyup",d),this.dispose=()=>{this.world.removeBody((0,Ue.Z)(this,_e)),window.removeEventListener("keydown",c),window.removeEventListener("keyup",d)}}setPosition(e,t,s){(0,Ue.Z)(this,_e).position.x=e,(0,Ue.Z)(this,_e).position.y=t,(0,Ue.Z)(this,_e).position.z=s}setQuaternion(e,t,s){(0,Ue.Z)(this,_e).quaternion.x=e,(0,Ue.Z)(this,_e).quaternion.y=t,(0,Ue.Z)(this,_e).quaternion.z=s}set movementSpeed(e){e>1?(0,Xe.Z)(this,et,1):e<-1?(0,Xe.Z)(this,et,-1):(0,Xe.Z)(this,et,e)}set maxMovementSpeed(e){e>0?(0,Xe.Z)(this,tt,e):(0,Xe.Z)(this,tt,1.6)}set lookSpeed(e){e>1?(0,Xe.Z)(this,st,1):e<-1?(0,Xe.Z)(this,st,-1):(0,Xe.Z)(this,st,e)}set maxLookSpeed(e){e>0?(0,Xe.Z)(this,ot,e):(0,Xe.Z)(this,ot,1.6)}onKeyDown(e){if(this.enabled)switch(e.code){case"ArrowUp":case"KeyW":e.preventDefault(),(0,Xe.Z)(this,et,1);break;case"ArrowLeft":case"KeyA":e.preventDefault(),(0,Xe.Z)(this,st,1);break;case"ArrowDown":case"KeyS":e.preventDefault(),(0,Xe.Z)(this,et,-1);break;case"ArrowRight":case"KeyD":e.preventDefault(),(0,Xe.Z)(this,st,-1)}}onKeyUp(e){switch(e.code){case"ArrowUp":case"KeyW":case"ArrowDown":case"KeyS":(0,Xe.Z)(this,et,0);break;case"ArrowLeft":case"KeyA":case"ArrowRight":case"KeyD":(0,Xe.Z)(this,st,0)}}update(e){if(!this.enabled)return;(0,Ue.Z)(this,$e).set(this.camera.position,Je);const t=(0,Ue.Z)(this,$e).intersectObjects(this.floors);for(const e of t){(0,Ue.Z)(this,_e).position.y+=this.height-e.distance;break}if((0,Ue.Z)(this,_e).velocity.set(0,0,0),(0,Ue.Z)(this,et)){const e=1e4*(0,Ue.Z)(this,et)*(0,Ue.Z)(this,tt);this.camera.getWorldDirection(Qe).normalize().multiplyScalar(e),(0,Ue.Z)(this,_e).applyForce(Pe.set(Qe.x,Qe.y,Qe.z))}if((0,Ue.Z)(this,st)){const t=e*(0,Ue.Z)(this,st)*(0,Ue.Z)(this,ot);Ge.setFromAxisAngle(De,t);const s=(0,Ue.Z)(this,_e).quaternion;(0,Ue.Z)(this,_e).quaternion.copy(s.mult(Ge,s))}this.camera.position.x=(0,Ue.Z)(this,_e).position.x,this.camera.position.y=(0,Ue.Z)(this,_e).position.y+this.height,this.camera.position.z=(0,Ue.Z)(this,_e).position.z,this.camera.quaternion.copy(He.set((0,Ue.Z)(this,_e).quaternion.x,(0,Ue.Z)(this,_e).quaternion.y,(0,Ue.Z)(this,_e).quaternion.z,(0,Ue.Z)(this,_e).quaternion.w))}}function nt(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}const rt=new f.FM8(0,0);var at=new WeakMap;class ht{constructor(e,t){nt(this,at,{writable:!0,value:new f.iMs}),(0,r.Z)(this,"enabled",!0),(0,r.Z)(this,"rayItems",[]),this.canvas=e,this.camera=t;const s=this.onKeyDown.bind(this);window.addEventListener("keydown",s);const o=document.createElement("div");o.id="target",this.canvas.parentNode.insertBefore(o,e.nextSibling),this.dispose=()=>{window.removeEventListener("keydown",s);const e=document.getElementById("target");e&&e.remove()}}shoot(){if(this.raycast){(0,Ue.Z)(this,at).setFromCamera(rt,this.camera);const e=(0,Ue.Z)(this,at).intersectObjects(this.rayItems);for(const t of e){this.raycast(t);break}}}onKeyDown(e){if(this.enabled)switch(e.code){case"Space":e.preventDefault(),this.shoot();break;case"Escape":e.preventDefault(),this.onEsc&&this.onEsc()}}}var ct=s(7458);const dt={1:ge,2:$},pt=e=>{let{gallery:t,postList:s}=e;const i=(0,o.useRef)(null),n=(0,o.useRef)(null),r=(0,o.useRef)(null),[a,c]=(0,o.useState)(0),[d,p]=(0,o.useState)(0),[l,m]=(0,o.useState)(null);(0,o.useEffect)((()=>{if(!t||!s)return;const e=i.current,o=new f.lLk;o.onStart=function(){c((e=>e+1))},o.onLoad=function(){p((e=>e+1))},o.onError=function(e){Ie.Z.addToast("error","필요한 자원을 로드하지 못했습니다")};const a=new ct.T({canvas:e,antialias:!0}),h=new f.xsS,d=new Ne.R({canvas:e});h.add(d);const l=new y.q3;l.broadphase=new y.BQ(l);const u=new it(e,d,l,1.6);n.current=u;const g=new ht(e,d);g.raycast=e=>{e.object instanceof T.t&&(e.distance>10?Ie.Z.addToast("error","앨범이 너무 멀리 있습니다"):(m(e.object.order),u.enabled=!1))},g.onEsc=()=>{m(null),u.enabled=!0},r.current=g;const{update:x,dispose:w}=dt[t.place.placeId]({canvas:e,loadingManager:o,renderer:a,scene:h,camera:d,world:l,controls:u,rayControls:g,postList:s}),v=function(){d.setDefaultAspect(),d.updateProjectionMatrix(),a.setDefaultSize(),a.render(h,d)};window.addEventListener("resize",v);const A=new f.SUY,b=function(){const e=A.getDelta();a.render(h,d),a.setAnimationLoop(b),l.step(e<.01?1/120:1/60,e,3),u.update(e),x(e)};return b(),()=>{c(0),p(0),h.remove(d),a.setAnimationLoop(null),a.dispose(),u.dispose(),w(),window.removeEventListener("resize",v)}}),[t,s]);const g=(0,u.Z)(),w=(0,o.useCallback)((()=>{r.current&&r.current.shoot()}),[]),v=(0,o.useCallback)(((e,t)=>{n.current&&(n.current.lookSpeed=-e,n.current.movementSpeed=-t)}),[]);return(0,h.jsxs)("div",{className:"gallery-canvas",children:[(0,h.jsx)("canvas",{ref:i}),(0,h.jsx)(x.Z,{className:"gallery-canvas__loading",isShow:a!==d,duration:1e3,timingFunction:"ease-in-out",children:(0,h.jsx)(ye.Z,{})}),(0,h.jsx)(fe.Z,{isOpen:null!==l,onClose:()=>{m(null),n.current&&(n.current.enabled=!0)},children:null!==l&&(0,h.jsx)(qe,{post:s[l]})}),g&&(0,h.jsx)("div",{className:"gallery-canvas__joystick",children:(0,h.jsx)(we,{control:v,shoot:w})})]})},lt=e=>{let{gallery:t,onEnter:s}=e;const i=(0,o.useRef)(null),n=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const e=i.current,t=n.current,s=(0,xe.Z)((function(s){const{x:o,y:i,width:n,height:r}=e.getBoundingClientRect(),a=s.clientX-o,h=s.clientY-i,c=a-n/2,d=h-r/2,p=Math.sqrt(c**2+d**2);e.style.transform="\n          rotate3d(\n            ".concat(-d/170,",  ").concat(c/170,", 0, ").concat(p/17,"deg\n          )\n        "),e.style.boxShadow="\n          ".concat(-c/10,"px  ").concat(-d/10,"px 20px rgba(0, 0, 0, 0.3)\n        "),t.style.backgroundImage="\n          radial-gradient(\n            circle at ".concat(a,"px ").concat(h,"px, #00000010, #ffffff00, #ffffff70\n          )\n        ")}));return e.addEventListener("mousemove",s),()=>{e.removeEventListener("mousemove",s)}}),[]),(0,h.jsxs)("div",{className:"gallery-cover",children:[(0,h.jsxs)("article",{className:"gallery-cover__content",ref:i,children:[(0,h.jsx)("h1",{children:t.name}),(0,h.jsx)("p",{children:t.content}),(0,h.jsx)(Ye.Z,{text:"입장하기",onClick:s,direction:"center"}),(0,h.jsx)("div",{className:"gallery-cover__content--light",ref:n})]}),(0,h.jsx)("div",{className:"gallery-cover__back"})]})};var ut=s(6207),mt=s(2480);const gt=()=>{const{galleryId:e}=(0,i.UO)(),{data:t,isLoading:s,isError:n}=(0,ut.rp)(parseInt(e)),{data:r,isLoading:a,isError:c}=(0,mt.N)(parseInt(e)),d=(0,u.Z)();(0,o.useEffect)((()=>(d&&Ie.Z.addToast("info","가로모드로 플레이하면 더욱 좋습니다",6e3),()=>{})),[d]);const[p,l]=(0,o.useState)(!0);(0,o.useRef)(null);if((0,o.useEffect)((()=>void 0),[]),!n&&!c)return s||a?(0,h.jsx)(w.Z,{}):(0,h.jsxs)("div",{className:"gallery",children:[(0,h.jsx)(x.Z,{className:"gallery__cover",isShow:p,duration:1300,children:(0,h.jsx)(lt,{gallery:t,onEnter:()=>l(!1)})}),(0,h.jsx)("div",{className:"gallery__navbar",children:(0,h.jsx)(g,{})}),(0,h.jsx)("div",{className:"gallery__canvas",children:(0,h.jsx)(pt,{gallery:t,postList:r})})]})}}}]);