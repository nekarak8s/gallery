"use strict";(self.webpackChunkgallery=self.webpackChunkgallery||[]).push([[62],{367:(e,t,s)=>{s.r(t),s.d(t,{default:()=>$t});var i=s(5466),n=s(1807),a=s(7209),o=s(7355),r=s(5301),c=s(6735),h=s(3823);const d=["styles"];function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const u=e=>{let{styles:t={}}=e,s=(0,c.Z)(e,d);return(0,h.jsx)("svg",p(p({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s),{},{children:(0,h.jsx)("path",{fill:"currentColor",d:"M6.03 4.97L7 4 2 2l2 5 .97-.97 1.82 1.82C2.16 13.13 3.94 20.7 4 21.03l.26.97 1.94-.5-.2-.79 6.82-6.83L16 17.06V19l3 3 1-2 2-1-3-3h-1.94l-3.18-3.18L20.71 6l.79.19.5-1.93-.97-.26c-.33-.06-7.9-1.84-13.18 2.79zM5.78 19.5c-.28-2.05-.5-6.78 2.43-10.23l3.91 3.91zM19.5 5.78l-6.32 6.34-3.91-3.91c3.45-2.93 8.18-2.71 10.23-2.43"})}))},g=["styles"];function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const f=e=>{let{styles:t={}}=e,s=(0,c.Z)(e,g);return(0,h.jsx)("svg",w(w({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),{},{children:(0,h.jsx)("path",{d:"M6.17 12.762c4.715 5.236 9.659 7.176 14.83 5.82-5.138-1.346-8.698-4.647-10.677-9.896L14.077 5H3v10.874l3.17-3.112z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))};var b=s(2561);const v=()=>{const e=(0,b.Z)();return(0,h.jsx)("div",{className:"control-notice",children:e?(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("div",{className:"control-notice__controller",children:(0,h.jsx)("div",{})}),(0,h.jsx)("p",{children:"컨트롤러로 이동"})]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("div",{className:"control-notice__button",children:(0,h.jsx)(f,{})}),(0,h.jsx)("p",{children:"버튼으로 점프"})]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("div",{className:"control-notice__button",children:(0,h.jsx)(u,{})}),(0,h.jsx)("p",{children:"버튼으로 앨범 조준"})]})]}):(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)("kbd",{children:"↑"})," ",(0,h.jsx)("kbd",{children:"↓"})," 키로 앞뒤 이동"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)("kbd",{children:"←"})," ",(0,h.jsx)("kbd",{children:"→"})," 키로 시선 회전"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)("kbd",{children:"Ctrl"}),"  키로 앨범 조준"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)("kbd",{children:"Alt"})," / ",(0,h.jsx)("kbd",{children:"Opt"}),"  키로 점프"]})})]})})},x=()=>{const e=(0,n.s0)();return(0,h.jsx)("nav",{className:"gallery-navbar",children:(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:(0,h.jsx)("button",{"data-cursor-scale":o.D,onClick:()=>{const t=document.referrer;!t||window.history.length<2||new URL(t).host!==window.location.host?e(a._.Home.path):e(-1)},"aria-label":"페이지 뒤로가기",children:"뒤로가기"})}),(0,h.jsxs)("li",{className:"gallery-navbar__notice",children:[(0,h.jsx)("button",{"data-cursor-scale":o.D,"aria-label":"\r 조작법 열기",children:"조작법"}),(0,h.jsx)(v,{})]})]})})},y=s.p+"images/MapleStory-Pantheonce107a003370f566b2df.mp3",Z=s.p+"images/MapleStory-Raindrop-Flower3ed07e7494805aadabe3.mp3";var j=s(3940),A=s(6834),P=s(4599),z=s(3306),O=s(7916),I=s(8609);const k=[{x:20.4,y:2,z:6.09,width:30,height:5,depth:50},{x:32.9,y:2,z:56.09,width:5,height:10,depth:10}],S=[{x:50.4,y:2,z:6.09,width:10,height:.5,depth:35.4}],L=.3,E=[{x:20.55,y:2,z:9.17,width:6,height:12,depth:L,rotationY:(0,O.Id)(-90)},{x:20.55,y:2,z:16.18,width:4,height:8,depth:L,rotationY:(0,O.Id)(-90)},{x:20.55,y:11,z:15.17,width:5.01,height:3,depth:L,rotationY:(0,O.Id)(-90)},{x:55.4,y:-1,z:4.69,width:5,height:11,depth:L},{x:31.47,y:2,z:11.14,width:10,height:5,depth:L,rotationY:(0,O.Id)(-25)},{x:41.27,y:2,z:15.71,width:10,height:5,depth:L,rotationY:(0,O.Id)(-25)},{x:31.47,y:7.5,z:11.14,width:10,height:4,depth:L,rotationY:(0,O.Id)(-25)},{x:41.27,y:7.5,z:15.71,width:10,height:4,depth:L,rotationY:(0,O.Id)(-25)},{x:50.25,y:2,z:19.8,width:8,height:9.5,depth:L,rotationY:(0,O.Id)(-90)},{x:32.91,y:2,z:33.19,width:5,height:3,depth:L},{x:32.4,y:2,z:43.88,width:6,height:5.5,depth:L},{x:18.06,y:-1,z:36.15,width:7,height:10,depth:L,rotationY:(0,O.Id)(-90)},{x:62.98,y:-1,z:27.4,width:15.9,height:9,depth:L,rotationY:(0,O.Id)(-90)},{x:54.83,y:-1,z:43.15,width:8,height:9,depth:L},{x:20.4,y:2,z:55.94,width:12.5,height:8,depth:L},{x:37.9,y:2,z:55.94,width:12.5,height:8,depth:L}],M=[{x:31.52,y:2,z:11.15,width:20.66,height:9.5,depth:.2,rotationY:(0,O.Id)(-25)}],N=[{x:32.4,y:7.5,z:33.03,width:6,height:.2,depth:11}],R=.2,D=[{x:35.4,y:4.5,z:43.98,width:2,height:2,depth:R},{x:18.16,y:5,z:39.64,width:3,height:3,depth:R,rotationY:(0,O.Id)(90)},{x:20.65,y:4,z:18.18,width:1.8,height:1.8,depth:R,rotationY:(0,O.Id)(90)},{x:20.65,y:4.25,z:12.16,width:2.5,height:2.5,depth:R,rotationY:(0,O.Id)(90)},{x:50.15,y:5,z:23.78,width:4,height:4,depth:R,rotationY:(0,O.Id)(-90)},{x:35.4,y:3.6,z:33.29,width:1.5,height:1.5,depth:R},{x:35.4,y:4.5,z:43.78,width:3,height:3,depth:R,rotationY:(0,O.Id)(180)},{x:58.83,y:5,z:43.05,width:3,height:3,depth:R,rotationY:(0,O.Id)(180)},{x:62.88,y:5,z:36.52,width:3,height:3,depth:R,rotationY:(0,O.Id)(-90)},{x:57.9,y:4,z:4.79,width:2,height:2,depth:R}],V=[{width:.1,height:10,depth:50,x:20.4,y:5,z:31.09},{width:40,height:10,depth:.1,x:40.4,y:5,z:6.09},{width:.1,height:10,depth:35.4,x:60.4,y:5,z:23.79},{width:10,height:10,depth:.1,x:55.4,y:5,z:41.49},{width:.1,height:10,depth:14.6,x:50.4,y:5,z:48.79},{width:.1,height:10,depth:10,x:37.9,y:5,z:61.09},{width:5,height:10,depth:.1,x:35.4,y:5,z:66.1},{width:.1,height:10,depth:10,x:32.9,y:5,z:61.09}];var C=s(8469),B=s(7948),T=s(135),W=s(4091),K=s(3666),F=s(1913);class q{constructor(e){var t;(0,r.Z)(this,"textures",{});const s=[];e.ceilingsData.forEach((e=>{let t=e.x,i=e.y,n=e.z,a=e.rotationX||0;const o=e.rotationY||0,r=e.rotationZ||0,c=e.height||0,h=e.width,d=e.depth;let l;t+=h*Math.cos(o)/2,t+=d*Math.sin(o)/2,n-=h*Math.sin(o)/2,n+=d*Math.cos(o)/2,!0===e.isPlane?(a+=Math.PI/2,l=new P._12(h,d)):(i+=c/2,l=new P.DvJ(h,c,d)),l.rotateX(a),l.rotateY(o),l.rotateZ(r),l.translate(t,i,n),s.push(l)}));const i=W.n4(s);if(s.forEach((e=>{e.dispose()})),e.texture&&(this.textures.baseTex=e.texture.textureLoader.load(e.texture.baseImg),e.texture.normalImg&&(this.textures.normalTex=e.texture.textureLoader.load(e.texture.normalImg)),e.texture.roughImg&&(this.textures.roughTex=e.texture.textureLoader.load(e.texture.roughImg)),e.texture.ambientImg&&(this.textures.ambientTex=e.texture.textureLoader.load(e.texture.ambientImg)),e.texture.repeatX||e.texture.repeatY))for(const t in this.textures){const s=this.textures[t];s.wrapS=P.rpg,s.wrapT=P.rpg,s.repeat.x=e.texture.repeatX||1,s.repeat.y=e.texture.repeatY||1}const n=null!==(t=e.texture)&&void 0!==t&&t.roughImg?new P.Wid({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0,roughnessMap:this.textures.roughTex||void 0,roughness:e.texture.roughness||1}):new P.YBo({color:e.color,transparent:e.transparent||!1,opacity:e.opacity,map:this.textures.baseTex||void 0,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0});this.object=new P.Kj0(i,n),this.object.castShadow=!e.transparent,this.object.receiveShadow=!e.transparent}dispose(){(0,F.D)(this.object),this.textures={}}}class Y extends K.I{constructor(){return Y.instance||(super(),Y.instance=this),Y.instance}createItem(e){return new q(e)}}(0,r.Z)(Y,"instance",null);class X{constructor(e){const t=[];e.edgesData.forEach((e=>{const s=new P.DvJ(e.width,e.height,e.depth),i=e.rotationX||0,n=e.rotationY||0,a=e.rotationZ||0;s.rotateX(i),s.rotateY(n),s.rotateZ(a),s.translate(e.x,e.y,e.z),t.push(s)}));const s=W.n4(t);t.forEach((e=>{e.dispose()}));const i=new P.YBo({color:16777215,opacity:0,transparent:!0});this.object=new P.Kj0(s,i)}dispose(){(0,F.D)(this.object)}}class U extends K.I{constructor(){return U.instance||(super(),U.instance=this),U.instance}createItem(e){return new X(e)}}(0,r.Z)(U,"instance",null);var J=s(3761);class H{constructor(e){(0,r.Z)(this,"objects",[]),(0,r.Z)(this,"lights",[]),(0,r.Z)(this,"textures",{}),(0,r.Z)(this,"update",(e=>{this.isAnimation&&this.objects.forEach((t=>{t.rotation.y+=e}))})),(0,r.Z)(this,"dispose",(()=>{this.lights.forEach((e=>{(0,F.D)(e)})),this.objects.forEach((e=>{(0,F.D)(e)})),this.objects=[],this.lights=[],this.textures={}})),this.isAnimation=e.isAnimation||!1,e.normalImg&&(this.textures.normalTex=e.textureLoader.load(e.normalImg)),e.roughImg&&(this.textures.roughTex=e.textureLoader.load(e.roughImg)),e.ambientImg&&(this.textures.ambientTex=e.textureLoader.load(e.ambientImg));for(const t in this.textures)this.textures[t].wrapS=P.rpg,this.textures[t].wrapT=P.rpg,this.textures[t].repeat.x=e.repeatX||1,this.textures[t].repeat.y=e.repeatY||1;e.framesData.forEach(((t,s)=>{if(!e.postList[s].isActive)return;const i=new P.DvJ(t.width,t.height,t.depth),n=e.textureLoader.load(e.postList[s].imageURL),a=e.roughImg?new P.Wid({color:e.color,map:n,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0,roughnessMap:this.textures.roughTex||void 0}):new P.YBo({color:e.color,map:n,normalMap:this.textures.normalTex||void 0,aoMap:this.textures.ambientTex||void 0}),o=new P.Kj0(i,a);if(o.position.set(t.x,t.y,t.z),o.rotation.set(t.rotationX||0,t.rotationY||0,t.rotationZ||0),o.castShadow=!0,o.receiveShadow=!0,o.name="frame",o.userData.isPost=!0,o.userData.idx=s,this.objects.push(o),e.spotLight&&t.width){const s=new P.PMe(e.spotLight.color||16777190,e.spotLight.intensity||4*t.width,e.spotLight.distance||2*t.width,e.spotLight.angle||Math.PI/5.2,e.spotLight.penumbra,e.spotLight.decay||2);s.position.set(e.spotLight.lightOffsetX||0,e.spotLight.lightOffsetY||t.width,e.spotLight.lightOffsetZ||t.width),s.target=o,s.castShadow=!0,o.add(s),this.lights.push(s)}}))}}class Q extends K.E{constructor(){return Q.instance||(super(),Q.instance=this),Q.instance}createItem(e){return new H(e)}}(0,r.Z)(Q,"instance",null);var G=s(6342),_=s(1018),$=s(7468);P.Kj0.prototype.raycast=I.uL;class ee{constructor(){if((0,r.Z)(this,"targets",[]),(0,r.Z)(this,"obstacles",[]),(0,r.Z)(this,"floors",[]),(0,r.Z)(this,"scene",null),(0,r.Z)(this,"items",[]),(0,r.Z)(this,"lights",[]),(0,r.Z)(this,"lightInterval",null),ee.instance)return ee.instance;ee.instance=this}build(e){this.dispose(),this.scene=e.scene;const t=new P.dpR(e.loadingManager);e.controls.setPosition(35,12,62),e.controls.setQuaternion(0,(0,O.Id)(180),0);const s=(new G.Z).addItem({container:e.scene,size:2e3});this.items.push(s);const i=(new $.Z).addItem({container:e.scene,textureLoader:t,width:1e3,depth:1e3,distortionScale:3});this.items.push(i);const n=(new J.Z).addItem({color:6842472,container:e.scene,floorsData:k,textureLoader:t,floorBaseImg:B.Z,texture:{textureLoader:t,baseImg:B.Z,repeatX:k[0].width/3,repeatY:k[0].depth/3}});this.items.push(n),this.floors.push(n.object);const a=(new J.Z).addItem({container:e.scene,color:16777215,floorsData:S,transparent:!0,opacity:.4});this.items.push(a),this.floors.push(a.object);const o=(new Y).addItem({container:e.scene,color:16777215,ceilingsData:N,texture:{textureLoader:t,baseImg:C.Z,repeatX:N[0].width/10,repeatY:N[0].depth/10}});this.items.push(o);const r=(new _.Z).addItem({container:e.scene,wallsData:E,repeatX:1,repeatY:.8,texture:{textureLoader:t,baseImg:C.Z}});this.items.push(r),this.targets.push(r.object),this.obstacles.push(r.object);const c=(new _.Z).addItem({container:e.scene,color:16777215,wallsData:M,transparent:!0,opacity:.2});this.items.push(c),this.targets.push(c.object),this.obstacles.push(c.object);const h=(new U).addItem({container:e.scene,edgesData:V});this.items.push(h),this.obstacles.push(h.object);const d=new Date,l=(0,T.cW)(d),p=new P.Ilk((0,T.gO)(d)),u=new P.Pa4,{elevation:g,azimuth:m}=(0,T.F4)(d),w=P.M8C.degToRad(90-g),f=P.M8C.degToRad(3*g),b=P.M8C.degToRad(m-25);u.setFromSphericalCoords(1,w,b),s.setSunPosition(u),i.setSunDirection(u);const v=new P.Mig(16777215,.8*l);this.scene.add(v),this.lights.push(v);const x=new P.Ox3(p,1.8*l);x.position.set(100*Math.sin(b),500*Math.sin(f),100*Math.cos(b)),x.shadow.camera.left=-60,x.shadow.camera.right=60,x.shadow.camera.top=60,x.shadow.camera.bottom=-100,x.castShadow=!0,this.scene.add(x),this.lights.push(x);const y=setInterval((()=>{const e=new Date,{elevation:t,azimuth:n}=(0,T.F4)(e),a=P.M8C.degToRad(90-t),o=P.M8C.degToRad(3*t),r=P.M8C.degToRad(n-25);u.setFromSphericalCoords(1,a,r),s.setSunPosition(u),i.setSunDirection(u);const c=(0,T.cW)(e),h=new P.Ilk((0,T.gO)(e));v.intensity=.8*c,x.color=h,x.intensity=1.8*c,x.position.set(100*Math.sin(r),500*Math.sin(o),100*Math.cos(r)),this.items.forEach((e=>{e instanceof H&&e.lights.forEach((e=>{e.intensity=3*(1-c)+5}))}))}),6e4);this.lightInterval=y;const Z=(new Q).addItem({container:e.scene,textureLoader:t,postList:e.postList,framesData:D,spotLight:{intensity:3*(1-l)+5}});this.items.push(Z),this.targets.push(...Z.objects)}update(e){this.items.forEach((t=>{t.update&&t.update(e)}))}dispose(){this.lightInterval&&clearInterval(this.lightInterval),this.lights.forEach((e=>{this.scene&&this.scene.remove(e),(0,F.D)(e)})),this.items.forEach((e=>{e.dispose&&e.dispose()})),this.lightInterval=null,this.targets=[],this.obstacles=[],this.floors=[],this.items=[],this.lights=[]}}(0,r.Z)(ee,"instance",null);const te=2,se=2,ie=.05,ne=[{x:40,y:1,z:39,width:te,height:se,depth:ie},{x:63,y:4,z:53,width:te,height:se,depth:ie},{x:75,y:3,z:27,width:te,height:se,depth:ie},{x:100,y:1.7,z:40,width:te,height:se,depth:ie},{x:28,y:4,z:66,width:te,height:se,depth:ie},{x:64,y:14.6,z:78,width:te,height:se,depth:ie},{x:83,y:10,z:80,width:te,height:se,depth:ie},{x:37,y:2.4,z:93,width:te,height:se,depth:ie},{x:104,y:-2.6,z:104,width:te,height:se,depth:ie},{x:17,y:1.5,z:28,width:te,height:se,depth:ie}],ae=[{x:70,y:5,z:59}],oe=[{x:45,y:3,z:57}],re=[{x:39,y:2,z:41}];var ce=s(8800);const he=s.p+"images/greenary67467f7f2ab2582acd57.glb";class de{constructor(e){if((0,r.Z)(this,"dispose",(()=>{Object.values(this.objects).forEach((e=>{this.scene.remove(e),(0,F.D)(e)}))})),!e)throw new Error("Cannot be called directly. Uses static 'build' method");this.scene=e.scene,this.objects=e.objects,this.objects.terrain.position.set(55,0,55),this.objects.lake.position.set(55,0,55),this.objects.ocean.position.set(55,0,55),this.objects.edges.position.set(55,0,55),this.objects.trees.position.set(55,0,55),Object.values(this.objects).forEach((e=>{this.scene.add(e)}))}static async build(e,t){const s=await new Promise(((e,s)=>{t.load(he,(t=>e(t)),void 0,s)}));s.scene.traverse((e=>{e instanceof P.Kj0&&(e.geometry.boundsTree=new ce.r(e.geometry))}));const i=s.scene.children[4];i.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0}));const n=s.scene.children[3],a=s.scene.children[2],o=s.scene.children[1],r=s.scene.children[0];return r.traverse((e=>{e.receiveShadow=!0})),new de({scene:e,objects:{terrain:r,lake:o,ocean:a,edges:n,trees:i}})}}const le={srcSet:s.p+"responsive-images/nx-20a6331c60eb2bce-320.png 320w,"+s.p+"responsive-images/nx-17a4a328537513ee-640.png 640w,"+s.p+"responsive-images/nx-1c1643f1278ee4ae-960.png 960w,"+s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png 1024w",images:[{path:s.p+"responsive-images/nx-20a6331c60eb2bce-320.png",width:320,height:320},{path:s.p+"responsive-images/nx-17a4a328537513ee-640.png",width:640,height:640},{path:s.p+"responsive-images/nx-1c1643f1278ee4ae-960.png",width:960,height:960},{path:s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png",toString:function(){return s.p+"responsive-images/nx-34f4082b5eabb2ff-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABuVBMVEVrj9FIXJNhd6y3u894gqR+h6hGWY7BxNZ5oNxFZri6vtJvk9XFx9rU2erNz99HarwyQXM1RXh6hahYbKFue6Q3SYFSY5hxjsHN0uO8xNrJy9rExdV2mdeuw+lDYrO4zuyzyuyEqeGkvunQ2exghMvE0etpjM9Pc8Ll5/ONpNdlcJZXY41wep5KXI5PYZJqdp1uga9LYZp7kbyEja08T4p0hLF/i7FGX5xRaaWdpcKruNWStubJ1OyeuOSSs+TC0u5wlta5y+qSqtdmic1nktarvuNKbr/i6PiftN+DntVKV4NmeqhWZJM7SntecKJEU4Vda5llc513ibJFW5eIkrKtssqprsWMlrVwhLKWo8Vsh7rGzuK0vNTJzuC/wtahuNqPq9/HzeHR1OOZvepxmdlzm9nf4Ovc3elSecjj4u1fi9NXgs52lMucsNfz9//L2fJcfcXx8vvZ3vBaecKnuuL2+P3c4/VUaZ1BTntcapZAVZCRn8RpgLOjrMicqMh2ibZZdLBifrVSbavN1OiJlrqAk76SosZhgbucrtB7l8d8nc1Se8qgwex+m9Tu7PJ6mNK8yOdhidB0g6sm82HCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABmElEQVR4nCXIVVfbABgA0C9Jm4TG6k09bVMD6l7q3uHDrcCA4i4bzgYTdBx+MYfDfbxgsVgsh9uvjoOd4916SQTKROag40Ntb8t7VGw2nkUoLO/uAMdxHRzndnu9oqtcdkFhJV8Ht7tWO2xWT07qTVfZBVRlpSoA9bi2tudkPPvH+w0RwLSQtQtgNm1siv+9pcZR3myiqIWq3W4GJkvabJUNslCperLLJEnaepbgNuNst632A2dO8BRtuVzP0pMAM/wqz7ZfVtc9GWe+6MgIVqsDaKJF0LSBZVl2cXGO/8YwDgZkMhkmaxFGI03o9XraMMfP8IBhBIa1DEajYTad/jeb3p6f18PY5dXY+NT5eOr3FPbnr06n23ooQeoajcVQNB4L3qUmk79ufk7r7uEtmRgJDaiV8dGJuCqRSKIX02HQnkWj+JBaOjoRUWuRkZAKnQxDVKPRDPYFJJGIcliL4EhIFQyDQqHoH+zq7FZKJYEhP44j33u/glyu6P/S1dktkSrVw30+HNEOBD/yx2dKJYFTv8/nV/W+A2/UUtT2oWGlAAAAAElFTkSuQmCC",width:1024,height:1024},pe={srcSet:s.p+"responsive-images/ny-35625e49c2c7ca95-320.png 320w,"+s.p+"responsive-images/ny-bce018cf5cabdff3-640.png 640w,"+s.p+"responsive-images/ny-215a69bae74c3aef-960.png 960w,"+s.p+"responsive-images/ny-c9d4992e3b332582-1024.png 1024w",images:[{path:s.p+"responsive-images/ny-35625e49c2c7ca95-320.png",width:320,height:320},{path:s.p+"responsive-images/ny-bce018cf5cabdff3-640.png",width:640,height:640},{path:s.p+"responsive-images/ny-215a69bae74c3aef-960.png",width:960,height:960},{path:s.p+"responsive-images/ny-c9d4992e3b332582-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/ny-c9d4992e3b332582-1024.png",toString:function(){return s.p+"responsive-images/ny-c9d4992e3b332582-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABGlBMVEU6RW48SHJRW39GUXZveZlueZxca5VWX4L///9dZohNVnpyfJ16hKN9iKdMV35ncZM1QWtjbI5AS3JXYodeaIt2gJ9PYZBccqL5+/9lb5BDTnlJU3lBTHRqdJRtdpdlcpmFkbB2gKFXbJ1SZZacp8O2v9fs8f40QXBMW4p1gqWNmrqXobxfd6l7j7hifLCLnsSirsrL0ebW3O+5x+Pm7PxhcZuDjatoeKFwfJ+KlbKPmbVqdpxwgalnfKtpgrKossuuuNGFoM1rh7re4vOfsta3w992ksOsvd/M1/Dc5PpNWYNWYo5eaZBFUoB5iK18jK9jeKZVZJKTo8aaqcyisdLv8/7FzOGGl7zw9v/S3PKZsNmUrtnB0e68yuf6HmOhAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABX0lEQVR4nD3K5W7CABiF4a/GoEqFKqWlgmspw23AcJswv//bWMqSPX9O8ubAeTQa1Wrjh8fZ1+p78x6Px9UcOIqiVCq1h8fZ52odqlEMwXUdR7nFResjdztuQJZd11Eq42p90QpyqqrmNmsoyLLrKOdxtf6yDMLX13C+/gFZvlxi7c6wWm/4zWA+D5qtFcQi7c7wVPKmy2uzeV2uFjAYWJY16BZPvXJj6vu+P315hmy2SxBEt8jY/bLXmEwmjecnYOgsRRBUimbue/1y2fO8pzrQdIrCMziVirLd65dKpTeIksmZZgbHb3fbtquAZ0yN53le0zTOxFM0wxyPwPGSlPgj8RxOZYvFISTEu3+ixGUIgujAlmVJFkVRlCRJVJQ0zrLaoOs6ZpAkSRoYZqCitN/HYoAgiJDGMAxLC0LaYFFR3O0gnwdAEEEQEAAQdIPdFgqQzyeTSYhEi6T1w6HwC9hINFv5fHpIAAAAAElFTkSuQmCC",width:1024,height:1024},ue={srcSet:s.p+"responsive-images/nz-c22c06273cdcffa8-320.png 320w,"+s.p+"responsive-images/nz-2c122b555d9981da-640.png 640w,"+s.p+"responsive-images/nz-187d46c6aa6af033-960.png 960w,"+s.p+"responsive-images/nz-1395c33711ce10a2-1024.png 1024w",images:[{path:s.p+"responsive-images/nz-c22c06273cdcffa8-320.png",width:320,height:320},{path:s.p+"responsive-images/nz-2c122b555d9981da-640.png",width:640,height:640},{path:s.p+"responsive-images/nz-187d46c6aa6af033-960.png",width:960,height:960},{path:s.p+"responsive-images/nz-1395c33711ce10a2-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/nz-1395c33711ce10a2-1024.png",toString:function(){return s.p+"responsive-images/nz-1395c33711ce10a2-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABLFBMVEUuPWw8Waw8W69BYrYyRHzAw9c0QWwuPnEwPmw5V6owPWlBXq0vP3RKbcBGabyyt80+XrNPcsJGa75KcsW4vM6qv+I7Sn0/XbFte6h3i7ZTeci1uc+Qo8Zhh8+ElLqZtuFynNq2xuQ3VKg1Q3IwQnlDZbk0SII8T4lJW5BkdqVWa6O/w9JMYZvEyNm8v9HJzt/DxdWLp9u8yeM4Rnc/YLVBUIE8UItAU448UpHU1+ZYgc3f3+lVcq5mj9O6yunM1OXExtqirsugtd/U2uxIV4hCU4lYZpabpsNwi7xecKSjqsPc4/KUp8qFq+B+pd2txulOZ6THydptjs9zj8B8nNecq8uVq9qwxOSiu+B2hKxqg7ZvgrE1SohAV5nIydeUst94mtXI0OW4x+GHmL1dQ6jgAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaElEQVR4nCXKV3aCUBRA0UvRBwhPERBQQFDBXmPs3ajpibGmt/nPIUuyP886ILhNkk2lUiwRCoVCBMsSpAqigJsEm2L9SBAEqVIUmKLgRkjiNKgkqUYoF0dhZMYFTEVUNUJRVNN1sSBI0J09xaUoxqKIMcaCKMbNLSizrdnrSU/zfVSSpHivN6wrcHd/dz8cftXr5mxWd/a2bdsKPDzc3Iw+5/Ok3XAOI6eRTCYV6Pe73f54XG0oR0c5Hn6cxvcYqtV1ufZRDtRqAd9ksp5AuRwoViqyLIdPEgm5EqjAulYsFsNy+NowprfGbrqbhmW4NRKJlb661geWpf9a1uVmY8Dli/5aKOU1raTlr7SrwuNgYIGeL5Q6rVZumVu0su12p/P+qMFzIZf1aDp2HqPpDE173lu7BPlc1svwCKXTCCGe5zO0l4XlInbGIwAGfAjxGRouzmNnaYbjOI458fN/DAY5jgv6GIZBfyl3NQ6I24g7AAAAAElFTkSuQmCC",width:1024,height:1024},ge={srcSet:s.p+"responsive-images/px-bae1c81a4f92e0f5-320.png 320w,"+s.p+"responsive-images/px-859de15a93ebb92e-640.png 640w,"+s.p+"responsive-images/px-0a24c6c92ac21dda-960.png 960w,"+s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png 1024w",images:[{path:s.p+"responsive-images/px-bae1c81a4f92e0f5-320.png",width:320,height:320},{path:s.p+"responsive-images/px-859de15a93ebb92e-640.png",width:640,height:640},{path:s.p+"responsive-images/px-0a24c6c92ac21dda-960.png",width:960,height:960},{path:s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png",toString:function(){return s.p+"responsive-images/px-ad2a02e3e31009f3-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABklBMVEX////a5vv2/P/R4Pj9///F5//t9//5/v/y+//H2PRebZvz+P+22P+u0PuFmsKavu7s8vyoxe7Izt+73v/P7v9SYZHW9P/C5P/a9/9nfK3I6P9xh7VqhLmkvujO4fqRsuKewvLj7f2swOWlwurB1fCFruXP1uZhhs6nzvtkd6S6ze6IrNx0lcp+nc95k8Pu/f+Yst1ecJ9+odRoeqhxgavn9f+nyfbK2vXP3PaLl7nV4fmUueqWosPZ6v+KmsC/3f93oN5dgcqft+KmtdLT2urm6fW/x9zo7frZ3+6wyO7O2/KIn8mv1f+Hptd2jry3y+5YaJbA4f/f9P/U7f9ogbJ7jLTe8/+YuOOPqNLb8P94hayhxvSPteqNo8ydsNSaqsy2xuHF1vKap8bB0u2xu9Zki9Fqk9RXecdumNmAp+Gxwdrg4u7Dy9x1l9b6+/6Ak7uBmcWXrNOyzPFMW4rL7P9ui8BVZJTk+/9ujcNfcqJujsSfrs6QmrpQccGrvtzT09660fPr6PC9zuu0zvKozPjF0udu90VaAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVR4nB3K1VYCARRA0TtdMEENLR0qAhICIt3YqNiFLWJ364+7xvO41wGj0WDQydrpgDrp2CwcHRaLx+9gNBp0OkI7HdhwCN7CyaHfXzwGCg0v3hFaVcAhbJ4WTi6O/P4LoCmUNhALKnVSmPQ2baelkqsOCZIiO2ZZq1JvCJNfQnMwgCqEFztm2Swrq0OSGDHT+nFB+HFlTUcQcl6ltov1VNM95PUCReE4naBXzPn8FPIrtVpuZg8AcBwHik6sTTmdEx5Pr/F9Dko4TqEoyonV80bF59NoAP8nmhPFerVR8Wn6mn5NIZrjSCfG9Cq+3Y+zs9pnH0iSExE74nF3I7u17dVyeeugDB07xtxIUndkPLR98Lqzs8/neLBP7M25u0Mj46MvYzyfy+5nsznAUsywTbEnq9VqsSyn029pyGAKzoRG761LJlMsFo+vrwOCMXO2yExobNayZAo+R6MsywKSYYZdkdX21eWsxRSMsvMPej04kVTPVbreavOXy/FYkJ3X62//AF+qSZB1yMYyAAAAAElFTkSuQmCC",width:1024,height:1024},me={srcSet:s.p+"responsive-images/py-4f1502ffdb432f32-320.png 320w,"+s.p+"responsive-images/py-5cb42a7b2b045c5e-640.png 640w,"+s.p+"responsive-images/py-c0c9c3bdbc23284e-960.png 960w,"+s.p+"responsive-images/py-536e612a4e05107f-1024.png 1024w",images:[{path:s.p+"responsive-images/py-4f1502ffdb432f32-320.png",width:320,height:320},{path:s.p+"responsive-images/py-5cb42a7b2b045c5e-640.png",width:640,height:640},{path:s.p+"responsive-images/py-c0c9c3bdbc23284e-960.png",width:960,height:960},{path:s.p+"responsive-images/py-536e612a4e05107f-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/py-536e612a4e05107f-1024.png",toString:function(){return s.p+"responsive-images/py-536e612a4e05107f-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABHVBMVEX////p7vrV3O9uktL8///1+f76/P/+//85Vafe+v+q0Pz4+/8+WqpFYK/J1O3d4vOBqeK94P+Rtei83f90mNU9Wa1CYLI8V6o0UaVnisxie7zz9v3i5/Z/lMmlt95KZrDu///a9f9+o93m/v+dwvLR7/+SuexIaruKq+BAXq7h7fzc5PbU5fudrNWzvd/Q1+uFmMt4jcXEzuiIsOd6oNx4nNmgyPf2///M7P9NccC42f78/f5Qa7Tw8/xqgr7O2vG/1PPm6/rU4fWWrdpce765xeKXv/Hm9f+x1f59ndZbgcqEotmzw+axz/dRd8Rxj8vt8PpVcri9yufW8/+nzPpDZLjF5f+mxu/b7f+qvuSoxO6Yst6Oo9RyisR4ls0REqdiAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABY0lEQVR4nCXK51biUABF4ZPkpt4USAKkR3ongFKkVxW7TrFMef/HmBVn//zWRjNXkNJUVZUkx5Fy+R91fKGjLQ6eWnCc5mqRr18inysUJC3s9qJYVb1uL6ynqGla3GV7zHAhDZZsoj9dPsLL57w+a4Tzo9ZcGayx3D/eIhn2X3rL4SBaxfGfLaV0bXPgBXbwGsThceC9hM/+sy+0TAT67z3LdPuJkTwdooA1KP8Jhur322M/ETF03cgPArFTA+ZtndEPBnZ/9w3G3zKUdEAEtH094rF+Fds7nicgHQhgPta/tqCbHeY8QN9nCtA+ufbdprV56FBeFMFbNwruTy53aphvD7NWi4IQallZ3LqcXWrUKopVvQaIIFz/zILj7FHGrIxvslOZACIm1Sk4e1RqmJXvs2lVngAAKRcxuihlzmsVJVssymcpimcyUjOvxv+RfJ0yLjKZ89rVWLGq34rlVCdl+R9XUTDbHdeBoAAAAABJRU5ErkJggg==",width:1024,height:1024},we={srcSet:s.p+"responsive-images/pz-216cb017c0e94d9d-320.png 320w,"+s.p+"responsive-images/pz-9ed7df739785641c-640.png 640w,"+s.p+"responsive-images/pz-9d728e683939bdf8-960.png 960w,"+s.p+"responsive-images/pz-2cda9314f34a285e-1024.png 1024w",images:[{path:s.p+"responsive-images/pz-216cb017c0e94d9d-320.png",width:320,height:320},{path:s.p+"responsive-images/pz-9ed7df739785641c-640.png",width:640,height:640},{path:s.p+"responsive-images/pz-9d728e683939bdf8-960.png",width:960,height:960},{path:s.p+"responsive-images/pz-2cda9314f34a285e-1024.png",width:1024,height:1024}],src:s.p+"responsive-images/pz-2cda9314f34a285e-1024.png",toString:function(){return s.p+"responsive-images/pz-2cda9314f34a285e-1024.png"},placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABQVBMVEX////5///1/P/d+v/y+P/a+P/v///+///8///3///f6//M7f/i7v/S4vuNrdzZ6v/o8P7d7//y///l/f/o/v/f+f/o9v9yk8mx1v/i8f+mxvDs8v3W9P/c6f7F5/9qisLs+v+2zfBlgri/3f+buOSittu/2vzF1/XN2/Po7fnK3vjy/f/U8v+63v+hvOSfyPjP4v7A4f+Dn85yhbDF2vnL5v95ms6DlbuNoMWFmsGXwPOuvNmWpsbH4P631fupwuery/Xa4vLa5vqPue6xye+/1PLv9f+o0P1+oNO22//V5/+Trdfi+/9vibppgbGly/t7jrff9f9+lsOWqc6ouNjN1OWNptCDpNams9Hd8v/g4u2Ts+Hi6PXF1u29zejP6P/k6POevuyZvOqEsOmCpdfZ3Omksc61xeKHpdTC2POqvuHjs08HAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABbUlEQVR4nC3K11bCUBQE0JPKuSGdECCIBOlFpBfpCNiwoIKCHSv//wOusJy32TMwVq2Po8OD49OiO8d5eKIbUy8M6eAW/fu77hzjMaZTZgcGKmaODg+utsgxXobjspAKsij2r/ynxV13bodzjIJRRkVa7fidp017GS8BGkbvlqR0o9Fi1Z3LouEhSAisLavf7UZfWZzNkPAGz+s6JMeVYSHRedXM6czgdZ1yAcJbehgSFE1Z2nyWoAu2Wb09pYMTlqX++zZfq8HgKZ0OsgQRAFzgjPP5y3PqebPJaFqApSmkEBHu4vGfXizfG0uJhBJYmjZNbCiVFvG4LD++pPoRQaxWNdPUoNm4bbXOf+9jvbUliZ3omRlQoNl+aN0tarV7+fE9WagkCmIgBM3298Ptjc9X+5RjkUqmcKYIIag32o2bi3DYdyLHRklJEEUhBNf1+vXF3p6D+UhKmLATVYByuXx56WDpPB+RVBqRVf8A5i46Iamne3cAAAAASUVORK5CYII=",width:1024,height:1024};var fe=s(8231),be=s(5804),ve=s(5980);function xe(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}P.Kj0.prototype.raycast=I.uL;const ye=new P.Pa4(0,-1,0);var Ze=new WeakMap,je=new WeakMap,Ae=new WeakMap,Pe=new WeakMap,ze=new WeakMap,Oe=new WeakMap,Ie=new WeakMap,ke=new WeakMap;class Se{constructor(e){(0,r.Z)(this,"floors",[]),(0,r.Z)(this,"obstacles",[]),xe(this,Ze,{writable:!0,value:new P.iMs}),xe(this,je,{writable:!0,value:new P.Pa4}),xe(this,Ae,{writable:!0,value:Date.now()}),(0,r.Z)(this,"movementSpeed",1),(0,r.Z)(this,"rotateSpeed",3),(0,r.Z)(this,"pausingPeriod",5),(0,r.Z)(this,"walkingPeriod",7),(0,r.Z)(this,"rotatingPeriod",.5),xe(this,Pe,{writable:!0,value:0}),xe(this,ze,{writable:!0,value:0}),xe(this,Oe,{writable:!0,value:0}),xe(this,Ie,{writable:!0,value:void 0}),xe(this,ke,{writable:!0,value:void 0}),this.species=e,(0,ve.Z)(this,Ie,"pause"),this.species.actions.idle.play(),(0,ve.Z)(this,ke,this.species.actions.idle),(0,be.Z)(this,Ze).far=5,(0,be.Z)(this,Ze).firstHitOnly=!0}fadeToAction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;const s=(0,be.Z)(this,ke);(0,ve.Z)(this,ke,e),s!==(0,be.Z)(this,ke)&&(s&&s.fadeOut(t),(0,be.Z)(this,ke).reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(t).play())}pause(){(0,ve.Z)(this,Ie,"pause"),(0,ve.Z)(this,Pe,0),this.pausingPeriod=(0,fe.s)(3,7),this.fadeToAction(this.species.actions.idle)}walk(){(0,ve.Z)(this,Ie,"walk"),(0,ve.Z)(this,ze,0),this.walkingPeriod=(0,fe.s)(8,12),this.fadeToAction(this.species.actions.walk)}turn(){(0,ve.Z)(this,Ie,"turn"),(0,ve.Z)(this,Oe,0),this.rotatingPeriod=(0,fe.s)(.1,.3),this.fadeToAction(this.species.actions.idle)}swim(){(0,ve.Z)(this,Ie,"swim"),this.fadeToAction(this.species.actions.swim)}update(e){this.species.mixer.update(e),(0,be.Z)(this,Ze).set(new P.Pa4(0,this.species.size.height/2,0).add(this.species.object.position),ye);let t=(0,be.Z)(this,Ze).intersectObjects(this.floors);if(t.length){const e=t[0].distance;this.species.object.position.y+=this.species.size.height/2-e}if("swim"===(0,be.Z)(this,Ie)&&this.species.object.position.y>-.8&&this.walk(),this.species.object.position.y<-.8&&(this.species.object.position.y=-.8),"pause"===(0,be.Z)(this,Ie))return(0,ve.Z)(this,Pe,(0,be.Z)(this,Pe)+e),void((0,be.Z)(this,Pe)>this.pausingPeriod&&this.walk());if("turn"===(0,be.Z)(this,Ie)){(0,ve.Z)(this,Oe,(0,be.Z)(this,Oe)+e);const t=e*this.rotateSpeed;return this.species.object.rotateY(t),void((0,be.Z)(this,Oe)>this.rotatingPeriod&&(this.species.object.position.y>-.8?this.walk():this.swim()))}if("walk"===(0,be.Z)(this,Ie)){if((0,ve.Z)(this,ze,(0,be.Z)(this,ze)+e),(0,be.Z)(this,ze)>this.walkingPeriod)return void((0,fe.s)(0,1)<.5?this.pause():this.turn());if(this.species.object.position.y<-.8)return this.species.object.position.y=-.8,void this.swim()}if(Date.now()>(0,be.Z)(this,Ae)+200&&(this.species.object.getWorldDirection((0,be.Z)(this,je)),(0,be.Z)(this,Ze).set(this.species.object.position,(0,be.Z)(this,je)),t=(0,be.Z)(this,Ze).intersectObjects(this.obstacles),(0,ve.Z)(this,Ae,Date.now()),t.length>0&&t[0].distance<.5))return void this.turn();const s=this.movementSpeed*e;this.species.object.translateZ(s)}dispose(){(0,F.D)(this.species.object)}}P.Kj0.prototype.raycast=I.uL;class Le{async addAnimal(e){const t=await this.createAnimal(e.gltfLoader);t.species.object.traverse((e=>{e instanceof P.Kj0&&(e.geometry.boundsTree=new ce.r(e.geometry))})),e.scene.add(t.species.object),t.species.object.position.set(e.position.x,e.position.y,e.position.z),t.species.object.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z);const s=t.dispose.bind(t);return t.dispose=()=>{e.scene.remove(t.species.object),s()},t}}const Ee=s.p+"images/duck7344b8618e8b99fed4d8.glb";class Me{static async build(e){const t=await new Promise(((t,s)=>{e.load(Ee,(e=>t(e)),void 0,s)})),s=t.scene.children[0];s.scale.multiplyScalar(1.5),s.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0}));const i=new P.Xcj(s);i.timeScale=.4;const n=i.clipAction(t.animations[8]),a=i.clipAction(t.animations[17]),o=i.clipAction(t.animations[16]),r=(new P.ZzF).setFromObject(s),{x:c,y:h,z:d}=r.getSize(new P.Pa4);return new Se({object:s,mixer:i,actions:{idle:n,walk:a,swim:o},size:{width:c,height:h,depth:d}})}}class Ne extends Le{constructor(){return Ne.instance||(super(),Ne.instance=this),Ne.instance}createAnimal(e){return Me.build(e)}}(0,r.Z)(Ne,"instance",null);const Re=s.p+"images/fox7d784163861f2c3cdd3f.glb";class De{static async build(e){const t=await new Promise(((t,s)=>{e.load(Re,(e=>t(e)),void 0,s)})),s=t.scene.children[0];s.scale.multiplyScalar(1.5),s.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0}));const i=new P.Xcj(s);i.timeScale=.5;const n=i.clipAction(t.animations[8]),a=i.clipAction(t.animations[17]),o=i.clipAction(t.animations[16]),r=(new P.ZzF).setFromObject(s),{x:c,y:h,z:d}=r.getSize(new P.Pa4);return new Se({object:s,mixer:i,actions:{idle:n,walk:a,swim:o},size:{width:c,height:h,depth:d}})}}class Ve extends Le{constructor(){return Ve.instance||(super(),Ve.instance=this),Ve.instance}createAnimal(e){return De.build(e)}}(0,r.Z)(Ve,"instance",null);const Ce=s.p+"images/sheepa95c15b69d9ae7814b32.glb";class Be{static async build(e){const t=await new Promise(((t,s)=>{e.load(Ce,(e=>t(e)),void 0,s)})),s=t.scene.children[0];s.scale.multiplyScalar(1.5),s.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0}));const i=new P.Xcj(s);i.timeScale=.5;const n=i.clipAction(t.animations[8]),a=i.clipAction(t.animations[17]),o=i.clipAction(t.animations[16]),r=(new P.ZzF).setFromObject(s),{x:c,y:h,z:d}=r.getSize(new P.Pa4);return new Se({object:s,mixer:i,actions:{idle:n,walk:a,swim:o},size:{width:c,height:h,depth:d}})}}class Te extends Le{constructor(){return Te.instance||(super(),Te.instance=this),Te.instance}createAnimal(e){return Be.build(e)}}(0,r.Z)(Te,"instance",null),P.Kj0.prototype.raycast=I.uL;class We{constructor(){if((0,r.Z)(this,"targets",[]),(0,r.Z)(this,"obstacles",[]),(0,r.Z)(this,"floors",[]),(0,r.Z)(this,"scene",null),(0,r.Z)(this,"items",[]),(0,r.Z)(this,"lights",[]),(0,r.Z)(this,"animals",[]),We.instance)return We.instance;We.instance=this}build(e){this.dispose(),this.scene=e.scene;const t=new P.dpR(e.loadingManager),s=new P.cBK(e.loadingManager),i=new z.E(e.loadingManager);e.controls.setPosition(27.1,10,27.1),e.controls.setQuaternion(0,(0,O.Id)(40),0),e.scene.background=s.load([ge,le,me,pe,we,ue]);de.build(e.scene,i).then((e=>(this.floors.push(e.objects.terrain),this.targets.push(e.objects.terrain),this.targets.push(e.objects.trees),this.obstacles.push(e.objects.edges),this.obstacles.push(e.objects.trees),a.target=e.objects.terrain,this.animals.forEach((t=>{t.then((t=>{t.floors.push(e.objects.terrain),t.obstacles.push(e.objects.edges),t.obstacles.push(e.objects.trees)})).catch((e=>{}))})),this.items.push(e),e)));const n=new P.Mig("white",.8);e.scene.add(n),this.lights.push(n);const a=new P.Ox3("white",1.8);a.position.set(0,110,110),a.shadow.camera.left=-60,a.shadow.camera.right=60,a.shadow.camera.top=60,a.shadow.camera.bottom=-100,a.castShadow=!0,e.scene.add(a),this.lights.push(a),ae.forEach((t=>{const s=(new Ve).addAnimal({scene:e.scene,gltfLoader:i,position:{x:t.x,y:t.y,z:t.z},rotation:{x:0,y:(0,O.Id)((0,fe.s)(0,3)),z:0}});this.animals.push(s),s.then((e=>{this.items.push(e)})).catch((e=>{}))})),oe.forEach((t=>{const s=(new Te).addAnimal({scene:e.scene,gltfLoader:i,position:{x:t.x,y:t.y,z:t.z},rotation:{x:0,y:(0,O.Id)((0,fe.s)(0,3)),z:0}});this.animals.push(s),s.then((e=>{this.items.push(e)})).catch((e=>{}))})),re.forEach((t=>{const s=(new Ne).addAnimal({scene:e.scene,gltfLoader:i,position:{x:t.x,y:t.y,z:t.z},rotation:{x:0,y:(0,O.Id)((0,fe.s)(0,3)),z:0}});this.animals.push(s),s.then((e=>{this.items.push(e)})).catch((e=>{}))}));const o=(new Q).addItem({container:e.scene,textureLoader:t,postList:e.postList,framesData:ne,isAnimation:!0});this.items.push(o),this.targets.push(...o.objects)}update(e){this.items.forEach((t=>{t.update&&t.update(e)}))}dispose(){this.lights.forEach((e=>{this.scene&&this.scene.remove(e),(0,F.D)(e)})),this.items.forEach((e=>{e.dispose&&e.dispose()})),this.targets=[],this.obstacles=[],this.floors=[],this.items=[],this.lights=[],this.animals=[]}}(0,r.Z)(We,"instance",null);var Ke=s(4813),Fe=s(4530);const qe=e=>{let{gallery:t,onClickEnter:s}=e;const n=(0,i.useRef)(null),a=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=n.current,t=a.current,s=(0,Fe.Z)((function(s){const{x:i,y:n,width:a,height:o}=e.getBoundingClientRect(),r=s.clientX-i,c=s.clientY-n,h=r-a/2,d=c-o/2,l=Math.sqrt(h**2+d**2);e.style.transform="\n          rotate3d(\n            ".concat(-d/170,",  ").concat(h/170,", 0, ").concat(l/17,"deg\n          )\n        "),e.style.boxShadow="\n          ".concat(-h/10,"px  ").concat(-d/10,"px 20px rgba(0, 0, 0, 0.3)\n        "),t.style.backgroundImage="\n          radial-gradient(\n            circle at ".concat(r,"px ").concat(c,"px, #00000010, #ffffff00, #ffffff70\n          )\n        ")}));return e.addEventListener("mousemove",s),()=>{e.removeEventListener("mousemove",s)}}),[]),(0,h.jsxs)("div",{className:"gallery-cover",children:[(0,h.jsxs)("article",{className:"gallery-cover__content",ref:n,children:[(0,h.jsx)("h1",{children:t.name}),(0,h.jsx)("p",{children:t.content}),(0,h.jsx)(Ke.Z,{text:"입장하기",onClick:s,direction:"center"}),(0,h.jsx)("div",{className:"gallery-cover__content--light",ref:a})]}),(0,h.jsx)("div",{className:"gallery-cover__back"})]})};var Ye=s(2914);const Xe=e=>{let{control:t,shoot:s,jump:n}=e;const a=(0,i.useRef)(null),o=(0,i.useRef)(null),r=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{const e=a.current,i=o.current,h=r.current,l=c.current,p={x:0,y:0,radius:0},u={top:0,bottom:0,left:0,right:0},g={top:0,bottom:0,left:0,right:0},m=function(){let t=e.getBoundingClientRect();p.x=t.x+e.offsetWidth/2,p.y=t.y+e.offsetHeight/2,p.radius=e.offsetWidth/2,t=h.getBoundingClientRect(),u.top=t.y,u.bottom=t.y+h.offsetHeight,u.left=t.x,u.right=t.x+h.offsetWidth,t=l.getBoundingClientRect(),g.top=t.y,g.bottom=t.y+l.offsetHeight,g.left=t.x,g.right=t.x+l.offsetWidth},w=function(){d.current=!0},f=function(e){const a=e.changedTouches[e.changedTouches.length-1];a.clientX>u.left&&a.clientX<u.right&&a.clientY>u.top&&a.clientY<u.bottom?s&&setTimeout(s,0):a.clientX>g.left&&a.clientX<g.right&&a.clientY>g.top&&a.clientY<g.bottom?n&&n():(d.current=!1,i.style.transform="\n        translate(".concat(0,"px, ",0,"px)\n        "),t&&t(0,0))};m(),window.addEventListener("resize",m);const b=(0,Fe.Z)((function(e){if(e.preventDefault(),!d.current)return;const s=e.changedTouches[e.changedTouches.length-1];if(s.clientX>u.left&&s.clientX<u.right&&s.clientY>u.top&&s.clientY<u.bottom)return;if(s.clientX>g.left&&s.clientX<g.right&&s.clientY>g.top&&s.clientY<g.bottom)return;let n=s.clientX-p.x,a=s.clientY-p.y;const o=(n**2+a**2)**.5;o>p.radius&&(n/=o/p.radius,a/=o/p.radius),i.style.transform="\n      translate(".concat(.9*n,"px, ").concat(.9*a,"px)\n      "),t&&t(n/p.radius,a/p.radius)}));return e.addEventListener("touchstart",w),i.addEventListener("touchstart",w),document.addEventListener("touchmove",b),document.addEventListener("touchend",f),()=>{window.removeEventListener("resize",m),e.removeEventListener("touchstart",w),i.removeEventListener("touchstart",w),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",f)}}),[]),(0,h.jsxs)("div",{className:"joystick",children:[(0,h.jsx)("div",{className:"joystick__controller",ref:a,children:(0,h.jsx)("div",{className:"joystick__controller--core",ref:o})}),(0,h.jsxs)("div",{className:"joystick__buttons",children:[(0,h.jsx)("div",{className:"joystick__shoot",ref:r,children:(0,h.jsx)(u,{})}),(0,h.jsx)("div",{className:"joystick__jump",ref:c,children:(0,h.jsx)(f,{})})]})]})};var Ue=s(2233),Je=s(351),He=s(7308);const Qe=e=>{let{music:t}=e;return(0,h.jsxs)("section",{className:"music-player",children:[(0,h.jsx)("img",{className:"music-player__cover",src:t.coverURL}),(0,h.jsx)(He.Z,{videoId:t.videoId,id:"youtube",opts:{height:"1",width:"1",playerVars:{autoplay:1}}}),(0,h.jsx)("div",{className:"music-player__info",children:(0,h.jsx)("p",{children:(t.title+" - "+t.artist+"          ").repeat(5)})})]})},Ge=e=>{let{post:t}=e;return(0,h.jsxs)("section",{className:"post",children:[(0,h.jsx)("img",{className:"post__image",src:t.imageURL}),(0,h.jsxs)("div",{className:"post__description",children:[t.music&&(0,h.jsx)(Qe,{music:t.music}),(0,h.jsx)("h1",{children:t.title}),(0,h.jsx)("p",{children:t.content})]})]})};var _e=s(9451),$e=s(5945),et=s(4469),tt=s(9093),st=s(2731);function it(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function nt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?it(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):it(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const at={regex:/[\s\S]{1,100}/,condition:"공백 포함 100자로 입력해주세요"},ot={regex:/^[1-9]\d*$/,condition:"게시물 식별자(숫자)가 올바르지 않습니다"};var rt=s(8891),ct=s(6738),ht=s(950);const dt=e=>{let{postId:t,user:s,onSuccess:n,onError:a}=e;const{mutateAsync:o}=function(e,t){const s=(0,$e.NL)();return(0,et.D)((e=>tt.Z.post("/post/comment",e)),nt({onSuccess:t=>{s.invalidateQueries(["comment-list",{postId:e}]),st.Z.addToast("success",t.message)},onError:e=>{st.Z.addToast("error",e.message)}},t))}(t),[r,c]=(0,i.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(rt.Z,{className:"comment-form",onSubmit:e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget,s=function(e){const t=e.get("content");if(!at.regex.test(t))return{result:!1,reason:at.condition};const s=e.get("postId");return ot.regex.test(s)?{result:!0,data:{content:t,postId:parseInt(s)}}:{result:!1,reason:ot.condition}}(new FormData(t));s.result?o(s.data).then((()=>{t.reset(),n&&n()})).catch((()=>{a&&a()})):st.Z.addToast("error",s.reason)},children:[(0,h.jsx)("input",{type:"hidden",name:"postId",value:t}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ct.Z,{label:"감상문",name:"content",initialValue:""}),(0,h.jsx)(Ke.Z,{type:"submit",text:"생성"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ct.Z,{disabled:!0,label:"먼저 로그인 하세요",name:"content",initialValue:""}),(0,h.jsx)(Ke.Z,{type:"button",text:"로그인",onClick:()=>c(!0)})]})]}),(0,h.jsx)(Je.Z,{isOpen:r,onClose:()=>c(!1),children:(0,h.jsx)(ht.Z,{})})]})},lt=["styles"];function pt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function ut(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const gt=e=>{let{styles:t={}}=e,s=(0,c.Z)(e,lt);return(0,h.jsx)("svg",ut(ut({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s),{},{children:(0,h.jsx)("path",{fill:"currentColor",d:"M6 7H5v13a2 2 0 002 2h10a2 2 0 002-2V7zm4 12H8v-9h2zm6 0h-2v-9h2zm.618-15L15 2H9L7.382 4H3v2h18V4z"})}))},mt=e=>{let{postId:t,comment:s,user:n}=e;const[a,o]=(0,i.useState)(!1),{mutateAsync:r}=function(e,t,s){const i=(0,$e.NL)();return(0,et.D)((()=>tt.Z.delete("/post/comment/".concat(t))),nt({onSuccess:t=>{i.invalidateQueries(["comment-list",{postId:e}]),st.Z.addToast("success",t.message)},onError:e=>{st.Z.addToast("error",e.message)}},s))}(t,s.commentId);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"comment-item",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("b",{children:s.nickname}),"  ",s.content]}),(0,h.jsx)("p",{children:new Date(s.createdDate).toLocaleDateString()}),n&&s.nickname===n.nickname&&(0,h.jsx)("button",{type:"button",onClick:()=>{o(!0)},"aria-label":"댓글 삭제",children:(0,h.jsx)(gt,{})})]}),(0,h.jsx)(Je.Z,{isOpen:a,onClose:()=>o(!1),children:(0,h.jsxs)("div",{className:"comment-item__delete",children:[(0,h.jsx)("p",{children:"댓글을 삭제하시겠습니까?"}),(0,h.jsx)(Ke.Z,{text:"삭제",direction:"right",onClick:()=>{r().then((()=>{o(!1)}))}})]})})]})};var wt=s(966),ft=s(899);const bt=e=>{let{postId:t}=e;const{data:s,isLoading:n,isError:a}=function(e,t){return(0,_e.a)(["comment-list",{postId:e}],(()=>tt.Z.get("/post/comment/list/".concat(e))),nt({onSuccess:()=>{},onError:e=>{st.Z.addToast("error",e.message)},select:e=>e.data},t))}(t),{data:o,refetch:r}=(0,wt.bT)({enabled:!1}),c=(0,ft.r)((e=>e.isLogin()));return(0,i.useEffect)((()=>{c&&r()}),[c]),a?null:n?(0,h.jsx)(Ue.Z,{}):(0,h.jsxs)("section",{className:"comment-list",children:[s.length?(0,h.jsx)("ol",{className:"comment-list__list",children:s.map((e=>(0,h.jsx)("li",{children:(0,h.jsx)(mt,{postId:t,comment:e,user:o})},e.commentId)))}):(0,h.jsx)("div",{className:"comment-list__empty",children:"댓글이 없습니다"}),(0,h.jsx)(dt,{postId:t,user:o})]})},vt=e=>{let{post:t}=e;return(0,h.jsxs)("article",{className:"post-detail",children:[(0,h.jsx)(Ge,{post:t}),(0,h.jsx)(bt,{postId:t.postId})]})};var xt=s(7103);function yt(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}const Zt=new P.Pa4(0,-1,0);P.Kj0.prototype.raycast=I.uL;var jt=new WeakMap,At=new WeakMap,Pt=new WeakMap,zt=new WeakMap,Ot=new WeakMap,It=new WeakMap,kt=new WeakMap,St=new WeakMap,Lt=new WeakMap,Et=new WeakMap,Mt=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,Vt=new WeakMap;class Ct{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:7;(0,r.Z)(this,"enabled",!0),(0,r.Z)(this,"obstacles",[]),(0,r.Z)(this,"floors",[]),yt(this,jt,{writable:!0,value:new P.ZAu}),yt(this,At,{writable:!0,value:new P.Pa4(0,4,-6)}),yt(this,Pt,{writable:!0,value:null}),yt(this,zt,{writable:!0,value:null}),yt(this,Ot,{writable:!0,value:new P.iMs}),yt(this,It,{writable:!0,value:new P.Pa4}),yt(this,kt,{writable:!0,value:1}),yt(this,St,{writable:!0,value:0}),yt(this,Lt,{writable:!0,value:0}),yt(this,Et,{writable:!0,value:1}),yt(this,Mt,{writable:!0,value:0}),yt(this,Nt,{writable:!0,value:0}),yt(this,Rt,{writable:!0,value:!1}),yt(this,Dt,{writable:!0,value:!1}),yt(this,Vt,{writable:!0,value:0}),this.scene=e,this.camera=t,this.gravity=s,this.jumpForce=i,this.maxFallSpeed=n,this.scene.add((0,be.Z)(this,jt)),this.scene.remove(this.camera),this.camera.position.copy((0,be.Z)(this,At)),(0,be.Z)(this,jt).add(this.camera),this.camera.lookAt(new P.Pa4(0,3,0).add((0,be.Z)(this,jt).position)),(0,be.Z)(this,Ot).far=10,(0,be.Z)(this,Ot).firstHitOnly=!0,this.setOrientation();const a=this.onKeyDown.bind(this),o=this.onKeyUp.bind(this);window.addEventListener("keydown",a),window.addEventListener("keyup",o),this.dispose=()=>{this.scene.remove((0,be.Z)(this,jt)),(0,be.Z)(this,jt).remove(this.camera),(0,be.Z)(this,Pt)&&((0,be.Z)(this,jt).remove((0,be.Z)(this,Pt).object),(0,be.Z)(this,Pt).dispose()),window.removeEventListener("keydown",a),window.removeEventListener("keyup",o)}}onKeyDown(e){if(this.enabled)switch(e.code){case"ArrowUp":case"KeyW":e.preventDefault(),(0,ve.Z)(this,St,1),(0,ve.Z)(this,Lt,0);break;case"ArrowDown":case"KeyS":e.preventDefault(),(0,ve.Z)(this,St,0),(0,ve.Z)(this,Lt,1);break;case"ArrowRight":case"KeyD":e.preventDefault(),(0,ve.Z)(this,Nt,0),(0,ve.Z)(this,Mt,1);break;case"ArrowLeft":case"KeyA":e.preventDefault(),(0,ve.Z)(this,Nt,1),(0,ve.Z)(this,Mt,0);break;case"AltLeft":e.preventDefault(),this.jump()}}onKeyUp(e){switch(e.code){case"ArrowUp":case"KeyW":(0,ve.Z)(this,St,0);break;case"ArrowDown":case"KeyS":(0,ve.Z)(this,Lt,0);break;case"ArrowRight":case"KeyD":(0,ve.Z)(this,Mt,0);break;case"ArrowLeft":case"KeyA":(0,ve.Z)(this,Nt,0)}}set moveSpeed(e){e>0?(0,ve.Z)(this,kt,e):(0,ve.Z)(this,kt,1.6)}set moveSpeedRatio(e){e>1?((0,ve.Z)(this,St,1),(0,ve.Z)(this,Lt,0)):e>0?((0,ve.Z)(this,St,e),(0,ve.Z)(this,Lt,0)):e<-1?((0,ve.Z)(this,St,0),(0,ve.Z)(this,Lt,1)):((0,ve.Z)(this,St,0),(0,ve.Z)(this,Lt,-e))}set rotateSpeed(e){e>0?(0,ve.Z)(this,Et,e):(0,ve.Z)(this,Et,1.5)}set rotateSpeedRatio(e){e>1?((0,ve.Z)(this,Mt,1),(0,ve.Z)(this,Nt,0)):e>0?((0,ve.Z)(this,Mt,e),(0,ve.Z)(this,Nt,0)):e<-1?((0,ve.Z)(this,Mt,0),(0,ve.Z)(this,Nt,1)):((0,ve.Z)(this,Mt,0),(0,ve.Z)(this,Nt,-e))}set character(e){(0,be.Z)(this,Pt)&&((0,be.Z)(this,jt).remove((0,be.Z)(this,Pt).object),(0,be.Z)(this,Pt).dispose()),(0,ve.Z)(this,Pt,e),(0,be.Z)(this,jt).add((0,be.Z)(this,Pt).object),(0,be.Z)(this,Pt).actions.jump.setLoop(P.YKA,1),(0,be.Z)(this,Pt).actions.jump.clampWhenFinished=!0,(0,be.Z)(this,Pt).mixer.addEventListener("finished",(e=>{var t;e.action===(null===(t=(0,be.Z)(this,Pt))||void 0===t?void 0:t.actions.jump)&&(0,ve.Z)(this,Rt,!1)}))}get chracter(){return(0,be.Z)(this,Pt)}set cameraOffset(e){(0,be.Z)(this,At).copy(e),this.camera.position.copy((0,be.Z)(this,At))}setOrientation(){(0,be.Z)(this,jt).getWorldDirection((0,be.Z)(this,It)),(0,ve.Z)(this,Dt,!1),(0,ve.Z)(this,Vt,0)}setPosition(e,t,s){(0,be.Z)(this,jt).position.set(e,t,s),this.setOrientation()}setQuaternion(e,t,s){(0,be.Z)(this,jt).rotation.set(e,t,s),this.setOrientation()}fadeToAction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;const s=(0,be.Z)(this,zt);(0,ve.Z)(this,zt,e),s!==(0,be.Z)(this,zt)&&(s&&s.fadeOut(t),(0,be.Z)(this,zt).reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(t).play())}jump(){(0,be.Z)(this,Dt)||(0,ve.Z)(this,Rt,!0)}update(e){if(!this.enabled||!(0,be.Z)(this,Pt))return;const t=e*(0,be.Z)(this,Et)*((0,be.Z)(this,Nt)-(0,be.Z)(this,Mt))*.6;let s;(0,be.Z)(this,jt).rotateY(t);let i=0;if((0,be.Z)(this,St)||(0,be.Z)(this,Lt)){(0,be.Z)(this,jt).getWorldDirection((0,be.Z)(this,It)),i=e*(0,be.Z)(this,kt)*((0,be.Z)(this,St)-(0,be.Z)(this,Lt))*5,i<0&&(0,be.Z)(this,It).negate();for(const e of[0,(0,be.Z)(this,Pt).size.height*((0,be.Z)(this,Rt)?.5:1)-.4])if((0,be.Z)(this,Ot).set(new P.Pa4(0,(0,be.Z)(this,Pt).size.height-e,0).add((0,be.Z)(this,jt).position),(0,be.Z)(this,It)),s=(0,be.Z)(this,Ot).intersectObjects(this.obstacles),s.length&&s[0].distance<1){i=0;break}}if((0,be.Z)(this,jt).translateZ(i),(0,be.Z)(this,Ot).set(new P.Pa4(0,(0,be.Z)(this,Pt).size.height,0).add((0,be.Z)(this,jt).position),Zt),s=(0,be.Z)(this,Ot).intersectObjects(this.floors),s.length&&s[0].distance<(0,be.Z)(this,Pt).size.height+1)(0,ve.Z)(this,Dt,!1),(0,ve.Z)(this,Vt,0),(0,be.Z)(this,jt).position.y+=(0,be.Z)(this,Pt).size.height-s[0].distance;else{(0,ve.Z)(this,Dt,!0),(0,ve.Z)(this,Vt,(0,be.Z)(this,Vt)+e);const t=Math.min(this.gravity*(0,be.Z)(this,Vt)**2*10,this.maxFallSpeed);(0,be.Z)(this,jt).position.y-=e*t}(0,be.Z)(this,Pt).mixer.update(e),(0,be.Z)(this,Rt)?this.fadeToAction((0,be.Z)(this,Pt).actions.jump):(0,be.Z)(this,Dt)?this.fadeToAction((0,be.Z)(this,Pt).actions.fall):(0,be.Z)(this,St)>(0,be.Z)(this,Lt)?this.fadeToAction((0,be.Z)(this,Pt).actions.run):(0,be.Z)(this,St)<(0,be.Z)(this,Lt)?this.fadeToAction((0,be.Z)(this,Pt).actions.runBackward):this.fadeToAction((0,be.Z)(this,Pt).actions.idle)}}function Bt(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}const Tt=new P.FM8(0,0);P.Kj0.prototype.raycast=I.uL;var Wt=new WeakMap;class Kt{constructor(e,t){Bt(this,Wt,{writable:!0,value:new P.iMs}),(0,r.Z)(this,"enabled",!0),(0,r.Z)(this,"rayItems",[]),this.canvas=e,this.camera=t;const s=this.onKeyDown.bind(this);window.addEventListener("keydown",s);const i=document.createElement("div");i.id="target",this.canvas.parentNode.insertBefore(i,e.nextSibling),(0,be.Z)(this,Wt).firstHitOnly=!0,this.dispose=()=>{window.removeEventListener("keydown",s);const e=document.getElementById("target");e&&e.remove()}}shoot(){if(this.raycast){(0,be.Z)(this,Wt).setFromCamera(Tt,this.camera);const e=(0,be.Z)(this,Wt).intersectObjects(this.rayItems);for(const t of e){this.raycast(t);break}}}onKeyDown(e){if(this.enabled)switch(e.code){case"ControlLeft":e.preventDefault(),this.shoot();break;case"Escape":e.preventDefault(),this.onEsc&&this.onEsc()}}}const Ft=s.p+"images/michelled2e7a5a6e47cc8e95637.glb";class qt{constructor(e){this.object=e.object,this.mixer=e.mixer,this.actions=e.actions,this.size=e.size}dispose(){(0,F.D)(this.object)}}class Yt{static async build(e){const t=await new Promise(((t,s)=>{e.load(Ft,(e=>t(e)),void 0,s)})),s=t.scene.children[0];s.scale.multiplyScalar(1.5),s.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0}));const i=new P.Xcj(s);i.timeScale=1.2;const n=i.clipAction(t.animations[4]),a=i.clipAction(t.animations[3]),o=i.clipAction(t.animations[2]),r=i.clipAction(t.animations[1]),c=i.clipAction(t.animations[0]);return new qt({object:s,mixer:i,actions:{idle:n,run:a,runBackward:o,jump:r,fall:c},size:{width:.73,height:1.67,depth:.21}})}}var Xt=s(7458),Ut=s(7307);const Jt={1:new We,2:new ee},Ht=e=>{let{gallery:t,postList:s}=e;const[n,a]=(0,i.useState)(0),[o,r]=(0,i.useState)(0),[c,d]=(0,i.useState)(!0),l=(0,i.useRef)(!1);(0,i.useEffect)((()=>{o===n&&l.current&&setTimeout((()=>{w.current.enabled=!0}),100)}),[o,n]);const p=(0,i.useRef)(null),u=(0,i.useRef)(null),g=(0,i.useRef)(null),m=(0,i.useRef)(null),w=(0,i.useRef)(null),f=(0,i.useRef)(null),v=(0,i.useRef)(!1),[x,y]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!t||!s)return;const e=p.current,i=new P.lLk;m.current=i,i.onStart=function(){a((e=>e+1))},i.onLoad=function(){r((e=>e+1))},i.onError=function(e){st.Z.addToast("error","필요한 자원을 로드하지 못했습니다")};const n=new Xt.T({canvas:e,antialias:!0});g.current=n;const o=new P.xsS;u.current=o;const c=new xt.R({canvas:e});o.add(c);const h=new Ct(o,c,1.6);w.current=h,h.enabled=!1,Yt.build(new z.E(i)).then((e=>{h.character=e})).catch((e=>{}));const d=new Kt(e,c);f.current=d,d.raycast=e=>{e.object.userData.isPost&&(e.distance>15?st.Z.addToast("error","앨범이 너무 멀리 있습니다"):(y(e.object.userData.idx),Ut.Z.muteAudio(),h.enabled=!1))},d.onEsc=()=>{y(null),Ut.Z.unmuteAudio(),h.enabled=!0};const l=function(){c.setDefaultAspect(),c.updateProjectionMatrix(),n.setDefaultSize(),n.render(o,c)};window.addEventListener("resize",l);const b=new P.SUY,x=function(){var e;const t=b.getDelta();h.update(t),(null===(e=j.current)||void 0===e?void 0:e.update)&&j.current.update(t),n.render(o,c),n.setAnimationLoop(x)};return x(),v.current=!0,()=>{o.remove(c),n.setAnimationLoop(null),n.dispose(),h.dispose(),d.dispose(),window.removeEventListener("resize",l)}}),[]);const Z=(0,i.useRef)(!0),j=(0,i.useRef)(null);(0,i.useEffect)((()=>{if(Z.current)return void(Z.current=!1);if(!t||!s||!v.current)return;const e=Jt[t.place.placeId];return j.current=e,e.build({scene:u.current,controls:w.current,loadingManager:m.current,postList:s}),w.current.floors=e.floors,w.current.obstacles=e.obstacles,f.current.rayItems=e.targets,()=>{d(!0),l.current=!1,w.current.enabled=!1,a(0),r(0),e.dispose()}}),[t,s,v.current]);const A=(0,b.Z)(),O=(0,i.useCallback)(((e,t)=>{w.current&&(w.current.rotateSpeedRatio=e,w.current.moveSpeedRatio=-t)}),[]),I=(0,i.useCallback)((()=>{f.current&&f.current.shoot()}),[]),k=(0,i.useCallback)((()=>{w.current&&w.current.jump()}),[]);return(0,h.jsxs)("div",{className:"gallery-canvas",children:[(0,h.jsx)("canvas",{ref:p}),(0,h.jsx)(Je.Z,{isOpen:null!==x,onClose:()=>{y(null),Ut.Z.unmuteAudio(),w.current&&(w.current.enabled=!0)},children:null!==x&&(0,h.jsx)(vt,{post:s[x]})}),A&&(0,h.jsx)("div",{className:"gallery-canvas__joystick",children:(0,h.jsx)(Xe,{control:O,shoot:I,jump:k})}),(0,h.jsx)(Ye.Z,{className:"gallery-canvas__loading",isShow:n!==o,duration:1e3,timingFunction:"ease-in-out",children:(0,h.jsx)(Ue.Z,{})}),(0,h.jsx)(Ye.Z,{className:"gallery-canvas__cover",isShow:c,duration:1e3,children:(0,h.jsx)(qe,{gallery:t,onClickEnter:()=>{w.current&&(d(!1),Ut.Z.playAudio(),n===o?w.current.enabled=!0:l.current=!0)}})})]})};var Qt=s(6207),Gt=s(2480);const _t=[{src:"",title:""},{src:Z,title:"MapleStory - Raindrop Flower (ver. Piano)"},{src:y,title:"MapleStory - Phantheon (ver. Piano)"},{src:Z,title:"MapleStory - Raindrop Flower (ver. Piano)"}],$t=()=>{const{galleryId:e}=(0,n.UO)(),{data:t,isLoading:s,isError:a}=(0,Qt.rp)(parseInt(e)),{data:o,isLoading:r,isError:c}=(0,Gt.N)(parseInt(e));if((0,i.useEffect)((()=>{const e=document.body;return e.style.overflow="hidden",()=>{e.style.overflow="auto"}}),[]),!a&&!c)return s||r?(0,h.jsx)(j.Z,{}):(0,h.jsxs)("div",{className:"gallery",children:[(0,h.jsx)("div",{className:"gallery__music",children:(0,h.jsx)(A.Z,{id:"gallery-audio",src:_t[t.place.placeId].src,title:_t[t.place.placeId].title,color:"white"})}),(0,h.jsx)("div",{className:"gallery__navbar",children:(0,h.jsx)(x,{})}),(0,h.jsx)("div",{className:"gallery__canvas",children:(0,h.jsx)(Ht,{gallery:t,postList:o})})]})}}}]);